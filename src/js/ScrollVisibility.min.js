WT_DECLARE_WT_MEMBER(3,JavaScriptConstructor,"ScrollVisibility",(function(e){var i=e.WT;function t(e){return"hidden"!=e.style.visibility&&"none"!=e.style.display&&!$(e).hasClass("out")&&(!((e=e.parentNode)&&!i.hasTag(e,"BODY"))||t(e))}var n=0,r={},o=!1;function l(e,n){if(!t(e))return!1;var r=i.widgetPageCoordinates(e),o=r.x-document.body.scrollLeft-document.documentElement.scrollLeft,l=r.y-document.body.scrollTop-document.documentElement.scrollTop,s=i.windowSize(),a=o,c=e.offsetWidth,d=l,u=e.offsetHeight,v=-n,f=s.x+2*n,m=-n,w=s.y+2*n;return a+c>=v&&v+f>=a&&d+u>=m&&m+w>=d}function s(){for(var i in r)if(r.hasOwnProperty(i)){var t;if((t=l(r[i].el,r[i].margin))!==r[i].visible){r[i].visible=t;e.emit(r[i].el,"scrollVisibilityChanged",t)}}}var a=null,c=null;window.hasOwnProperty("MutationObserver")&&(a=new MutationObserver(s));this.add=function(i){0===n&&function(){if(a){a.observe(document,{childList:!0,attributes:!0,subtree:!0,characterData:!0});window.addEventListener("resize",s,!0);window.addEventListener("scroll",s,!0)}else c=setInterval(s,100)}();var t=i.el.id,d=t in r;o;var u=l(i.el,i.margin);if(i.visible!==u){i.visible=u;e.emit(i.el,"scrollVisibilityChanged",u)}r[t]=i;d||++n};this.remove=function(e){if(0!==n){if(e in r){o;delete r[e];--n}0===n&&function(){if(a){a.disconnect();window.removeEventListener("resize",s,{capture:!0});window.removeEventListener("scroll",s,{capture:!0})}else if(c){clearInterval(c);c=null}}()}}}));