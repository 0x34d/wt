WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"StdLayout2",function(C,x,J,I,v,D,B,y,t,z,s){function E(a,b){var c=q[b],i=b?a.scrollHeight:a.scrollWidth;b=b?a.clientHeight:a.clientWidth;if(b>1E6){b-=1E6;if(i>1E6)i-=1E6}if(d.isIE&&(d.hasTag(a,"BUTTON")||d.hasTag(a,"TEXTAREA")||d.hasTag(a,"INPUT")||d.hasTag(a,"SELECT")))i=b;if(!d.isOpera&&!d.isGecko)i+=d.px(a,"border"+c.Left+"Width")+d.px(a,"border"+c.Right+"Width");i+=d.px(a,"margin"+c.Left)+d.px(a,"margin"+c.Right);if(!d.boxSizing(a)&&!d.isIE)i+=d.px(a,
"padding"+c.Left)+d.px(a,"padding"+c.Right);return i}function F(a,b){b=q[b];if(a.style.display=="none"||a.style.visibility=="hidden")return 0;else if(a["layoutMin"+b.Size])return a["layoutMin"+b.Size];else{var c=d.px(a,"min"+b.Size);d.boxSizing(a)||(c+=d.px(a,"padding"+b.Left)+d.px(a,"padding"+b.Right));return c}}function P(a,b){b=q[b];var c=d.px(a,"margin"+b.Left)+d.px(a,"margin"+b.Right);if(!d.boxSizing(a)&&!(d.isIE&&!d.isIElt9&&d.hasTag(a,"BUTTON")))c+=d.px(a,"border"+b.Left+"Width")+d.px(a,"border"+
b.Right+"Width")+d.px(a,"padding"+b.Left)+d.px(a,"padding"+b.Right);return c}function Q(a,b){b=q[b];return d.px(a,"padding"+b.Left)+d.px(a,"padding"+b.Right)}function R(a,b){if(d.boxSizing(a)){b=q[b];return d.px(a,"border"+b.Left+"Width")+d.px(a,"border"+b.Right+"Width")+d.px(a,"padding"+b.Left)+d.px(a,"padding"+b.Right)}else return 0}function T(a,b){b=q[b];return d.px(a,"border"+b.Left+"Width")+d.px(a,"border"+b.Right+"Width")+d.px(a,"margin"+b.Left)+d.px(a,"margin"+b.Right)+d.px(a,"padding"+b.Left)+
d.px(a,"padding"+b.Right)}function U(a){G=a.dirty=true;C.layouts2.scheduleAdjust()}function V(a,b,c){b=q[a];var i=b.config.length,h=q[a^1].config.length;if(G||H){var g=b.measures.slice();if(g.length==5){g[0]=g[0].slice();g[1]=g[1].slice()}var o=[],w=[],j=0,n=0,l,k=b.maxSize>0||!b.initialized[a];for(l=0;l<i;++l){var f=0,p=b.config[l][2],r=true;for(oi=0;oi<h;++oi){var e=b.getItem(l,oi);if(e){if(!e.w){var u=$("#"+e.id);e.w=u.get(0);(function(){u.find("img").load(function(){U(e)})})();e.w.style.left=
e.w.style.top="-1000000px"}if(e.w.style.position!="absolute"){e.w.style.position="absolute";e.w.style.visibility="hidden";e.w.style.boxSizing="border-box";var m=d.cssPrefix("BoxSizing");if(m)e.w.style[m+"BoxSizing"]="border-box"}if(!e.ps)e.ps=[];if(!e.ws)e.ws=[];if(!e.size)e.size=[];if(!e.fs)e.fs=[0];if(!e.set)e.set=[false,false];if(e.w){if(d.isIE)e.w.style.visibility="";console.log("measure "+a+" "+e.id+": "+e.ps[0]+","+e.ps[1]);if(e.dirty||H){m=F(e.w,a);if(m>p)p=m;e.ws[a]=m;if(typeof e.fs[a]===
"undefined"){var K=d.px(e.w,b.size);e.fs[a]=K>Math.max(R(e.w,a),m)?K+P(e.w,a):0}m=e.fs[a];if(e.align>>b.alignBits&15||k||b.config[l][0]<=0){m=Math.max(m,E(e.w,a));if(e.layout&&m<e.ps[a])m=e.ps[a];else e.ps[a]=m}if(!e.span||e.span[a]==1)if(m>f)f=m;if(a==1)e.dirty=false}else{if(!e.span||e.span[a]==1)if(e.ps[a]>f)f=e.ps[a];if(e.ws[a]>p)p=e.ps[a]}console.log(" ->"+e.id+": "+e.ps[0]+","+e.ps[1]);if(e.w.style.display!=="none")r=false}}}if(r)p=f=-1;else if(p>f)f=p;o[l]=f;w[l]=p;if(p>-1){j+=f;n+=p}}h=0;k=
true;f=false;for(l=0;l<i;++l)if(w[l]>-1){if(k){h+=b.margins[1];k=false}else{h+=b.margins[0];if(f)h+=4}f=b.config[l][1]}k||(h+=b.margins[2]);j+=h;n+=h;console.log("measured "+x+": "+a+" ps "+o);b.measures=[o,w,j,n];if(L)if(g[2]!=b.measures[2]){i=T(M,a);L.setChildSize(M,a,b.measures[2]+i)}if(c&&g[3]!=b.measures[3]){g=b.measures[3]+"px";if(c.style["min"+b.Size]!=g){c.style["min"+b.Size]=g;N.ancestor&&N.ancestor.setContentsDirty(c)}}if(c)if(a==0&&c&&d.hasTag(c,"TD"))c.style[b.size]=b.measures[2]+"px"}}
function W(a,b,c){a=q[a];a.fixedSize[b]=a.sizes[b]+c;C.layouts2.scheduleAdjust()}function X(a,b,c){var i=b.di,h=q[a],g=q[a^1],o,w=d.getElement(x),j;for(j=i-1;j>=0;--j)if(h.sizes[j]>=0){o=-(h.sizes[j]-h.measures[1][j]);break}i=h.sizes[i]-h.measures[1][i];new d.SizeHandle(d,h.resizeDir,d.pxself(b,h.size),d.pxself(b,g.size),o,i,h.resizerClass,function(n){W(a,j,n)},b,w,c,0,0)}function Y(a,b){var c=q[a],i=q[a^1],h=c.measures,g=0,o=false,w=false,j=false,n=O?b.parentNode:null;if(c.maxSize===0)if(n){var l=
d.css(n,"position");if(l==="absolute")g=d.pxself(n,c.size);if(g===0){if(!c.initialized){c.initialized=true;if(l!=="absolute"){g=a?n.clientHeight:n.clientWidth;o=true;if(a==0&&g==0&&d.isIE6){g=n.offsetWidth;o=false}if(d.isIE6&&g==0||g==h[3]+Q(n,a))c.maxSize=999999}}if(g===0&&c.maxSize===0){g=a?n.clientHeight:n.clientWidth;o=true}}}else{g=d.pxself(b,c.size);w=true}if(c.maxSize)if(h[2]<c.maxSize){n.style[c.size]=h[2]+"px";g=h[2];j=w=true}else{g=c.maxSize;o=false}c.cSize=g;if(a==1&&(c.maxSize||i.maxSize)){var k=
i.cSize,f=c.cSize;if(f<c.maxSize||k<i.maxSize)n.wtResize&&n.wtResize(n,k,f)}w||(g-=o?Q(n,a):R(n,a));if(!(n&&g<=0)){if(g<h[3])g=h[3];$(b).children("."+i.handleClass).css(c.size,g-c.margins[2]-c.margins[1]+"px");o=h[1].slice();w=c.config.length;n=i.config.length;console.log("apply "+x+": "+a+" ps "+h[0]+" cSize "+g);if(c.fixedSize.length==0&&g==h[2])o=h[0];else if(g>h[3]){var p=0;var r=k=0,e=0;for(f=0;f<w;++f)if(h[1][f]>-1)if(typeof c.fixedSize[f]!=="undefined"){r+=c.fixedSize[f];o[f]=c.fixedSize[f]}else{++e;
if(c.config[f][0]<=0)p+=h[0][f]-h[1][f];else k+=c.config[f][0]}g=g-h[3]-r;if(c.fitSize&&!j&&k==0)p=0;if(p){j=g>p?p:g;p=j/p;for(f=0;f<w;++f)if(h[1][f]>-1)if(typeof c.fixedSize[f]==="undefined"&&c.config[f][0]<=0)o[f]+=p*(h[0][f]-h[1][f]);g-=j}if(c.fitSize&&g>0){j=k;if(k==0)j=e;j=g/j;for(f=0;f<w;++f)if(h[1][f]>-1)if(typeof c.fixedSize[f]==="undefined"){g=k==0?1:c.config[f][0];if(g>0)o[f]+=g*j}}}c.sizes=o;console.log(" -> targetSize: "+o);h=0;g=true;p=false;for(f=0;f<w;++f)if(o[f]>-1){if(e=p){k=x+"-rs"+
a+"-"+f;j=d.getElement(k);if(!j){j=document.createElement("div");j.setAttribute("id",k);j.di=f;j.style.position="absolute";j.style[i.left]=i.margins[1]+"px";j.style[c.size]=c.margins[0]+"px";j.className=c.handleClass;b.insertBefore(j,b.firstChild);j.onmousedown=j.ontouchstart=function(K){X(a,this,K||window.event)}}h+=2;j.style[c.left]=h+"px";h+=2}p=c.config[f][1];if(g){h+=c.margins[1];g=false}else h+=c.margins[0];for(oi=0;oi<n;++oi)if((r=c.getItem(f,oi))&&r.w){k=r.w;j=o[f];if(r.span){var u=p;for(l=
1;l<r.span[a];++l){if(u)j+=4;u=c.config[f+u][1];j+=c.margins[0];j+=o[f+l]}}var m;k.style.visibility="";u=r.align>>c.alignBits&15;l=r.ps[a];if(j<l)u=0;if(u){switch(u){case 1:m=h;break;case 4:m=h+(j-l)/2;break;case 2:m=h+(j-l);break}if(r.layout)k.style[c.size]=l+"px";r.size[a]=l}else{m=P(k,a);u=j;if(d.isIElt9||!d.hasTag(k,"BUTTON")&&!d.hasTag(k,"INPUT")&&!d.hasTag(k,"SELECT"))u=Math.max(0,u-m);m=false;if(d.isIE&&d.hasTag(k,"BUTTON"))m=true;if(m||j!=l||k.style[c.size]!=""||r.layout){k.style[c.size]=
u+"px";r.set[a]=true}else k.style[c.size]="";m=h;r.size[a]=u}if(D)if(e){k.style[c.left]="4px";l=d.css(k,"position");if(l!=="absolute")k.style.position="relative"}else k.style[c.left]="0px";else k.style[c.left]=m+"px";a==1&&k.wtResize&&k.wtResize(k,r.size[0],r.size[1])}h+=o[f]}}}var d=C.WT;this.ancestor=null;this.descendants=[];var N=this,A=s,G=false,H=true,O=false,L=null,M=null,S=false,q=[{initialized:false,config:A.cols,margins:t,maxSize:B,measures:[],sizes:[],fixedSize:[],Left:"Left",left:"left",
Right:"Right",Size:"Width",size:"width",alignBits:0,getItem:function(a,b){return A.items[b*q[0].config.length+a]},handleClass:"Wt-vrh2",resizeDir:"h",resizerClass:"Wt-hsh2",fitSize:I},{initialized:false,config:A.rows,margins:z,maxSize:y,measures:[],sizes:[],fixedSize:[],Left:"Top",left:"top",Right:"Bottom",Size:"Height",size:"height",alignBits:8,getItem:function(a,b){return A.items[a*q[0].config.length+b]},handleClass:"Wt-hrh2",resizeDir:"v",resizerClass:"Wt-vsh2",fitSize:v}];jQuery.data(document.getElementById(x),
"layout",this);this.setConfig=function(a){var b=A;A=a;q[0].config=A.cols;q[1].config=A.rows;var c;a=0;for(c=b.items.length;a<c;++a){var i=b.items[a];if(i){if(i.set[0])i.w.style[q[0].size]="";if(i.set[1])i.w.style[q[1].size]="";if(i.layout){N.setChildSize(i.w,0,i.ps[0]);N.setChildSize(i.w,1,i.ps[1])}}}H=true};this.getId=function(){return x};this.setItemsDirty=function(a){var b,c,i=q[0].config.length;b=0;for(c=a.length;b<c;++b)A.items[a[b][0]*i+a[b][1]].dirty=true;G=true};this.setDirty=function(){H=
true};this.setChildSize=function(a,b,c){var i,h;i=0;for(h=A.items.length;i<h;++i){var g=A.items[i];if(g&&g.id==a.id){if(!g.ps)g.ps=[];g.ps[b]=c;g.layout=true;break}}G=true};this.measure=function(a){var b=d.getElement(x);if(!b)return false;if(!S){S=true;if(O=J==null){if(L=jQuery.data(b.parentNode.parentNode,"layout"))M=b.parentNode}else{L=jQuery.data(document.getElementById(J),"layout");M=b}}if(G||H)V(a,b,O?b.parentNode:null);if(a==1)G=H=false};this.apply=function(a){var b=d.getElement(x);if(!b)return false;
Y(a,b);return true};this.contains=function(a){var b=d.getElement(x);a=d.getElement(a.getId());return b&&a?d.contains(b,a):false}});WT_DECLARE_WT_MEMBER(2,JavaScriptPrototype,"StdLayout2.prototype.initResize",function(){this.resizeInitialized=true});
WT_DECLARE_APP_MEMBER(1,JavaScriptObject,"layouts2",new (function(){var C=[],x=false,J=this;this.find=function(v){return jQuery.data(document.getElementById(v),"layout")};this.add=function(v){function D(B,y){var t,z;t=0;for(z=B.length;t<z;++t){var s=B[t];if(s.contains(y)){D(s.descendants,y);return}else if(y.contains(s)){y.descendants.push(s);B.splice(t,1);--t;--z}}B.push(y)}D(C,v)};var I=false;this.scheduleAdjust=function(){if(!I){I=true;setTimeout(function(){J.adjust()},0)}};this.adjust=function(v,
D){function B(t,z){var s,E;s=0;for(E=t.length;s<E;++s){var F=t[s];B(F.descendants,z);F.measure(z)}}function y(t,z){var s,E;s=0;for(E=t.length;s<E;++s){var F=t[s];if(F.apply(z))y(F.descendants,z);else{t.splice(s,1);--s;--E}}}if(v)(v=this.find(v))&&v.setItemsDirty(D);else{I=false;if(!x){x=true;B(C,0);y(C,0);B(C,1);y(C,1);x=false}}};this.updateConfig=function(v,D){(v=this.find(v))&&v.setConfig(D)}}));
