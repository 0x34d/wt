WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"StdLayout2",function(F,y,I,N,O,v,G,C,z,w,B){function u(a,b){var c=s[b],g=b?a.scrollHeight:a.scrollWidth,i=b?a.clientHeight:a.clientWidth;b=b?a.offsetHeight:a.offsetWidth;if(i>=1E6)i-=1E6;if(g>=1E6)g-=1E6;if(b>=1E6)b-=1E6;if(g===0)g=e.pxself(a,c.size);if(e.isIE&&(e.hasTag(a,"BUTTON")||e.hasTag(a,"TEXTAREA")||e.hasTag(a,"INPUT")||e.hasTag(a,"SELECT")))g=i;if(g>b)if(e.pxself(a,c.size)==0)g=0;else{var j=false;$(a).find(".Wt-popup").each(function(){if(this.style.display!=
"none")j=true});if(j)g=0}if(!e.isOpera&&!e.isGecko)g+=e.px(a,"border"+c.Left+"Width")+e.px(a,"border"+c.Right+"Width");g+=e.px(a,"margin"+c.Left)+e.px(a,"margin"+c.Right);if(!e.boxSizing(a)&&!e.isIE)g+=e.px(a,"padding"+c.Left)+e.px(a,"padding"+c.Right);if(g<b)g=b;return Math.round(g)}function H(a,b){b=s[b];if(a.style.display=="none")return 0;else if(a["layoutMin"+b.Size])return a["layoutMin"+b.Size];else{var c=e.px(a,"min"+b.Size);e.boxSizing(a)||(c+=e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right));
return c}}function E(a,b){b=s[b];var c=e.px(a,"margin"+b.Left)+e.px(a,"margin"+b.Right);if(!e.boxSizing(a)&&!(e.isIE&&!e.isIElt9&&e.hasTag(a,"BUTTON")))c+=e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right);return c}function X(a,b){b=s[b];return e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right)}function T(a,b){if(e.boxSizing(a)){b=s[b];return e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"padding"+b.Left)+e.px(a,
"padding"+b.Right)}else return 0}function P(a,b){b=s[b];return Math.round(e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"margin"+b.Left)+e.px(a,"margin"+b.Right)+e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right))}function J(a,b){Q=a.dirty=true;b&&F.layouts2.scheduleAdjust()}function A(a,b,c){if(a.style[b]!==c){a.style[b]=c;return true}else return false}function aa(a,b,c){b=s[a];var g=s[a^1],i=b.measures,j=b.config.length,p=g.config.length;if(Q||K){if(c&&typeof b.minSize==
"undefined"){b.minSize=e.px(c,"min"+b.Size);if(b.minSize>0)b.minSize-=T(c,a)}i=i.slice();if(i.length==5){i[0]=i[0].slice();i[1]=i[1].slice()}var x=[],h=[],n=0,k=0,d,r;for(d=0;d<j;++d){var l=0,q=b.config[d][2],o=true;for(r=0;r<p;++r){var f=b.getItem(d,r);if(f){if(!f.w||a==0&&f.dirty){var m=$("#"+f.id),t=m.get(0);if(t!=f.w){f.w=t;m.find("img").add(m.filter("img")).bind("load",{item:f},function(ba){J(ba.data.item,true)});f.w.style[b.left]=f.w.style[g.left]="-1000000px"}}if(!v&&f.w.style.position!="absolute"){f.w.style.position=
"absolute";f.w.style.visibility="hidden";if(!f.w.wtResize&&!e.isIElt9){f.w.style.boxSizing="border-box";if(m=e.cssPrefix("BoxSizing"))f.w.style[m+"BoxSizing"]="border-box"}}if(!f.ps)f.ps=[];if(!f.ms)f.ms=[];if(!f.size)f.size=[];if(!f.psize)f.psize=[];if(!f.fs)f.fs=[];m=!f.set;if(!f.set)f.set=[false,false];if(f.w){if(e.isIE)f.w.style.visibility="";console.log("measure "+a+" "+f.id+": "+f.ps[0]+","+f.ps[1]);if(f.dirty||K){t=H(f.w,a);if(t>q)q=t;f.ms[a]=t;if(!f.set[a])if(a==0||!m){m=e.pxself(f.w,b.size);
f.fs[a]=m?m+E(f.w,a):0}else{m=Math.round(e.px(f.w,b.size));f.fs[a]=m>Math.max(T(f.w,a),t)?m+E(f.w,a):0}m=f.fs[a];if(f.layout){if(m==0)m=f.ps[a]}else{t=u(f.w,a);var V=typeof f.ps[a]!=="undefined"&&b.config[d][0]>0&&f.set[a];m=f.set[a]&&t===f.psize[a]||V?Math.max(m,f.ps[a]):Math.max(m,t)}f.ps[a]=m;if(!f.span||f.span[a]==1)if(m>l)l=m}else if(!f.span||f.span[a]==1){if(f.ps[a]>l)l=f.ps[a];if(f.ms[a]>q)q=f.ms[a]}console.log(" ->"+f.id+": "+f.ps[0]+","+f.ps[1]);if(f.w.style.display!=="none"||e.hasTag(f.w,
"TEXTAREA")&&f.w.wtResize)o=false}}}if(o)q=l=-1;else if(q>l)l=q;x[d]=l;h[d]=q;if(q>-1){n+=l;k+=q}}g=0;m=true;p=false;for(d=0;d<j;++d)if(h[d]>-1){if(m){g+=b.margins[1];m=false}else{g+=b.margins[0];if(p)g+=4}p=b.config[d][1]!==0}m||(g+=b.margins[2]);n+=g;k+=g;console.log("measured "+y+": "+a+" ps "+x);b.measures=[x,h,n,k,g];i[2]!=b.measures[2]&&R.updateSizeInParent(a);c&&b.minSize==0&&i[3]!=b.measures[3]&&c.parentNode.className!="Wt-domRoot"&&A(c,"min"+b.Size,b.measures[3]+"px")&&R.ancestor&&R.ancestor.setContentsDirty(c);
c&&a==0&&c&&e.hasTag(c,"TD")&&A(c,b.size,b.measures[2]+"px")}}function ca(a,b,c){a=s[a];if(S)c=-c;if(a.config[b][0]>0&&a.config[b+1][0]==0){++b;c=-c}a.fixedSize[b]=a.sizes[b]+c;F.layouts2.scheduleAdjust()}function da(a,b,c){var g=b.di,i=s[a],j=s[a^1],p,x=e.getElement(y),h;for(h=g-1;h>=0;--h)if(i.sizes[h]>=0){p=-(i.sizes[h]-i.measures[1][h]);break}g=i.sizes[g]-i.measures[1][g];if(S){var n=p;p=-g;g=-n}new e.SizeHandle(e,i.resizeDir,e.pxself(b,i.size),e.pxself(b,j.size),p,g,i.resizerClass,function(k){ca(a,
h,k)},b,x,c,0,0)}function ea(a,b){var c=s[a],g=s[a^1],i=c.measures,j=0,p=false,x=false,h=false,n=W?b.parentNode:null;if(c.maxSize===0)if(n){var k=e.css(n,"position");if(k==="absolute")j=e.pxself(n,c.size);if(j===0){if(!c.initialized)if(k!=="absolute"){j=a?n.clientHeight:n.clientWidth;p=true;if(a==0&&j==0&&e.isIElt9){j=n.offsetWidth;p=false}var d;if((e.hasTag(n,"TD")||e.hasTag(n,"TH"))&&!(e.isIE&&!e.isIElt9)){d=0;h=1}else{d=c.minSize?c.minSize:i[3];h=0}if(e.isIElt9&&j==h||j==d+X(n,a)){console.log("switching to managed container size "+
a+" "+y);c.maxSize=999999}}if(j===0&&c.maxSize===0){j=a?n.clientHeight:n.clientWidth;p=true}}}else{j=e.pxself(b,c.size);x=true}d=0;if(n&&n.wtGetPS&&a==1)d=n.wtGetPS(n,b,a,0);h=i[2];if(h<c.minSize)h=c.minSize;if(c.maxSize)if(h+d<c.maxSize){A(n,c.size,h+d+T(n,a)+"px");j=h+d;h=x=true}else{j=c.maxSize;p=false}c.cSize=j;if(a==1&&n&&n.wtResize){h=g.cSize;var r=c.cSize;n.wtResize(n,Math.round(h),Math.round(r))}j-=d;if(!x){x=0;if(typeof c.cPadding==="undefined"){x=p?X(n,a):T(n,a);c.cPadding=x}else x=c.cPadding;
j-=x}c.initialized=true;console.log("apply "+y+": "+a+" ps "+i[0]+" cSize "+j);if(!(n&&j<=0)){if(j<i[3]-d)j=i[3]-d;$(b).children("."+g.handleClass).css(c.size,j-c.margins[2]-c.margins[1]+"px");p=[];n=c.config.length;x=g.config.length;if(j>=i[3]-d){r=j-i[4];h=[];var l=[0,0],q=[0,0],o=0;for(d=0;d<n;++d)if(i[1][d]>-1){k=-1;if(typeof c.fixedSize[d]!=="undefined")k=c.fixedSize[d];else if(c.config[d][1]!==0&&c.config[d][1][0]>=0){k=c.config[d][1][0];if(c.config[d][1][1])k=(j-i[4])*k/100}if(k>=0){h[d]=-1;
p[d]=k;r-=p[d]}else{if(c.config[d][0]>0){k=1;h[d]=c.config[d][0];o+=h[d]}else{k=0;h[d]=0}l[k]+=i[1][d];q[k]+=i[0][d];p[d]=i[0][d]}}else h[d]=-2;if(o==0){for(d=0;d<n;++d)if(h[d]==0){h[d]=1;++o}q[1]=q[0];l[1]=l[0];q[0]=0;l[0]=0}if(r>q[0]+l[1]){r-=q[0];if(r>q[1]){if(c.fitSize){r-=q[1];j=r/o;for(d=0;d<n;++d)if(h[d]>0)p[d]+=Math.round(h[d]*j)}}else{k=1;if(r<l[k])r=l[k];j=q[k]-l[k]>0?(r-l[k])/(q[k]-l[k]):0;for(d=0;d<n;++d)if(h[d]>0){r=i[0][d]-i[1][d];p[d]=i[1][d]+Math.round(r*j)}}}else{for(d=0;d<n;++d)if(h[d]>
0)p[d]=i[1][d];r-=l[1];k=0;if(r<l[k])r=l[k];j=q[k]-l[k]>0?(r-l[k])/(q[k]-l[k]):0;for(d=0;d<n;++d)if(h[d]==0){r=i[0][d]-i[1][d];p[d]=i[1][d]+Math.round(r*j)}}}else p=i[1];c.sizes=p;console.log(" -> targetSize: "+p);i=0;j=true;l=false;for(d=0;d<n;++d)if(p[d]>-1){if(r=l){h=y+"-rs"+a+"-"+d;l=e.getElement(h);if(!l){l=document.createElement("div");l.setAttribute("id",h);l.di=d;l.style.position="absolute";l.style[g.left]=g.margins[1]+"px";l.style[c.size]=c.margins[0]+"px";l.className=c.handleClass;b.insertBefore(l,
b.firstChild);l.onmousedown=l.ontouchstart=function(V){da(a,this,V||window.event)}}i+=2;A(l,c.left,i+"px");i+=2}l=c.config[d][1]!==0;if(j){i+=c.margins[1];j=false}else i+=c.margins[0];for(q=0;q<x;++q)if((o=c.getItem(d,q))&&o.w){h=o.w;k=p[d];if(o.span){var f,m=l;for(f=1;f<o.span[a];++f){if(m)k+=4;m=c.config[d+m][1]!==0;k+=c.margins[0];k+=p[d+f]}}var t;h.style.visibility="";m=o.align>>c.alignBits&15;f=o.ps[a];if(k<f)m=0;if(m){switch(m){case 1:t=i;break;case 4:t=i+(k-f)/2;break;case 2:t=i+(k-f);break}if(o.layout){A(h,
c.size,f+"px")&&J(o);o.set[a]=true}else if(k>=f&&o.set[a]){A(h,c.size,f+"px")&&J(o);o.set[a]=false}o.size[a]=f;o.psize[a]=f}else{t=E(o.w,a);m=k;if(e.isIElt9||!e.hasTag(h,"BUTTON")&&!e.hasTag(h,"INPUT")&&!e.hasTag(h,"SELECT")&&!e.hasTag(h,"TEXTAREA"))m=Math.max(0,m-t);t=false;if(e.isIE&&e.hasTag(h,"BUTTON"))t=true;if(t||k!=f||o.layout){A(h,c.size,m+"px")&&J(o);o.set[a]=true}else if(o.fs[a])a==0&&A(h,c.size,o.fs[a]+"px");else{A(h,c.size,"")&&J(o);o.set[a]=false}t=i;o.size[a]=m;o.psize[a]=k}if(v)if(r){A(h,
c.left,"4px");k=e.css(h,"position");if(k!=="absolute")h.style.position="relative"}else A(h,c.left,"0px");else A(h,c.left,t+"px");if(a==1){h.wtResize&&h.wtResize(h,Math.round(o.size[0]),Math.round(o.size[1]),o);o.dirty=false}}i+=p[d]}}}var e=F.WT;this.ancestor=null;this.descendants=[];var R=this,D=B,Q=false,K=true,W=false,U=null,L=null,Y=false,M=[],Z=false,S=$(document.body).hasClass("Wt-rtl"),s=[{initialized:false,config:D.cols,margins:z,maxSize:G,measures:[],sizes:[],fixedSize:[],Left:S?"Right":
"Left",left:S?"right":"left",Right:S?"Left":"Right",Size:"Width",size:"width",alignBits:0,getItem:function(a,b){return D.items[b*s[0].config.length+a]},handleClass:"Wt-vrh2",resizeDir:"h",resizerClass:"Wt-hsh2",fitSize:N},{initialized:false,config:D.rows,margins:w,maxSize:C,measures:[],sizes:[],fixedSize:[],Left:"Top",left:"top",Right:"Bottom",Size:"Height",size:"height",alignBits:4,getItem:function(a,b){return D.items[a*s[0].config.length+b]},handleClass:"Wt-hrh2",resizeDir:"v",resizerClass:"Wt-vsh2",
fitSize:O}];jQuery.data(document.getElementById(y),"layout",this);this.updateSizeInParent=function(a){if(U){var b=s[a].measures[2];if(Z){var c=e.getElement(y);if(!c)return;c=c;for(var g=c.parentNode;;){if(g.wtGetPS)b=g.wtGetPS(g,c,a,b);b+=P(g,a);if(g==L)break;c=g;g=c.parentNode}}else b+=M[a];U.setChildSize(L,a,b)}};this.setConfig=function(a){var b=D;D=a;s[0].config=D.cols;s[1].config=D.rows;var c;a=0;for(c=b.items.length;a<c;++a){var g=b.items[a];if(g){g.set[0]&&A(g.w,s[0].size,"");g.set[1]&&A(g.w,
s[1].size,"");if(g.layout){R.setChildSize(g.w,0,g.ps[0]);R.setChildSize(g.w,1,g.ps[1])}}}K=true};this.getId=function(){return y};this.setItemsDirty=function(a){var b,c,g=s[0].config.length;b=0;for(c=a.length;b<c;++b)D.items[a[b][0]*g+a[b][1]].dirty=true;Q=true};this.setDirty=function(){K=true};this.setChildSize=function(a,b,c){console.log("setChildSize: "+b+" "+c);var g,i;g=0;for(i=D.items.length;g<i;++g){var j=D.items[g];if(j&&j.id==a.id){if(!j.ps)j.ps=[];j.ps[b]=c;j.layout=true;J(j);break}}};this.measure=
function(a){var b=e.getElement(y);if(b)if(!e.isHidden(b)){if(!Y){Y=true;if(W=I==null){var c=b;c=c.parentNode;for(M=[0,0];;){M[0]+=P(c,0);M[1]+=P(c,1);if(c.wtGetPS)Z=true;var g=jQuery.data(c.parentNode,"layout");if(g){U=g;L=c;break}c=c;c=c.parentNode;if(c.childNodes.length!=1&&!c.wtGetPS)break}}else{U=jQuery.data(document.getElementById(I),"layout");L=b;M[0]=P(L,0);M[1]=P(L,1)}}if(Q||K)aa(a,b,W?b.parentNode:null);if(a==1)Q=K=false}};this.apply=function(a){var b=e.getElement(y);if(!b)return false;if(e.isHidden(b))return true;
ea(a,b);return true};this.contains=function(a){var b=e.getElement(y);a=e.getElement(a.getId());return b&&a?e.contains(b,a):false}});WT_DECLARE_WT_MEMBER(2,JavaScriptPrototype,"StdLayout2.prototype.initResize",function(){this.resizeInitialized=true});
WT_DECLARE_APP_MEMBER(1,JavaScriptObject,"layouts2",new (function(){var F=[],y=false,I=this,N=false;this.find=function(v){return jQuery.data(document.getElementById(v),"layout")};this.setDirty=function(v){(v=jQuery.data(v,"layout"))&&v.setDirty()};this.add=function(v){function G(C,z){var w,B;w=0;for(B=C.length;w<B;++w){var u=C[w];if(u.getId()==z.getId()){C[w]=z;z.descendants=u.descendants;return}else if(u.contains(z)){G(u.descendants,z);return}else if(z.contains(u)){z.descendants.push(u);C.splice(w,
1);--w;--B}}C.push(z)}G(F,v);I.scheduleAdjust()};var O=false;this.scheduleAdjust=function(){if(!O){O=true;setTimeout(function(){I.adjust()},0)}};this.adjust=function(v,G){function C(w,B){var u,H;u=0;for(H=w.length;u<H;++u){var E=w[u];C(E.descendants,B);B==1&&N&&E.setDirty();E.measure(B)}}function z(w,B){var u,H;u=0;for(H=w.length;u<H;++u){var E=w[u];if(E.apply(B))z(E.descendants,B);else{w.splice(u,1);--u;--H}}}if(v){(v=this.find(v))&&v.setItemsDirty(G);I.scheduleAdjust()}else{O=false;if(!y){y=true;
C(F,0);z(F,0);C(F,1);z(F,1);N=y=false}}};this.updateConfig=function(v,G){(v=this.find(v))&&v.setConfig(G)};window.onresize=function(){N=true;I.scheduleAdjust()}}));
