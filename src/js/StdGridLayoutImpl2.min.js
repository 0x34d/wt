WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"StdLayout2",function(z,C,J,M,R,K,r,E,x,v,w){function A(a,b){var c=q[b],h=b?a.scrollHeight:a.scrollWidth,g=b?a.clientHeight:a.clientWidth;b=b?a.offsetHeight:a.offsetWidth;if(g>=1E6)g-=1E6;if(h>=1E6)h-=1E6;if(b>=1E6)b-=1E6;if(h===0)h=f.pxself(a,c.size);if(f.isIE&&(f.hasTag(a,"BUTTON")||f.hasTag(a,"TEXTAREA")||f.hasTag(a,"INPUT")||f.hasTag(a,"SELECT")))h=g;if(h>b)if(f.pxself(a,c.size)==0)h=0;else{var o=false;$(a).find(".Wt-popup").each(function(){if(this.style.display!=
"none")o=true});if(o)h=0}if(!f.isOpera&&!f.isGecko)h+=f.px(a,"border"+c.Left+"Width")+f.px(a,"border"+c.Right+"Width");h+=f.px(a,"margin"+c.Left)+f.px(a,"margin"+c.Right);if(!f.boxSizing(a)&&!f.isIE)h+=f.px(a,"padding"+c.Left)+f.px(a,"padding"+c.Right);if(h<b)h=b;a=f.px(a,"max"+c.Size);if(a>0)h=Math.min(a,h);return Math.round(h)}function u(a,b){b=q[b];if(a.style.display=="none")return 0;else if(a["layoutMin"+b.Size])return a["layoutMin"+b.Size];else{var c=f.px(a,"min"+b.Size);f.boxSizing(a)||(c+=
f.px(a,"padding"+b.Left)+f.px(a,"padding"+b.Right));return c}}function H(a,b){b=q[b];var c=f.px(a,"margin"+b.Left)+f.px(a,"margin"+b.Right);if(!f.boxSizing(a)&&!(f.isIE&&!f.isIElt9&&f.hasTag(a,"BUTTON")))c+=f.px(a,"border"+b.Left+"Width")+f.px(a,"border"+b.Right+"Width")+f.px(a,"padding"+b.Left)+f.px(a,"padding"+b.Right);return c}function I(a,b){b=q[b];return f.px(a,"padding"+b.Left)+f.px(a,"padding"+b.Right)}function V(a,b){if(f.boxSizing(a)){b=q[b];return f.px(a,"border"+b.Left+"Width")+f.px(a,
"border"+b.Right+"Width")+f.px(a,"padding"+b.Left)+f.px(a,"padding"+b.Right)}else return 0}function S(a,b){b=q[b];return Math.round(f.px(a,"border"+b.Left+"Width")+f.px(a,"border"+b.Right+"Width")+f.px(a,"margin"+b.Left)+f.px(a,"margin"+b.Right)+f.px(a,"padding"+b.Left)+f.px(a,"padding"+b.Right))}function N(a,b){T=a.dirty=true;b&&z.layouts2.scheduleAdjust()}function y(a,b,c){if(a.style[b]!==c){a.style[b]=c;return true}else return false}function ba(a,b,c){b=q[a];var h=q[a^1],g=b.measures,o=b.config.length,
m=h.config.length;if(T||L){if(c&&typeof b.minSize=="undefined"){b.minSize=f.px(c,"min"+b.Size);if(b.minSize>0)b.minSize-=V(c,a)}g=g.slice();if(g.length==5){g[0]=g[0].slice();g[1]=g[1].slice()}var B=[],e=[],k=0,t=0,i,n;for(i=0;i<o;++i){var p=0,l=b.config[i][2],F=true;for(n=0;n<m;++n){var d=b.getItem(i,n);if(d){if(!d.w||a==0&&d.dirty){var j=$("#"+d.id),s=j.get(0);if(s!=d.w){d.w=s;j.find("img").add(j.filter("img")).bind("load",{item:d},function(X){N(X.data.item,true)});d.w.style[b.left]=d.w.style[h.left]=
"-1000000px"}}if(!K&&d.w.style.position!="absolute"){d.w.style.position="absolute";d.w.style.visibility="hidden";if(!d.w.wtResize&&!f.isIElt9){d.w.style.boxSizing="border-box";if(j=f.cssPrefix("BoxSizing"))d.w.style[j+"BoxSizing"]="border-box"}}if(!d.ps)d.ps=[];if(!d.ms)d.ms=[];if(!d.size)d.size=[];if(!d.psize)d.psize=[];if(!d.fs)d.fs=[];if($(d.w).hasClass("Wt-hidden"))d.ps[a]=d.ms[a]=0;else{j=!d.set;if(!d.set)d.set=[false,false];if(d.w){if(f.isIE)d.w.style.visibility="";if(d.dirty||L){s=u(d.w,a);
if(s>l)l=s;d.ms[a]=s;if(!d.set[a])if(a==0||!j){j=f.pxself(d.w,b.size);d.fs[a]=j?j+H(d.w,a):0}else{j=Math.round(f.px(d.w,b.size));d.fs[a]=j>Math.max(V(d.w,a),s)?j+H(d.w,a):0}j=d.fs[a];if(d.layout){if(j==0)j=d.ps[a]}else{if(d.wasLayout){d.wasLayout=false;d.set=[false,false];y(d.w,q[0].size,"");y(d.w,q[1].size,"")}s=A(d.w,a);var D=typeof d.ps[a]!=="undefined"&&b.config[i][0]>0&&d.set[a];j=d.set[a]&&s>=d.psize[a]-4&&s<=d.psize[a]+4||D?Math.max(j,d.ps[a]):Math.max(j,s)}d.ps[a]=j;if(!d.span||d.span[a]==
1)if(j>p)p=j}else if(!d.span||d.span[a]==1){if(d.ps[a]>p)p=d.ps[a];if(d.ms[a]>l)l=d.ms[a]}if(d.w.style.display!=="none"||f.hasTag(d.w,"TEXTAREA")&&d.w.wtResize)F=false}}}}if(F)l=p=-1;else if(l>p)p=l;B[i]=p;e[i]=l;if(l>-1){k+=p;t+=l}}h=0;j=true;m=false;for(i=0;i<o;++i)if(e[i]>-1){if(j){h+=b.margins[1];j=false}else{h+=b.margins[0];if(m)h+=4}m=b.config[i][1]!==0}j||(h+=b.margins[2]);k+=h;t+=h;b.measures=[B,e,k,t,h];if(L||g[2]!=b.measures[2])O.updateSizeInParent(a);c&&b.minSize==0&&g[3]!=b.measures[3]&&
c.parentNode.className!="Wt-domRoot"&&y(c,"min"+b.Size,b.measures[3]+"px")&&O.ancestor&&O.ancestor.setContentsDirty(c);c&&a==0&&c&&f.hasTag(c,"TD")&&y(c,b.size,b.measures[2]+"px")}}function ca(a,b,c){a=q[a];if(U)c=-c;if(a.config[b][0]>0&&a.config[b+1][0]==0){++b;c=-c}a.fixedSize[b]=a.sizes[b]+c;z.layouts2.scheduleAdjust()}function da(a,b,c){var h=b.di,g=q[a],o=q[a^1],m,B=f.getElement(C),e;for(e=h-1;e>=0;--e)if(g.sizes[e]>=0){m=-(g.sizes[e]-g.measures[1][e]);break}h=g.sizes[h]-g.measures[1][h];if(U){var k=
m;m=-h;h=-k}new f.SizeHandle(f,g.resizeDir,f.pxself(b,g.size),f.pxself(b,o.size),m,h,g.resizerClass,function(t){ca(a,e,t)},b,B,c,0,0)}function ea(a,b){var c=q[a],h=q[a^1],g=c.measures,o=0,m=false,B=false,e=false,k=Y?b.parentNode:null;if(c.maxSize===0)if(k){var t=f.css(k,"position");if(t==="absolute")o=f.pxself(k,c.size);if(o===0){if(!c.initialized){if(a===0&&(t==="absolute"||t==="fixed")){k.style.display="none";o=k.clientWidth;k.style.display=""}o=a?k.clientHeight:k.clientWidth;m=true;if(a==0&&o==
0&&f.isIElt9){o=k.offsetWidth;m=false}var i;if((f.hasTag(k,"TD")||f.hasTag(k,"TH"))&&!(f.isIE&&!f.isIElt9)){e=0;i=1}else{e=c.minSize?c.minSize:g[3];i=0}if(f.isIElt9&&o==i||o==e+I(k,a))c.maxSize=999999}if(o===0&&c.maxSize===0){o=a?k.clientHeight:k.clientWidth;m=true}}}else{o=f.pxself(b,c.size);B=true}var n=0;if(k&&k.wtGetPS&&a==1)n=k.wtGetPS(k,b,a,0);e=g[2];if(e<c.minSize)e=c.minSize;if(c.maxSize)if(e+n<c.maxSize){y(k,c.size,e+n+V(k,a)+"px")&&z.layouts2.remeasure();o=e+n;e=B=true}else{o=c.maxSize;
m=false}c.cSize=o;if(a==1&&k&&k.wtResize){i=h.cSize;e=c.cSize;k.wtResize(k,Math.round(i),Math.round(e))}o-=n;if(!B){B=0;if(typeof c.cPadding==="undefined"){B=m?I(k,a):V(k,a);c.cPadding=B}else B=c.cPadding;o-=B}c.initialized=true;if(!(k&&o<=0)){if(o<g[3]-n)o=g[3]-n;m=[];k=c.config.length;B=h.config.length;for(e=0;e<k;++e)c.stretched[e]=false;if(o>=g[3]-n){n=o-g[4];i=[];var p=[0,0],l=[0,0],F=0;for(e=0;e<k;++e)if(g[1][e]>-1){var d=-1;if(typeof c.fixedSize[e]!=="undefined")d=c.fixedSize[e];else if(c.config[e][1]!==
0&&c.config[e][1][0]>=0){d=c.config[e][1][0];if(c.config[e][1][1])d=(o-g[4])*d/100}if(d>=0){i[e]=-1;m[e]=d;n-=m[e]}else{if(c.config[e][0]>0){d=1;i[e]=c.config[e][0];F+=i[e]}else{d=0;i[e]=0}p[d]+=g[1][e];l[d]+=g[0][e];m[e]=g[0][e]}}else i[e]=-2;if(F==0){for(e=0;e<k;++e)if(i[e]==0){i[e]=1;++F}l[1]=l[0];p[1]=p[0];l[0]=0;p[0]=0}if(n>l[0]+p[1]){n-=l[0];if(n>l[1]){if(c.fitSize){n-=l[1];n=n/F;for(e=0;e<k;++e)if(i[e]>0){m[e]+=Math.round(i[e]*n);c.stretched[e]=true}}}else{d=1;if(n<p[d])n=p[d];n=l[d]-p[d]>
0?(n-p[d])/(l[d]-p[d]):0;for(e=0;e<k;++e)if(i[e]>0){p=g[0][e]-g[1][e];m[e]=g[1][e]+Math.round(p*n)}}}else{for(e=0;e<k;++e)if(i[e]>0)m[e]=g[1][e];n-=p[1];d=0;if(n<p[d])n=p[d];n=l[d]-p[d]>0?(n-p[d])/(l[d]-p[d]):0;for(e=0;e<k;++e)if(i[e]==0){p=g[0][e]-g[1][e];m[e]=g[1][e]+Math.round(p*n)}}}else m=g[1];c.sizes=m;g=0;n=true;l=false;for(e=0;e<k;++e)if(m[e]>-1){if(p=l){i=C+"-rs"+a+"-"+e;l=f.getElement(i);if(!l){l=document.createElement("div");l.setAttribute("id",i);l.di=e;l.style.position="absolute";l.style[h.left]=
h.margins[1]+"px";l.style[c.size]=c.margins[0]+"px";l.className=c.handleClass;b.insertBefore(l,b.firstChild);l.onmousedown=l.ontouchstart=function(X){da(a,this,X||window.event)}}g+=2;y(l,c.left,g+"px");g+=2}l=c.config[e][1]!==0;if(n){g+=c.margins[1];n=false}else g+=c.margins[0];for(F=0;F<B;++F)if((d=c.getItem(e,F))&&d.w){i=d.w;t=m[e];if(d.span){var j,s=l;for(j=1;j<d.span[a];++j){if(e+j>=m.length)break;if(s)t+=4;s=c.config[e+j][1]!==0;t+=c.margins[0];t+=m[e+j]}}var D;y(i,"visibility","");s=d.align>>
c.alignBits&15;j=d.ps[a];if(t<j)s=0;if(s){switch(s){case 1:D=g;break;case 4:D=g+(t-j)/2;break;case 2:D=g+(t-j);break}if(d.layout){y(i,c.size,j+"px")&&N(d);d.set[a]=true}else if(t>=j&&d.set[a]){y(i,c.size,j+"px")&&N(d);d.set[a]=false}d.size[a]=j;d.psize[a]=j}else{D=H(d.w,a);s=t;if(f.isIElt9||!f.hasTag(i,"BUTTON")&&!f.hasTag(i,"INPUT")&&!f.hasTag(i,"SELECT")&&!f.hasTag(i,"TEXTAREA"))s=Math.max(0,s-D);D=false;if(f.isIE&&f.hasTag(i,"BUTTON"))D=true;if(D||t!=j||d.layout){y(i,c.size,s+"px")&&N(d);d.set[a]=
true}else if(d.fs[a])a==0&&y(i,c.size,d.fs[a]+"px");else{y(i,c.size,"")&&N(d);d.set[a]=false}D=g;d.size[a]=s;d.psize[a]=t}if(K)if(p){y(i,c.left,"4px");t=f.css(i,"position");if(t!=="absolute")i.style.position="relative"}else y(i,c.left,"0px");else y(i,c.left,D+"px");if(a==1){i.wtResize&&i.wtResize(i,Math.round(d.size[0]),Math.round(d.size[1]),d);d.dirty=false}}g+=m[e]}$(b).children("."+h.handleClass).css(c.size,o-c.margins[2]-c.margins[1]+"px")}}var f=z.WT;this.ancestor=null;this.descendants=[];var O=
this,G=w,T=false,L=true,Y=false,W=null,P=null,Z=false,Q=[],aa=false,U=$(document.body).hasClass("Wt-rtl"),q=[{initialized:false,config:G.cols,margins:x,maxSize:r,measures:[],sizes:[],stretched:[],fixedSize:[],Left:U?"Right":"Left",left:U?"right":"left",Right:U?"Left":"Right",Size:"Width",size:"width",alignBits:0,getItem:function(a,b){return G.items[b*q[0].config.length+a]},handleClass:"Wt-vrh2",resizeDir:"h",resizerClass:"Wt-hsh2",fitSize:M},{initialized:false,config:G.rows,margins:v,maxSize:E,measures:[],
sizes:[],stretched:[],fixedSize:[],Left:"Top",left:"top",Right:"Bottom",Size:"Height",size:"height",alignBits:4,getItem:function(a,b){return G.items[a*q[0].config.length+b]},handleClass:"Wt-hrh2",resizeDir:"v",resizerClass:"Wt-vsh2",fitSize:R}];jQuery.data(document.getElementById(C),"layout",this);this.updateSizeInParent=function(a){if(W){var b=q[a],c=b.measures[2];if(b.maxSize>0)c=Math.min(b.maxSize,c);if(aa){b=f.getElement(C);if(!b)return;for(var h=b,g=h.parentNode;;){if(g.wtGetPS)c=g.wtGetPS(g,
h,a,c);c+=S(g,a);if(g==P)break;if(g==b.parentNode&&g.offsetHeight>c)c=g.offsetHeight;h=g;g=h.parentNode}}else c+=Q[a];W.setChildSize(P,a,c)}};this.setConfig=function(a){var b=G;G=a;q[0].config=G.cols;q[1].config=G.rows;q[0].stretched=[];q[1].stretched=[];var c;a=0;for(c=b.items.length;a<c;++a){var h=b.items[a];if(h){if(h.set){h.set[0]&&y(h.w,q[0].size,"");h.set[1]&&y(h.w,q[1].size,"")}if(h.layout){O.setChildSize(h.w,0,h.ps[0]);O.setChildSize(h.w,1,h.ps[1])}}}L=true;z.layouts2.scheduleAdjust()};this.getId=
function(){return C};this.setItemsDirty=function(a){var b,c,h=q[0].config.length;b=0;for(c=a.length;b<c;++b){var g=G.items[a[b][0]*h+a[b][1]];g.dirty=true;if(g.layout){g.layout=false;g.wasLayout=true;z.layouts2.setChildLayoutsDirty(O,g.w)}}T=true};this.setDirty=function(){L=true};this.setChildSize=function(a,b,c){var h,g,o=q[0].config.length;h=0;for(g=G.items.length;h<g;++h){var m=G.items[h];if(m&&m.id==a.id){if(!q[b].stretched[b===0?h%o:h/o]){if(!m.ps)m.ps=[];m.ps[b]=c}m.layout=true;N(m);break}}};
this.measure=function(a){var b=f.getElement(C);if(b)if(!f.isHidden(b)){if(!Z){Z=true;if(Y=J==null){var c=b;c=c.parentNode;for(Q=[0,0];;){Q[0]+=S(c,0);Q[1]+=S(c,1);if(c.wtGetPS)aa=true;var h=jQuery.data(c.parentNode,"layout");if(h){W=h;P=c;break}c=c;c=c.parentNode;if(c.childNodes.length!=1&&!c.wtGetPS)break}}else{W=jQuery.data(document.getElementById(J),"layout");P=b;Q[0]=S(P,0);Q[1]=S(P,1)}}if(T||L)ba(a,b,Y?b.parentNode:null);if(a==1)T=L=false}};this.setMaxSize=function(a,b){q[0].maxSize=a;q[1].maxSize=
b};this.apply=function(a){var b=f.getElement(C);if(!b)return false;if(f.isHidden(b))return true;ea(a,b);return true};this.contains=function(a){var b=f.getElement(C);a=f.getElement(a.getId());return b&&a?f.contains(b,a):false};this.WT=f});WT_DECLARE_WT_MEMBER(2,JavaScriptPrototype,"StdLayout2.prototype.initResize",function(){this.resizeInitialized=true});
WT_DECLARE_APP_MEMBER(1,JavaScriptObject,"layouts2",new (function(){var z=[],C=false,J=this,M=false;this.find=function(r){return jQuery.data(document.getElementById(r),"layout")};this.setDirty=function(r){(r=jQuery.data(r,"layout"))&&r.setDirty()};this.setChildLayoutsDirty=function(r,E){var x,v;x=0;for(v=r.descendants.length;x<v;++x){var w=r.descendants[x];if(E){var A=r.WT.getElement(w.getId());if(A&&!r.WT.contains(E,A))continue}w.setDirty()}};this.add=function(r){function E(x,v){var w,A;w=0;for(A=
x.length;w<A;++w){var u=x[w];if(u.getId()==v.getId()){x[w]=v;v.descendants=u.descendants;return}else if(u.contains(v)){E(u.descendants,v);return}else if(v.contains(u)){v.descendants.push(u);x.splice(w,1);--w;--A}}x.push(v)}E(z,r);J.scheduleAdjust()};var R=false,K=false;this.scheduleAdjust=function(){if(!R){R=true;setTimeout(function(){J.adjust()},0)}};this.adjust=function(r,E){function x(w,A){var u,H;u=0;for(H=w.length;u<H;++u){var I=w[u];x(I.descendants,A);A==1&&M&&I.setDirty();I.measure(A)}}function v(w,
A){var u,H;u=0;for(H=w.length;u<H;++u){var I=w[u];if(I.apply(A))v(I.descendants,A);else{w.splice(u,1);--u;--H}}}if(r){(r=this.find(r))&&r.setItemsDirty(E);J.scheduleAdjust()}else{R=false;if(!C){C=true;K=false;x(z,0);v(z,0);x(z,1);v(z,1);if(K){x(z,0);v(z,0);x(z,1);v(z,1)}M=K=C=false}}};this.updateConfig=function(r,E){(r=this.find(r))&&r.setConfig(E)};this.remeasure=function(){K=true};window.onresize=function(){M=true;J.scheduleAdjust()};window.onshow=function(){M=true;J.adjust()}}));
