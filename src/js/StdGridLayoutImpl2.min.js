WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"StdLayout2",function(F,z,L,M,N,v,G,D,A,w,y){function s(a,b){var e=q[b],i=b?a.scrollHeight:a.scrollWidth;b=b?a.clientHeight:a.clientWidth;if(b>1E6){b-=1E6;if(i>1E6)i-=1E6}if(f.isIE&&(f.hasTag(a,"BUTTON")||f.hasTag(a,"TEXTAREA")||f.hasTag(a,"INPUT")||f.hasTag(a,"SELECT")))i=b;if(!f.isOpera&&!f.isGecko)i+=f.px(a,"border"+e.Left+"Width")+f.px(a,"border"+e.Right+"Width");i+=f.px(a,"margin"+e.Left)+f.px(a,"margin"+e.Right);if(!f.boxSizing(a)&&!f.isIE)i+=f.px(a,
"padding"+e.Left)+f.px(a,"padding"+e.Right);return i}function H(a,b){b=q[b];if(a.style.display=="none"||a.style.visibility=="hidden")return 0;else if(a["layoutMin"+b.Size])return a["layoutMin"+b.Size];else{var e=f.px(a,"min"+b.Size);f.boxSizing(a)||(e+=f.px(a,"padding"+b.Left)+f.px(a,"padding"+b.Right));return e}}function E(a,b){b=q[b];var e=f.px(a,"margin"+b.Left)+f.px(a,"margin"+b.Right);if(!f.boxSizing(a)&&!(f.isIE&&!f.isIElt9&&f.hasTag(a,"BUTTON")))e+=f.px(a,"border"+b.Left+"Width")+f.px(a,"border"+
b.Right+"Width")+f.px(a,"padding"+b.Left)+f.px(a,"padding"+b.Right);return e}function U(a,b){b=q[b];return f.px(a,"padding"+b.Left)+f.px(a,"padding"+b.Right)}function S(a,b){if(f.boxSizing(a)){b=q[b];return f.px(a,"border"+b.Left+"Width")+f.px(a,"border"+b.Right+"Width")+f.px(a,"padding"+b.Left)+f.px(a,"padding"+b.Right)}else return 0}function P(a,b){b=q[b];return f.px(a,"border"+b.Left+"Width")+f.px(a,"border"+b.Right+"Width")+f.px(a,"margin"+b.Left)+f.px(a,"margin"+b.Right)+f.px(a,"padding"+b.Left)+
f.px(a,"padding"+b.Right)}function W(a){I=a.dirty=true;F.layouts2.scheduleAdjust()}function x(a,b,e){if(a.style[b]!==e){a.style[b]=e;return true}else return false}function X(a,b,e){b=q[a];var i=b.config.length,g=q[a^1].config.length;if(I||J){var d=b.measures.slice();if(d.length==5){d[0]=d[0].slice();d[1]=d[1].slice()}var p=[],t=[],h=0,o=0,m,l;for(m=0;m<i;++m){var k=0,j=b.config[m][2],B=true;for(l=0;l<g;++l){var c=b.getItem(m,l);if(c){if(!c.w){var u=$("#"+c.id);c.w=u.get(0);(function(){u.find("img").load(function(){W(c)})})();
c.w.style.left=c.w.style.top="-1000000px"}if(!v&&c.w.style.position!="absolute"){c.w.style.position="absolute";c.w.style.visibility="hidden";if(!c.w.wtResize){c.w.style.boxSizing="border-box";var n=f.cssPrefix("BoxSizing");if(n)c.w.style[n+"BoxSizing"]="border-box"}}if(!c.ps)c.ps=[];if(!c.ms)c.ms=[];if(!c.size)c.size=[];if(!c.psize)c.psize=[];if(!c.fs)c.fs=[];if(!c.set)c.set=[false,false];if(c.w){if(f.isIE)c.w.style.visibility="";if(c.dirty||J){n=H(c.w,a);if(n>j)j=n;c.ms[a]=n;if(!c.set[a])if(a==0){var r=
f.pxself(c.w,b.size);c.fs[a]=r?r+E(c.w,a):0}else{r=f.px(c.w,b.size);c.fs[a]=r>Math.max(S(c.w,a),n)?r+E(c.w,a):0}n=c.fs[a];if(c.layout)n=Math.max(n,c.ps[a]);else{r=s(c.w,a);n=(typeof c.ps[a]==="undefined"||b.config[m][0]<=0)&&(!c.set[a]||r!=c.psize[a])?Math.max(n,r):Math.max(n,c.ps[a])}c.ps[a]=n;if(!c.span||c.span[a]==1)if(n>k)k=n}else if(!c.span||c.span[a]==1){if(c.ps[a]>k)k=c.ps[a];if(c.ms[a]>j)j=c.ms[a]}if(c.w.style.display!=="none")B=false}}}if(B)j=k=-1;else if(j>k)k=j;p[m]=k;t[m]=j;if(j>-1){h+=
k;o+=j}}g=0;l=true;k=false;for(m=0;m<i;++m)if(t[m]>-1){if(l){g+=b.margins[1];l=false}else{g+=b.margins[0];if(k)g+=4}k=b.config[m][1]}l||(g+=b.margins[2]);h+=g;o+=g;b.measures=[p,t,h,o,g];Q&&d[2]!=b.measures[2]&&Q.setChildSize(O,a,b.measures[2]+K[a]);e&&d[3]!=b.measures[3]&&x(e,"min"+b.Size,b.measures[3]+"px")&&R.ancestor&&R.ancestor.setContentsDirty(e);e&&a==0&&e&&f.hasTag(e,"TD")&&x(e,b.size,b.measures[2]+"px")}}function Y(a,b,e){a=q[a];a.fixedSize[b]=a.sizes[b]+e;F.layouts2.scheduleAdjust()}function Z(a,
b,e){var i=b.di,g=q[a],d=q[a^1],p,t=f.getElement(z),h;for(h=i-1;h>=0;--h)if(g.sizes[h]>=0){p=-(g.sizes[h]-g.measures[1][h]);break}i=g.sizes[i]-g.measures[1][i];new f.SizeHandle(f,g.resizeDir,f.pxself(b,g.size),f.pxself(b,d.size),p,i,g.resizerClass,function(o){Y(a,h,o)},b,t,e,0,0)}function aa(a,b){var e=q[a],i=q[a^1],g=e.measures,d=0,p=false,t=false,h=false,o=T?b.parentNode:null;if(e.maxSize===0)if(o){var m=f.css(o,"position");if(m==="absolute")d=f.pxself(o,e.size);if(d===0){if(!e.initialized)if(m!==
"absolute"){d=a?o.clientHeight:o.clientWidth;p=true;if(a==0&&d==0&&f.isIE6){d=o.offsetWidth;p=false}if(f.isIE6&&d==0||d==g[3]+U(o,a))e.maxSize=999999}if(d===0&&e.maxSize===0){d=a?o.clientHeight:o.clientWidth;p=true}}}else{d=f.pxself(b,e.size);t=true}e.initialized=true;if(e.maxSize)if(g[2]<e.maxSize){x(o,e.size,g[2]+S(o,a)+"px");d=g[2];h=t=true}else{d=e.maxSize;p=false}e.cSize=d;if(a==1&&(e.maxSize||i.maxSize)){h=i.cSize;var l=e.cSize;o&&o.wtResize&&o.wtResize(o,h,l)}t||(d-=p?U(o,a):S(o,a));if(!(o&&
d<=0)){if(d<g[3])d=g[3];$(b).children("."+i.handleClass).css(e.size,d-e.margins[2]-e.margins[1]+"px");p=[];t=e.config.length;o=i.config.length;if(d>g[3]){l=d-g[4];h=[];var k=[0,0],j=[0,0],B=0;for(d=0;d<t;++d)if(g[1][d]>-1)if(typeof e.fixedSize[d]!=="undefined"){h[d]=-1;p[d]=e.fixedSize[d];l-=p[d]}else{var c;if(e.config[d][0]>0){c=1;h[d]=e.config[d][0];B+=h[d]}else{c=0;h[d]=0}k[c]+=g[1][d];j[c]+=g[0][d];p[d]=g[0][d]}else h[d]=-2;if(B==0){for(d=0;d<t;++d)if(h[d]==0){h[d]=1;++B}j[1]=j[0];k[1]=k[0];j[0]=
0;k[0]=0}if(l>j[0]+k[1]){l-=j[0];if(l>j[1]){if(e.fitSize){l-=j[1];l=l/B;for(d=0;d<t;++d)if(h[d]>0)p[d]+=Math.round(h[d]*l)}}else{c=1;if(l<k[c])l=k[c];l=j[c]-k[c]>0?(l-k[c])/(j[c]-k[c]):0;for(d=0;d<t;++d)if(h[d]>0){k=g[0][d]-g[1][d];p[d]=g[1][d]+Math.round(k*l)}}}else{for(d=0;d<t;++d)if(h[d]>0)p[d]=g[1][d];l-=k[1];c=0;if(l<k[c])l=k[c];l=j[c]-k[c]>0?(l-k[c])/(j[c]-k[c]):0;for(d=0;d<t;++d)if(h[d]==0){k=g[0][d]-g[1][d];p[d]=g[1][d]+Math.round(k*l)}}}else p=g[1];e.sizes=p;g=0;l=true;j=false;for(d=0;d<
t;++d)if(p[d]>-1){if(k=j){h=z+"-rs"+a+"-"+d;j=f.getElement(h);if(!j){j=document.createElement("div");j.setAttribute("id",h);j.di=d;j.style.position="absolute";j.style[i.left]=i.margins[1]+"px";j.style[e.size]=e.margins[0]+"px";j.className=e.handleClass;b.insertBefore(j,b.firstChild);j.onmousedown=j.ontouchstart=function(ba){Z(a,this,ba||window.event)}}g+=2;x(j,e.left,g+"px");g+=2}j=e.config[d][1];if(l){g+=e.margins[1];l=false}else g+=e.margins[0];for(B=0;B<o;++B)if((c=e.getItem(d,B))&&c.w){h=c.w;
m=p[d];if(c.span){var u,n=j;for(u=1;u<c.span[a];++u){if(n)m+=4;n=e.config[d+n][1];m+=e.margins[0];m+=p[d+u]}}var r;h.style.visibility="";n=c.align>>e.alignBits&15;u=c.ps[a];if(m<u)n=0;if(n){switch(n){case 1:r=g;break;case 4:r=g+(m-u)/2;break;case 2:r=g+(m-u);break}if(c.layout){if(x(h,e.size,u+"px"))c.dirty=true;c.set[a]=true}else if(m>=u&&c.set[a]){if(x(h,e.size,u+""))c.dirty=true;c.set[a]=false}c.size[a]=u;c.psize[a]=u}else{r=E(h,a);n=m;if(f.isIElt9||!f.hasTag(h,"BUTTON")&&!f.hasTag(h,"INPUT")&&
!f.hasTag(h,"SELECT"))n=Math.max(0,n-r);r=false;if(f.isIE&&f.hasTag(h,"BUTTON"))r=true;if(r||m!=u||c.layout){if(x(h,e.size,n+"px"))c.dirty=true;c.set[a]=true}else if(!c.fs[a]){if(x(h,e.size,""))c.dirty=true;c.set[a]=false}r=g;c.size[a]=n;c.psize[a]=m}if(v)if(k){x(h,e.left,"4px");m=f.css(h,"position");if(m!=="absolute")h.style.position="relative"}else x(h,e.left,"0px");else x(h,e.left,r+"px");if(a==1){h.wtResize&&h.wtResize(h,c.size[0],c.size[1]);c.dirty=false}}g+=p[d]}}}var f=F.WT;this.ancestor=null;
this.descendants=[];var R=this,C=y,I=false,J=true,T=false,Q=null,O=null,V=false,K=[],q=[{initialized:false,config:C.cols,margins:A,maxSize:G,measures:[],sizes:[],fixedSize:[],Left:"Left",left:"left",Right:"Right",Size:"Width",size:"width",alignBits:0,getItem:function(a,b){return C.items[b*q[0].config.length+a]},handleClass:"Wt-vrh2",resizeDir:"h",resizerClass:"Wt-hsh2",fitSize:M},{initialized:false,config:C.rows,margins:w,maxSize:D,measures:[],sizes:[],fixedSize:[],Left:"Top",left:"top",Right:"Bottom",
Size:"Height",size:"height",alignBits:4,getItem:function(a,b){return C.items[a*q[0].config.length+b]},handleClass:"Wt-hrh2",resizeDir:"v",resizerClass:"Wt-vsh2",fitSize:N}];jQuery.data(document.getElementById(z),"layout",this);this.setConfig=function(a){var b=C;C=a;q[0].config=C.cols;q[1].config=C.rows;var e;a=0;for(e=b.items.length;a<e;++a){var i=b.items[a];if(i){i.set[0]&&x(i.w,q[0].size,"");i.set[1]&&x(i.w,q[1].size,"");if(i.layout){R.setChildSize(i.w,0,i.ps[0]);R.setChildSize(i.w,1,i.ps[1])}}}J=
true};this.getId=function(){return z};this.setItemsDirty=function(a){var b,e,i=q[0].config.length;b=0;for(e=a.length;b<e;++b)C.items[a[b][0]*i+a[b][1]].dirty=true;I=true};this.setDirty=function(){J=true};this.setChildSize=function(a,b,e){var i,g;i=0;for(g=C.items.length;i<g;++i){var d=C.items[i];if(d&&d.id==a.id){if(!d.ps)d.ps=[];d.ps[b]=e;d.layout=true;break}}I=true};this.measure=function(a){var b=f.getElement(z);if(b){if(!V){V=true;if(T=L==null){var e=b.parentNode;for(K=[0,0];;){K[0]+=P(e,0);K[1]+=
P(e,1);var i=jQuery.data(e.parentNode,"layout");if(i){Q=i;O=e;break}e=e.parentNode;if(e.childNodes.length!=1)break}}else{Q=jQuery.data(document.getElementById(L),"layout");O=b;K[0]=P(O,0);K[1]=P(O,1)}}if(I||J)X(a,b,T?b.parentNode:null);if(a==1)I=J=false}};this.apply=function(a){var b=f.getElement(z);if(!b)return false;aa(a,b);return true};this.contains=function(a){var b=f.getElement(z);a=f.getElement(a.getId());return b&&a?f.contains(b,a):false}});
WT_DECLARE_WT_MEMBER(2,JavaScriptPrototype,"StdLayout2.prototype.initResize",function(){this.resizeInitialized=true});
WT_DECLARE_APP_MEMBER(1,JavaScriptObject,"layouts2",new (function(){var F=[],z=false,L=this,M=false;this.find=function(v){return jQuery.data(document.getElementById(v),"layout")};this.add=function(v){function G(D,A){var w,y;w=0;for(y=D.length;w<y;++w){var s=D[w];if(s.contains(A)){G(s.descendants,A);return}else if(A.contains(s)){A.descendants.push(s);D.splice(w,1);--w;--y}}D.push(A)}G(F,v)};var N=false;this.scheduleAdjust=function(){if(!N){N=true;setTimeout(function(){L.adjust()},0)}};this.adjust=
function(v,G){function D(w,y){var s,H;s=0;for(H=w.length;s<H;++s){var E=w[s];D(E.descendants,y);y==1&&M&&E.setDirty();E.measure(y)}}function A(w,y){var s,H;s=0;for(H=w.length;s<H;++s){var E=w[s];if(E.apply(y))A(E.descendants,y);else{w.splice(s,1);--s;--H}}}if(v)(v=this.find(v))&&v.setItemsDirty(G);else{N=false;if(!z){z=true;D(F,0);A(F,0);D(F,1);A(F,1);M=z=false}}};this.updateConfig=function(v,G){(v=this.find(v))&&v.setConfig(G)};window.onresize=function(){M=true;L.scheduleAdjust()}}));
