WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"StdLayout2",function(F,C,I,O,P,t,D,z,x,w,B){function v(a,b){var c=s[b],g=b?a.scrollHeight:a.scrollWidth,h=b?a.clientHeight:a.clientWidth;b=b?a.offsetHeight:a.offsetWidth;if(h>=1E6)h-=1E6;if(g>=1E6)g-=1E6;if(b>=1E6)b-=1E6;if(g===0)g=e.pxself(a,c.size);if(e.isIE&&(e.hasTag(a,"BUTTON")||e.hasTag(a,"TEXTAREA")||e.hasTag(a,"INPUT")||e.hasTag(a,"SELECT")))g=h;if(g>b)if(e.pxself(a,c.size)==0)g=0;else{var k=false;$(a).find(".Wt-popup").each(function(){if(this.style.display!=
"none")k=true});if(k)g=0}if(!e.isOpera&&!e.isGecko)g+=e.px(a,"border"+c.Left+"Width")+e.px(a,"border"+c.Right+"Width");g+=e.px(a,"margin"+c.Left)+e.px(a,"margin"+c.Right);if(!e.boxSizing(a)&&!e.isIE)g+=e.px(a,"padding"+c.Left)+e.px(a,"padding"+c.Right);if(g<b)g=b;return Math.round(g)}function H(a,b){b=s[b];if(a.style.display=="none")return 0;else if(a["layoutMin"+b.Size])return a["layoutMin"+b.Size];else{var c=e.px(a,"min"+b.Size);e.boxSizing(a)||(c+=e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right));
return c}}function G(a,b){b=s[b];var c=e.px(a,"margin"+b.Left)+e.px(a,"margin"+b.Right);if(!e.boxSizing(a)&&!(e.isIE&&!e.isIElt9&&e.hasTag(a,"BUTTON")))c+=e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right);return c}function X(a,b){b=s[b];return e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right)}function T(a,b){if(e.boxSizing(a)){b=s[b];return e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"padding"+b.Left)+e.px(a,
"padding"+b.Right)}else return 0}function Q(a,b){b=s[b];return Math.round(e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"margin"+b.Left)+e.px(a,"margin"+b.Right)+e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right))}function K(a,b){R=a.dirty=true;b&&F.layouts2.scheduleAdjust()}function y(a,b,c){if(a.style[b]!==c){a.style[b]=c;return true}else return false}function aa(a,b,c){b=s[a];var g=s[a^1],h=b.measures,k=b.config.length,p=g.config.length;if(R||J){if(c&&typeof b.minSize==
"undefined"){b.minSize=e.px(c,"min"+b.Size);if(b.minSize>0)b.minSize-=T(c,a)}h=h.slice();if(h.length==5){h[0]=h[0].slice();h[1]=h[1].slice()}var A=[],i=[],n=0,j=0,d,r;for(d=0;d<k;++d){var l=0,q=b.config[d][2],o=true;for(r=0;r<p;++r){var f=b.getItem(d,r);if(f){if(!f.w||a==0&&f.dirty){var m=$("#"+f.id),u=m.get(0);if(u!=f.w){f.w=u;m.find("img").add(m.filter("img")).bind("load",{item:f},function(ba){K(ba.data.item,true)});f.w.style[b.left]=f.w.style[g.left]="-1000000px"}}if(!t&&f.w.style.position!="absolute"){f.w.style.position=
"absolute";f.w.style.visibility="hidden";if(!f.w.wtResize&&!e.isIElt9){f.w.style.boxSizing="border-box";if(m=e.cssPrefix("BoxSizing"))f.w.style[m+"BoxSizing"]="border-box"}}if(!f.ps)f.ps=[];if(!f.ms)f.ms=[];if(!f.size)f.size=[];if(!f.psize)f.psize=[];if(!f.fs)f.fs=[];m=!f.set;if(!f.set)f.set=[false,false];if(f.w){if(e.isIE)f.w.style.visibility="";if(f.dirty||J){u=H(f.w,a);if(u>q)q=u;f.ms[a]=u;if(!f.set[a])if(a==0||!m){m=e.pxself(f.w,b.size);f.fs[a]=m?m+G(f.w,a):0}else{m=Math.round(e.px(f.w,b.size));
f.fs[a]=m>Math.max(T(f.w,a),u)?m+G(f.w,a):0}m=f.fs[a];if(f.layout){if(m==0)m=f.ps[a]}else{if(f.wasLayout){f.wasLayout=false;f.set=[false,false];y(f.w,s[0].size,"");y(f.w,s[1].size,"")}u=v(f.w,a);var V=typeof f.ps[a]!=="undefined"&&b.config[d][0]>0&&f.set[a];m=f.set[a]&&u>=f.psize[a]-2&&u<=f.psize[a]+2||V?Math.max(m,f.ps[a]):Math.max(m,u)}f.ps[a]=m;if(!f.span||f.span[a]==1)if(m>l)l=m}else if(!f.span||f.span[a]==1){if(f.ps[a]>l)l=f.ps[a];if(f.ms[a]>q)q=f.ms[a]}if(f.w.style.display!=="none"||e.hasTag(f.w,
"TEXTAREA")&&f.w.wtResize)o=false}}}if(o)q=l=-1;else if(q>l)l=q;A[d]=l;i[d]=q;if(q>-1){n+=l;j+=q}}g=0;m=true;p=false;for(d=0;d<k;++d)if(i[d]>-1){if(m){g+=b.margins[1];m=false}else{g+=b.margins[0];if(p)g+=4}p=b.config[d][1]!==0}m||(g+=b.margins[2]);n+=g;j+=g;b.measures=[A,i,n,j,g];if(J||h[2]!=b.measures[2])L.updateSizeInParent(a);c&&b.minSize==0&&h[3]!=b.measures[3]&&c.parentNode.className!="Wt-domRoot"&&y(c,"min"+b.Size,b.measures[3]+"px")&&L.ancestor&&L.ancestor.setContentsDirty(c);c&&a==0&&c&&e.hasTag(c,
"TD")&&y(c,b.size,b.measures[2]+"px")}}function ca(a,b,c){a=s[a];if(S)c=-c;if(a.config[b][0]>0&&a.config[b+1][0]==0){++b;c=-c}a.fixedSize[b]=a.sizes[b]+c;F.layouts2.scheduleAdjust()}function da(a,b,c){var g=b.di,h=s[a],k=s[a^1],p,A=e.getElement(C),i;for(i=g-1;i>=0;--i)if(h.sizes[i]>=0){p=-(h.sizes[i]-h.measures[1][i]);break}g=h.sizes[g]-h.measures[1][g];if(S){var n=p;p=-g;g=-n}new e.SizeHandle(e,h.resizeDir,e.pxself(b,h.size),e.pxself(b,k.size),p,g,h.resizerClass,function(j){ca(a,i,j)},b,A,c,0,0)}
function ea(a,b){var c=s[a],g=s[a^1],h=c.measures,k=0,p=false,A=false,i=false,n=W?b.parentNode:null;if(c.maxSize===0)if(n){var j=e.css(n,"position");if(j==="absolute")k=e.pxself(n,c.size);if(k===0){if(!c.initialized)if(j!=="absolute"){k=a?n.clientHeight:n.clientWidth;p=true;if(a==0&&k==0&&e.isIElt9){k=n.offsetWidth;p=false}var d;if((e.hasTag(n,"TD")||e.hasTag(n,"TH"))&&!(e.isIE&&!e.isIElt9)){d=0;i=1}else{d=c.minSize?c.minSize:h[3];i=0}if(e.isIElt9&&k==i||k==d+X(n,a))c.maxSize=999999}if(k===0&&c.maxSize===
0){k=a?n.clientHeight:n.clientWidth;p=true}}}else{k=e.pxself(b,c.size);A=true}d=0;if(n&&n.wtGetPS&&a==1)d=n.wtGetPS(n,b,a,0);i=h[2];if(i<c.minSize)i=c.minSize;if(c.maxSize)if(i+d<c.maxSize){y(n,c.size,i+d+T(n,a)+"px");k=i+d;i=A=true}else{k=c.maxSize;p=false}c.cSize=k;if(a==1&&n&&n.wtResize){i=g.cSize;var r=c.cSize;n.wtResize(n,Math.round(i),Math.round(r))}k-=d;if(!A){A=0;if(typeof c.cPadding==="undefined"){A=p?X(n,a):T(n,a);c.cPadding=A}else A=c.cPadding;k-=A}c.initialized=true;if(!(n&&k<=0)){if(k<
h[3]-d)k=h[3]-d;$(b).children("."+g.handleClass).css(c.size,k-c.margins[2]-c.margins[1]+"px");p=[];n=c.config.length;A=g.config.length;if(k>=h[3]-d){r=k-h[4];i=[];var l=[0,0],q=[0,0],o=0;for(d=0;d<n;++d)if(h[1][d]>-1){j=-1;if(typeof c.fixedSize[d]!=="undefined")j=c.fixedSize[d];else if(c.config[d][1]!==0&&c.config[d][1][0]>=0){j=c.config[d][1][0];if(c.config[d][1][1])j=(k-h[4])*j/100}if(j>=0){i[d]=-1;p[d]=j;r-=p[d]}else{if(c.config[d][0]>0){j=1;i[d]=c.config[d][0];o+=i[d]}else{j=0;i[d]=0}l[j]+=h[1][d];
q[j]+=h[0][d];p[d]=h[0][d]}}else i[d]=-2;if(o==0){for(d=0;d<n;++d)if(i[d]==0){i[d]=1;++o}q[1]=q[0];l[1]=l[0];q[0]=0;l[0]=0}if(r>q[0]+l[1]){r-=q[0];if(r>q[1]){if(c.fitSize){r-=q[1];k=r/o;for(d=0;d<n;++d)if(i[d]>0)p[d]+=Math.round(i[d]*k)}}else{j=1;if(r<l[j])r=l[j];k=q[j]-l[j]>0?(r-l[j])/(q[j]-l[j]):0;for(d=0;d<n;++d)if(i[d]>0){r=h[0][d]-h[1][d];p[d]=h[1][d]+Math.round(r*k)}}}else{for(d=0;d<n;++d)if(i[d]>0)p[d]=h[1][d];r-=l[1];j=0;if(r<l[j])r=l[j];k=q[j]-l[j]>0?(r-l[j])/(q[j]-l[j]):0;for(d=0;d<n;++d)if(i[d]==
0){r=h[0][d]-h[1][d];p[d]=h[1][d]+Math.round(r*k)}}}else p=h[1];c.sizes=p;h=0;k=true;l=false;for(d=0;d<n;++d)if(p[d]>-1){if(r=l){i=C+"-rs"+a+"-"+d;l=e.getElement(i);if(!l){l=document.createElement("div");l.setAttribute("id",i);l.di=d;l.style.position="absolute";l.style[g.left]=g.margins[1]+"px";l.style[c.size]=c.margins[0]+"px";l.className=c.handleClass;b.insertBefore(l,b.firstChild);l.onmousedown=l.ontouchstart=function(V){da(a,this,V||window.event)}}h+=2;y(l,c.left,h+"px");h+=2}l=c.config[d][1]!==
0;if(k){h+=c.margins[1];k=false}else h+=c.margins[0];for(q=0;q<A;++q)if((o=c.getItem(d,q))&&o.w){i=o.w;j=p[d];if(o.span){var f,m=l;for(f=1;f<o.span[a];++f){if(m)j+=4;m=c.config[d+m][1]!==0;j+=c.margins[0];j+=p[d+f]}}var u;y(i,"visibility","");m=o.align>>c.alignBits&15;f=o.ps[a];if(j<f)m=0;if(m){switch(m){case 1:u=h;break;case 4:u=h+(j-f)/2;break;case 2:u=h+(j-f);break}if(o.layout){y(i,c.size,f+"px")&&K(o);o.set[a]=true}else if(j>=f&&o.set[a]){y(i,c.size,f+"px")&&K(o);o.set[a]=false}o.size[a]=f;o.psize[a]=
f}else{u=G(o.w,a);m=j;if(e.isIElt9||!e.hasTag(i,"BUTTON")&&!e.hasTag(i,"INPUT")&&!e.hasTag(i,"SELECT")&&!e.hasTag(i,"TEXTAREA"))m=Math.max(0,m-u);u=false;if(e.isIE&&e.hasTag(i,"BUTTON"))u=true;if(u||j!=f||o.layout){y(i,c.size,m+"px")&&K(o);o.set[a]=true}else if(o.fs[a])a==0&&y(i,c.size,o.fs[a]+"px");else{y(i,c.size,"")&&K(o);o.set[a]=false}u=h;o.size[a]=m;o.psize[a]=j}if(t)if(r){y(i,c.left,"4px");j=e.css(i,"position");if(j!=="absolute")i.style.position="relative"}else y(i,c.left,"0px");else y(i,c.left,
u+"px");if(a==1){i.wtResize&&i.wtResize(i,Math.round(o.size[0]),Math.round(o.size[1]),o);o.dirty=false}}h+=p[d]}}}var e=F.WT;this.ancestor=null;this.descendants=[];var L=this,E=B,R=false,J=true,W=false,U=null,M=null,Y=false,N=[],Z=false,S=$(document.body).hasClass("Wt-rtl"),s=[{initialized:false,config:E.cols,margins:x,maxSize:D,measures:[],sizes:[],fixedSize:[],Left:S?"Right":"Left",left:S?"right":"left",Right:S?"Left":"Right",Size:"Width",size:"width",alignBits:0,getItem:function(a,b){return E.items[b*
s[0].config.length+a]},handleClass:"Wt-vrh2",resizeDir:"h",resizerClass:"Wt-hsh2",fitSize:O},{initialized:false,config:E.rows,margins:w,maxSize:z,measures:[],sizes:[],fixedSize:[],Left:"Top",left:"top",Right:"Bottom",Size:"Height",size:"height",alignBits:4,getItem:function(a,b){return E.items[a*s[0].config.length+b]},handleClass:"Wt-hrh2",resizeDir:"v",resizerClass:"Wt-vsh2",fitSize:P}];jQuery.data(document.getElementById(C),"layout",this);this.updateSizeInParent=function(a){if(U){var b=s[a].measures[2];
if(Z){var c=e.getElement(C);if(!c)return;c=c;for(var g=c.parentNode;;){if(g.wtGetPS)b=g.wtGetPS(g,c,a,b);b+=Q(g,a);if(g==M)break;c=g;g=c.parentNode}}else b+=N[a];U.setChildSize(M,a,b)}};this.setConfig=function(a){var b=E;E=a;s[0].config=E.cols;s[1].config=E.rows;var c;a=0;for(c=b.items.length;a<c;++a){var g=b.items[a];if(g){g.set[0]&&y(g.w,s[0].size,"");g.set[1]&&y(g.w,s[1].size,"");if(g.layout){L.setChildSize(g.w,0,g.ps[0]);L.setChildSize(g.w,1,g.ps[1])}}}J=true};this.getId=function(){return C};
this.setItemsDirty=function(a){var b,c,g=s[0].config.length;b=0;for(c=a.length;b<c;++b){var h=E.items[a[b][0]*g+a[b][1]];h.dirty=true;if(h.layout){h.layout=false;h.wasLayout=true;F.layouts2.setChildLayoutsDirty(L,h.w)}}R=true};this.setDirty=function(){J=true};this.setChildSize=function(a,b,c){var g,h;g=0;for(h=E.items.length;g<h;++g){var k=E.items[g];if(k&&k.id==a.id){if(!k.ps)k.ps=[];k.ps[b]=c;k.layout=true;K(k);break}}};this.measure=function(a){var b=e.getElement(C);if(b)if(!e.isHidden(b)){if(!Y){Y=
true;if(W=I==null){var c=b;c=c.parentNode;for(N=[0,0];;){N[0]+=Q(c,0);N[1]+=Q(c,1);if(c.wtGetPS)Z=true;var g=jQuery.data(c.parentNode,"layout");if(g){U=g;M=c;break}c=c;c=c.parentNode;if(c.childNodes.length!=1&&!c.wtGetPS)break}}else{U=jQuery.data(document.getElementById(I),"layout");M=b;N[0]=Q(M,0);N[1]=Q(M,1)}}if(R||J)aa(a,b,W?b.parentNode:null);if(a==1)R=J=false}};this.setMaxSize=function(a,b){s[0].maxSize=a;s[1].maxSize=b};this.apply=function(a){var b=e.getElement(C);if(!b)return false;if(e.isHidden(b))return true;
ea(a,b);return true};this.contains=function(a){var b=e.getElement(C);a=e.getElement(a.getId());return b&&a?e.contains(b,a):false};this.WT=e});WT_DECLARE_WT_MEMBER(2,JavaScriptPrototype,"StdLayout2.prototype.initResize",function(){this.resizeInitialized=true});
WT_DECLARE_APP_MEMBER(1,JavaScriptObject,"layouts2",new (function(){var F=[],C=false,I=this,O=false;this.find=function(t){return jQuery.data(document.getElementById(t),"layout")};this.setDirty=function(t){(t=jQuery.data(t,"layout"))&&t.setDirty()};this.setChildLayoutsDirty=function(t,D){var z,x;z=0;for(x=t.descendants.length;z<x;++z){var w=t.descendants[z];if(D){var B=t.WT.getElement(w.getId());if(!t.WT.contains(D,B))continue}w.setDirty()}};this.add=function(t){function D(z,x){var w,B;w=0;for(B=z.length;w<
B;++w){var v=z[w];if(v.getId()==x.getId()){z[w]=x;x.descendants=v.descendants;return}else if(v.contains(x)){D(v.descendants,x);return}else if(x.contains(v)){x.descendants.push(v);z.splice(w,1);--w;--B}}z.push(x)}D(F,t);I.scheduleAdjust()};var P=false;this.scheduleAdjust=function(){if(!P){P=true;setTimeout(function(){I.adjust()},0)}};this.adjust=function(t,D){function z(w,B){var v,H;v=0;for(H=w.length;v<H;++v){var G=w[v];z(G.descendants,B);B==1&&O&&G.setDirty();G.measure(B)}}function x(w,B){var v,
H;v=0;for(H=w.length;v<H;++v){var G=w[v];if(G.apply(B))x(G.descendants,B);else{w.splice(v,1);--v;--H}}}if(t){(t=this.find(t))&&t.setItemsDirty(D);I.scheduleAdjust()}else{P=false;if(!C){C=true;z(F,0);x(F,0);z(F,1);x(F,1);O=C=false}}};this.updateConfig=function(t,D){(t=this.find(t))&&t.setConfig(D)};window.onresize=function(){O=true;I.scheduleAdjust()}}));
