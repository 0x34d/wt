WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"StdLayout2",function(B,F,K,N,S,L,u,G,z,x,y){function C(a,b,c){var g=t[b],h=a.style[g.left];A(a,g.left,"-1000000px");var j=b?a.scrollHeight:a.scrollWidth,m=b?a.clientHeight:a.clientWidth;b=b?a.offsetHeight:a.offsetWidth;A(a,g.left,h);if(m>=1E6)m-=1E6;if(j>=1E6)j-=1E6;if(b>=1E6)b-=1E6;if(j===0){j=e.pxself(a,g.size);if(j!==0&&!e.isOpera&&!e.isGecko)j-=e.px(a,"border"+g.Left+"Width")+e.px(a,"border"+g.Right+"Width")}if(e.isIE&&(e.hasTag(a,"BUTTON")||e.hasTag(a,
"TEXTAREA")||e.hasTag(a,"INPUT")||e.hasTag(a,"SELECT")))j=m;if(j>b)if(e.pxself(a,g.size)==0)j=0;else{var s=false;$(a).find(".Wt-popup").each(function(){if(this.style.display!="none")s=true});if(s)j=0}if(c)return j;e.isOpera||(j+=e.px(a,"border"+g.Left+"Width")+e.px(a,"border"+g.Right+"Width"));j+=e.px(a,"margin"+g.Left)+e.px(a,"margin"+g.Right);if(!e.boxSizing(a)&&!e.isIE)j+=e.px(a,"padding"+g.Left)+e.px(a,"padding"+g.Right);if(j<b)j=b;a=e.px(a,"max"+g.Size);if(a>0)j=Math.min(a,j);return Math.round(j)}
function w(a,b){b=t[b];if(a.style.display=="none")return 0;else if(a["layoutMin"+b.Size])return a["layoutMin"+b.Size];else{var c=e.px(a,"min"+b.Size);e.boxSizing(a)||(c+=e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right));return c}}function H(a,b){b=t[b];var c=e.px(a,"margin"+b.Left)+e.px(a,"margin"+b.Right);if(!e.boxSizing(a)&&!(e.isIE&&!e.isIElt9&&e.hasTag(a,"BUTTON")))c+=e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right);return c}
function J(a,b){b=t[b];return e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right)}function X(a,b){if(e.boxSizing(a)){b=t[b];return e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right)}else return 0}function T(a,b){b=t[b];return Math.round(e.px(a,"border"+b.Left+"Width")+e.px(a,"border"+b.Right+"Width")+e.px(a,"margin"+b.Left)+e.px(a,"margin"+b.Right)+e.px(a,"padding"+b.Left)+e.px(a,"padding"+b.Right))}function O(a,b){U=a.dirty=true;b&&
B.layouts2.scheduleAdjust()}function A(a,b,c){if(a.style[b]!==c){a.style[b]=c;return true}else return false}function da(a,b,c){b=t[a];var g=t[a^1],h=b.measures,j=b.config.length,m=g.config.length;if(U||M){if(c&&typeof b.minSize=="undefined"){b.minSize=e.px(c,"min"+b.Size);if(b.minSize>0)b.minSize-=X(c,a)}h=h.slice();if(h.length==5){h[0]=h[0].slice();h[1]=h[1].slice()}var s=[],d=[],o=0,l=0,i,D,q=false;for(i=0;i<j;++i){var k=0,r=b.config[i][2],p=true;for(D=0;D<m;++D){var f=b.getItem(i,D);if(f){if(!f.w||
a==0&&f.dirty){var n=$("#"+f.id),v=n.get(0);if(v!=f.w){f.w=v;n.find("img").add(n.filter("img")).bind("load",{item:f},function(Z){O(Z.data.item,true)});f.w.style[b.left]=f.w.style[g.left]="-1000000px"}}if(!L&&f.w.style.position!="absolute"){f.w.style.position="absolute";f.w.style.visibility="hidden";if(!f.w.wtResize&&!e.isIE){f.w.style.boxSizing="border-box";if(n=e.cssPrefix("BoxSizing"))f.w.style[n+"BoxSizing"]="border-box"}}if(!f.ps)f.ps=[];if(!f.ms)f.ms=[];if(!f.size)f.size=[];if(!f.psize)f.psize=
[];if(!f.fs)f.fs=[];if($(f.w).hasClass("Wt-hidden"))f.ps[a]=f.ms[a]=0;else{n=!f.set;if(!f.set)f.set=[false,false];if(f.w){if(e.isIE)f.w.style.visibility="";if(f.dirty||M){v=w(f.w,a);if(v>r)r=v;f.ms[a]=v;if(!f.set[a])if(a==0||!n){n=e.pxself(f.w,b.size);f.fs[a]=n?n+H(f.w,a):0}else{n=Math.round(e.px(f.w,b.size));f.fs[a]=n>Math.max(X(f.w,a),v)?n+H(f.w,a):0}n=f.fs[a];if(f.layout){if(n==0)n=f.ps[a]}else{if(f.wasLayout){f.wasLayout=false;f.set=[false,false];f.ps-=0.1;f.w.wtResize&&f.w.wtResize(f.w,-1,-1,
true);A(f.w,t[1].size,"")}v=C(f.w,a,false);var E=f.set[a];if(E)if(f.psize[a]>8)E=v>=f.psize[a]-2&&v<=f.psize[a]+2;var V=typeof f.ps[a]!=="undefined"&&b.config[i][0]>0&&f.set[a];n=E||V?Math.max(n,f.ps[a]):Math.max(n,v)}f.ps[a]=n;if(!f.span||f.span[a]==1){if(n>k)k=n}else q=true}else if(!f.span||f.span[a]==1){if(f.ps[a]>k)k=f.ps[a];if(f.ms[a]>r)r=f.ms[a]}else q=true;if((f.w.style.display!=="none"||e.hasTag(f.w,"TEXTAREA")&&f.w.wtResize)&&(!f.span||f.span[a]==1))p=false}}}}if(p)r=k=-1;else if(r>k)k=r;
s[i]=k;d[i]=r;if(r>-1){o+=k;l+=r}}if(q)for(i=0;i<j;++i)for(D=0;D<m;++D)if((f=b.getItem(i,D))&&f.span&&f.span[a]>1){g=f.ps[a];for(si=k=q=0;si<f.span[a];++si){r=s[i+si];if(r!=-1){g-=r;++q;if(b.config[i+si][0]>0)k+=b.config[i+si][0]}}if(g>0)if(q>0){if(k>0)q=k;for(si=0;si<f.span[a];++si){r=s[i+si];if(r!=-1){r=k>0?b.config[i+si][0]:1;if(r>0){p=Math.round(g/r);g-=p;q-=r;s[i+si]+=p}}}}else s[i]=g}m=0;n=true;D=false;for(i=0;i<j;++i)if(d[i]>-1){if(n){m+=b.margins[1];n=false}else{m+=b.margins[0];if(D)m+=4}D=
b.config[i][1]!==0}n||(m+=b.margins[2]);o+=m;l+=m;b.measures=[s,d,o,l,m];if(M||h[2]!=b.measures[2])P.updateSizeInParent(a);c&&b.minSize==0&&h[3]!=b.measures[3]&&c.parentNode.className!="Wt-domRoot"&&A(c,"min"+b.Size,b.measures[3]+"px")&&P.ancestor&&P.ancestor.setContentsDirty(c);c&&a==0&&c&&e.hasTag(c,"TD")&&A(c,b.size,b.measures[2]+"px")}}function ea(a,b,c){a=t[a];if(W)c=-c;if(a.config[b][0]>0&&a.config[b+1][0]==0){++b;c=-c}a.fixedSize[b]=a.sizes[b]+c;B.layouts2.scheduleAdjust()}function fa(a,b,
c){var g=b.di,h=t[a],j=t[a^1],m,s=e.getElement(F),d;for(d=g-1;d>=0;--d)if(h.sizes[d]>=0){m=-(h.sizes[d]-h.measures[1][d]);break}g=h.sizes[g]-h.measures[1][g];if(W){var o=m;m=-g;g=-o}new e.SizeHandle(e,h.resizeDir,e.pxself(b,h.size),e.pxself(b,j.size),m,g,h.resizerClass,function(l){ea(a,d,l)},b,s,c,0,0)}function ga(a,b){var c=t[a],g=t[a^1],h=c.measures,j=0,m=false,s=false,d=false,o=aa?b.parentNode:null;if(c.maxSize===0)if(o){var l=e.css(o,"position");if(l==="absolute")j=e.pxself(o,c.size);if(j===0){if(!c.initialized){if(a===
0&&(l==="absolute"||l==="fixed")){o.style.display="none";j=o.clientWidth;o.style.display=""}j=a?o.clientHeight:o.clientWidth;m=true;if(a==0&&j==0&&e.isIElt9){j=o.offsetWidth;m=false}var i;if((e.hasTag(o,"TD")||e.hasTag(o,"TH"))&&!(e.isIE&&!e.isIElt9)){d=0;i=1}else{d=c.minSize?c.minSize:h[3];i=0}function D(V,Z){return Math.abs(V-Z)<1}if(e.isIElt9&&D(j,i)||D(j,d+J(o,a)))c.maxSize=999999}if(j===0&&c.maxSize===0){j=a?o.clientHeight:o.clientWidth;m=true}}}else{j=e.pxself(b,c.size);s=true}else if(c.sizeSet){j=
e.pxself(o,c.size);s=true}var q=0;if(o&&o.wtGetPS&&a==1)q=o.wtGetPS(o,b,a,0);d=h[2];if(d<c.minSize)d=c.minSize;if(c.maxSize&&!c.sizeSet)if(d+q<c.maxSize){A(o,c.size,d+q+X(o,a)+"px")&&B.layouts2.remeasure();j=d+q;d=s=true}else{j=c.maxSize;m=false}c.cSize=j;if(a==1&&o&&o.wtResize){i=g.cSize;d=c.cSize;o.wtResize(o,Math.round(i),Math.round(d),true)}j-=q;if(!s){s=0;if(typeof c.cPadding==="undefined"){s=m?J(o,a):X(o,a);c.cPadding=s}else s=c.cPadding;j-=s}c.initialized=true;if(!(o&&j<=0)){if(j<h[3]-q)j=
h[3]-q;m=[];o=c.config.length;s=g.config.length;for(d=0;d<o;++d)c.stretched[d]=false;if(j>=h[3]-q){q=j-h[4];i=[];var k=[0,0],r=[0,0],p=0;for(d=0;d<o;++d)if(h[1][d]>-1){l=-1;if(typeof c.fixedSize[d]!=="undefined"&&(d+1==o||h[1][d+1]>-1))l=c.fixedSize[d];else if(c.config[d][1]!==0&&c.config[d][1][0]>=0){l=c.config[d][1][0];if(c.config[d][1][1])l=(j-h[4])*l/100}if(l>=0){i[d]=-1;m[d]=l;q-=m[d]}else{if(c.config[d][0]>0){l=1;i[d]=c.config[d][0];p+=i[d]}else{l=0;i[d]=0}k[l]+=h[1][d];r[l]+=h[0][d];m[d]=h[0][d]}}else{i[d]=
-2;m[d]=-1}if(p==0){for(d=0;d<o;++d)if(i[d]==0){i[d]=1;++p}r[1]=r[0];k[1]=k[0];r[0]=0;k[0]=0}if(q>r[0]+k[1]){q-=r[0];if(q>r[1]){if(c.fitSize){q-=r[1];q=q/p;for(d=0;d<o;++d)if(i[d]>0){m[d]+=Math.round(i[d]*q);c.stretched[d]=true}}}else{l=1;if(q<k[l])q=k[l];q=r[l]-k[l]>0?(q-k[l])/(r[l]-k[l]):0;for(d=0;d<o;++d)if(i[d]>0){k=h[0][d]-h[1][d];m[d]=h[1][d]+Math.round(k*q)}}}else{for(d=0;d<o;++d)if(i[d]>0)m[d]=h[1][d];q-=k[1];l=0;if(q<k[l])q=k[l];q=r[l]-k[l]>0?(q-k[l])/(r[l]-k[l]):0;for(d=0;d<o;++d)if(i[d]==
0){k=h[0][d]-h[1][d];m[d]=h[1][d]+Math.round(k*q)}}}else m=h[1];c.sizes=m;h=c.margins[1];q=true;k=false;for(d=0;d<o;++d){if(m[d]>-1){var f=k;if(k){i=F+"-rs"+a+"-"+d;k=e.getElement(i);if(!k){k=document.createElement("div");k.setAttribute("id",i);k.di=d;k.style.position="absolute";k.style[g.left]=g.margins[1]+"px";k.style[c.size]=c.margins[0]+"px";if(g.cSize)k.style[g.size]=g.cSize-g.margins[2]-g.margins[1]+"px";k.className=c.handleClass;b.insertBefore(k,b.firstChild);k.onmousedown=k.ontouchstart=function(V){fa(a,
this,V||window.event)}}h+=2;A(k,c.left,h+"px");h+=2}k=c.config[d][1]!==0;if(q)q=false;else h+=c.margins[0]}for(r=0;r<s;++r)if((p=c.getItem(d,r))&&p.w){i=p.w;l=Math.max(m[d],0);if(p.span){var n,v=k;for(n=1;n<p.span[a];++n){if(d+n>=m.length)break;if(v)l+=4;v=c.config[d+n][1]!==0;if(m[d+n-1]>-1&&m[d+n]>-1)l+=c.margins[0];l+=m[d+n]}}var E;A(i,"visibility","");v=p.align>>c.alignBits&15;n=p.ps[a];if(l<n)v=0;if(v){switch(v){case 1:E=h;break;case 4:E=h+(l-n)/2;break;case 2:E=h+(l-n);break}n-=H(p.w,a);if(p.layout){A(i,
c.size,n+"px")&&O(p);p.set[a]=true}else if(l>=n&&p.set[a]){A(i,c.size,n+"px")&&O(p);p.set[a]=false}p.size[a]=n;p.psize[a]=n}else{E=H(p.w,a);v=Math.max(0,l-E);if(!e.isIE&&e.hasTag(i,"TEXTAREA"))v=l;E=false;if(e.isIE&&e.hasTag(i,"BUTTON"))E=true;if(E||l!=n||p.layout){A(i,c.size,v+"px")&&O(p);p.set[a]=true}else if(p.fs[a])a==0&&A(i,c.size,p.fs[a]+"px");else{A(i,c.size,"")&&O(p);p.set[a]=false}E=h;p.size[a]=v;p.psize[a]=l}if(L)if(f){A(i,c.left,"4px");l=e.css(i,"position");if(l!=="absolute")i.style.position=
"relative"}else A(i,c.left,"0px");else A(i,c.left,E+"px");if(a==1){if(i.wtResize)i.wtResize(i,p.set[0]?Math.round(p.size[0]):-1,p.set[1]?Math.round(p.size[1]):-1,true);p.dirty=false}}if(m[d]>-1)h+=m[d]}$(b).children("."+g.handleClass).css(c.size,j-c.margins[2]-c.margins[1]+"px")}}var e=B.WT;this.ancestor=null;this.descendants=[];var P=this,I=y,U=false,M=true,aa=false,Y=null,Q=null,ba=false,R=[],ca=false,W=$(document.body).hasClass("Wt-rtl"),t=[{initialized:false,config:I.cols,margins:z,maxSize:u,
measures:[],sizes:[],stretched:[],fixedSize:[],Left:W?"Right":"Left",left:W?"right":"left",Right:W?"Left":"Right",Size:"Width",size:"width",alignBits:0,getItem:function(a,b){return I.items[b*t[0].config.length+a]},handleClass:"Wt-vrh2",resizeDir:"h",resizerClass:"Wt-hsh2",fitSize:N},{initialized:false,config:I.rows,margins:x,maxSize:G,measures:[],sizes:[],stretched:[],fixedSize:[],Left:"Top",left:"top",Right:"Bottom",Size:"Height",size:"height",alignBits:4,getItem:function(a,b){return I.items[a*t[0].config.length+
b]},handleClass:"Wt-hrh2",resizeDir:"v",resizerClass:"Wt-vsh2",fitSize:S}];jQuery.data(document.getElementById(F),"layout",this);this.updateSizeInParent=function(a){if(Y){var b=t[a],c=b.measures[2];if(b.maxSize>0)c=Math.min(b.maxSize,c);if(ca){b=e.getElement(F);if(!b)return;for(var g=b,h=g.parentNode;;){if(h.wtGetPS)c=h.wtGetPS(h,g,a,c);c+=T(h,a);if(h==Q)break;if(h==b.parentNode&&!h.lh&&h.offsetHeight>c)c=h.offsetHeight;g=h;h=g.parentNode}}else c+=R[a];Y.setChildSize(Q,a,c)}};this.setConfig=function(a){var b=
I;I=a;t[0].config=I.cols;t[1].config=I.rows;t[0].stretched=[];t[1].stretched=[];var c;a=0;for(c=b.items.length;a<c;++a){var g=b.items[a];if(g){if(g.set){g.set[0]&&A(g.w,t[0].size,"");g.set[1]&&A(g.w,t[1].size,"")}if(g.layout){P.setChildSize(g.w,0,g.ps[0]);P.setChildSize(g.w,1,g.ps[1])}}}M=true;B.layouts2.scheduleAdjust()};this.getId=function(){return F};this.setItemsDirty=function(a){var b,c,g=t[0].config.length;b=0;for(c=a.length;b<c;++b){var h=I.items[a[b][0]*g+a[b][1]];h.dirty=true;if(h.layout){h.layout=
false;h.wasLayout=true;B.layouts2.setChildLayoutsDirty(P,h.w)}}U=true};this.setDirty=function(){M=true};this.setChildSize=function(a,b,c){var g=t[0].config.length,h=t[b],j,m;j=0;for(m=I.items.length;j<m;++j){var s=I.items[j];if(s&&s.id==a.id){a=b===0?j%g:j/g;if(s.align>>h.alignBits&15||!h.stretched[a]){if(!s.ps)s.ps=[];s.ps[b]=c}s.layout=true;O(s);break}}};this.measure=function(a){var b=e.getElement(F);if(b)if(!e.isHidden(b)){if(!ba){ba=true;if(aa=K==null){var c=b;c=c.parentNode;for(R=[0,0];;){R[0]+=
T(c,0);R[1]+=T(c,1);if(c.wtGetPS)ca=true;var g=jQuery.data(c.parentNode,"layout");if(g){Y=g;Q=c;break}c=c;c=c.parentNode;if(c.childNodes.length!=1&&!c.wtGetPS)break}c=b.parentNode;for(g=0;g<2;++g)t[g].sizeSet=e.pxself(c,t[g].size)!=0}else{Y=jQuery.data(document.getElementById(K),"layout");Q=b;R[0]=T(Q,0);R[1]=T(Q,1)}}if(U||M){c=aa?b.parentNode:null;da(a,b,c)}if(a==1)U=M=false}};this.setMaxSize=function(a,b){t[0].maxSize=a;t[1].maxSize=b};this.apply=function(a){var b=e.getElement(F);if(!b)return false;
if(e.isHidden(b))return true;ga(a,b);return true};this.contains=function(a){var b=e.getElement(F);a=e.getElement(a.getId());return b&&a?e.contains(b,a):false};this.WT=e});WT_DECLARE_WT_MEMBER(2,JavaScriptPrototype,"StdLayout2.prototype.initResize",function(){this.resizeInitialized=true});
WT_DECLARE_APP_MEMBER(1,JavaScriptObject,"layouts2",new (function(){var B=[],F=false,K=this,N=false;this.find=function(u){return jQuery.data(document.getElementById(u),"layout")};this.setDirty=function(u){(u=jQuery.data(u,"layout"))&&u.setDirty()};this.setChildLayoutsDirty=function(u,G){var z,x;z=0;for(x=u.descendants.length;z<x;++z){var y=u.descendants[z];if(G){var C=u.WT.getElement(y.getId());if(C&&!u.WT.contains(G,C))continue}y.setDirty()}};this.add=function(u){function G(z,x){var y,C;y=0;for(C=
z.length;y<C;++y){var w=z[y];if(w.getId()==x.getId()){z[y]=x;x.descendants=w.descendants;return}else if(w.contains(x)){G(w.descendants,x);return}else if(x.contains(w)){x.descendants.push(w);z.splice(y,1);--y;--C}}z.push(x)}G(B,u);K.scheduleAdjust()};var S=false,L=false;this.scheduleAdjust=function(u){if(u)N=true;if(!S){S=true;setTimeout(function(){K.adjust()},0)}};this.adjust=function(u,G){function z(y,C){var w,H;w=0;for(H=y.length;w<H;++w){var J=y[w];z(J.descendants,C);C==1&&N&&J.setDirty();J.measure(C)}}
function x(y,C){var w,H;w=0;for(H=y.length;w<H;++w){var J=y[w];if(J.apply(C))x(J.descendants,C);else{y.splice(w,1);--w;--H}}}if(u){(u=this.find(u))&&u.setItemsDirty(G);K.scheduleAdjust()}else{S=false;if(!F){F=true;L=false;z(B,0);x(B,0);z(B,1);x(B,1);if(L){z(B,0);x(B,0);z(B,1);x(B,1)}N=L=F=false}}};this.updateConfig=function(u,G){(u=this.find(u))&&u.setConfig(G)};this.remeasure=function(){L=true};window.onresize=function(){K.scheduleAdjust(true)};window.onshow=function(){N=true;K.adjust()}}));
