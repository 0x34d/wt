WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"StdLayout2",function(D,I,K,P,Q,M,V,t,H,w,z){function A(a,b,c,e){function h(n){return n=="visible"||n=="none"}var j=v[b],l=b?a.scrollHeight:a.scrollWidth,u,d;if(b==0&&l+g.pxself(a,j.left)>=e.clientWidth){u=a.style[j.left];x(a,j.left,"-1000000px");l=b?a.scrollHeight:a.scrollWidth}e=b?a.clientHeight:a.clientWidth;if(g.isGecko&&b==0&&h(g.css(a,"overflow"))){d=a.style[j.size];x(a,j.size,"")}b=b?a.offsetHeight:a.offsetWidth;u&&x(a,j.left,u);d&&x(a,j.size,d);
if(e>=1E6)e-=1E6;if(l>=1E6)l-=1E6;if(b>=1E6)b-=1E6;if(l===0){l=g.pxself(a,j.size);if(l!==0&&!g.isOpera&&!g.isGecko)l-=g.px(a,"border"+j.Left+"Width")+g.px(a,"border"+j.Right+"Width")}if(g.isIE&&(g.hasTag(a,"BUTTON")||g.hasTag(a,"TEXTAREA")||g.hasTag(a,"INPUT")||g.hasTag(a,"SELECT")))l=e;if(l>b)if(g.pxself(a,j.size)==0)l=e;else{var p=false;$(a).find(".Wt-popup").each(function(){if(this.style.display!=="none")p=true});if(p)l=e}d=g.px(a,"border"+j.Left+"Width")+g.px(a,"border"+j.Right+"Width");u=b-(e+
d)!=0;if(c)return[l,scrollBar];g.isOpera||(l+=d);l+=g.px(a,"margin"+j.Left)+g.px(a,"margin"+j.Right);if(!g.boxSizing(a)&&!g.isIE)l+=g.px(a,"padding"+j.Left)+g.px(a,"padding"+j.Right);l+=b-(e+d);if(l<b)l=b;a=g.px(a,"max"+j.Size);if(a>0)l=Math.min(a,l);return[Math.round(l),u]}function E(a,b){b=v[b];if(a.style.display==="none")return 0;else if(a["layoutMin"+b.Size])return a["layoutMin"+b.Size];else{var c=g.px(a,"min"+b.Size);g.boxSizing(a)||(c+=g.px(a,"padding"+b.Left)+g.px(a,"padding"+b.Right));return c}}
function y(a,b){b=v[b];var c=g.px(a,"margin"+b.Left)+g.px(a,"margin"+b.Right);if(!g.boxSizing(a)&&!(g.isIE&&!g.isIElt9&&g.hasTag(a,"BUTTON")))c+=g.px(a,"border"+b.Left+"Width")+g.px(a,"border"+b.Right+"Width")+g.px(a,"padding"+b.Left)+g.px(a,"padding"+b.Right);return c}function L(a,b){b=v[b];return g.px(a,"padding"+b.Left)+g.px(a,"padding"+b.Right)}function J(a,b){if(g.boxSizing(a)){b=v[b];return g.px(a,"border"+b.Left+"Width")+g.px(a,"border"+b.Right+"Width")+g.px(a,"padding"+b.Left)+g.px(a,"padding"+
b.Right)}else return 0}function W(a,b){b=v[b];return Math.round(g.px(a,"border"+b.Left+"Width")+g.px(a,"border"+b.Right+"Width")+g.px(a,"margin"+b.Left)+g.px(a,"margin"+b.Right)+g.px(a,"padding"+b.Left)+g.px(a,"padding"+b.Right))}function R(a,b,c){a.dirty=Math.max(a.dirty,b);N=true;c&&D.layouts2.scheduleAdjust()}function x(a,b,c){if(a.style[b]!==c){a.style[b]=c;return true}else return false}function ea(a,b,c){var e=v[a],h=e.config.length,j=v[a^1].config.length,l=e.measures.slice();if(l.length==5){l[0]=
l[0].slice();l[1]=l[1].slice()}if(N){if(c&&typeof e.minSize=="undefined"){e.minSize=g.px(c,"min"+e.Size);if(e.minSize>0)e.minSize-=J(c,a)}var u=[],d=[],p=0,n=0,k,G,s=false;for(k=0;k<h;++k){var m=0,r=e.config[k][2],o=true;for(G=0;G<j;++G){var f=e.getItem(k,G);if(f){if(!f.w||a==0&&f.dirty>1){var q=$("#"+f.id),B=q.get(0);if(!B){e.setItem(k,G,null);continue}if(B!=f.w){f.w=B;q.find("img").add(q.filter("img")).bind("load",{item:f},function(fa){R(fa.data.item,1,true)})}}if(!M&&f.w.style.position!="absolute"){f.w.style.position=
"absolute";f.w.style.visibility="hidden"}if(!f.ps)f.ps=[];if(!f.sc)f.sc=[];if(!f.ms)f.ms=[];if(!f.size)f.size=[];if(!f.psize)f.psize=[];if(!f.fs)f.fs=[];if(!f.margin)f.margin=[];if($(f.w).hasClass("Wt-hidden"))f.ps[a]=f.ms[a]=0;else{q=!f.set;if(!f.set)f.set=[false,false];if(f.w){if(g.isIE)f.w.style.visibility="";if(f.dirty){var F;if(f.dirty>1){E(f.w,a);f.ms[a]=F}else F=f.ms[a];if(F>r)r=F;if(f.dirty>1)f.margin[a]=y(f.w,a);if(!f.set[a])if(a==0||!q){q=g.pxself(f.w,e.size);f.fs[a]=q?q+f.margin[a]:0}else{q=
Math.round(g.px(f.w,e.size));f.fs[a]=q>Math.max(J(f.w,a),F)?q+f.margin[a]:0}q=f.fs[a];if(f.layout){if(q==0)q=f.ps[a];f.ps[a]=q}else{if(f.wasLayout){f.wasLayout=false;f.set=[false,false];f.ps=[];f.w.wtResize&&f.w.wtResize(f.w,-1,-1,true);x(f.w,v[1].size,"")}B=A(f.w,a,false,b);var O=B[0],X=f.set[a];if(X)if(f.psize[a]>8)X=O>=f.psize[a]-4&&O<=f.psize[a]+4;var ga=typeof f.ps[a]!=="undefined"&&e.config[k][0]>0&&f.set[a];q=X||ga?Math.max(q,f.ps[a]):Math.max(q,O);f.ps[a]=q;f.sc[a]=B[1]}if(!f.span||f.span[a]==
1){if(q>m)m=q}else s=true}else if(!f.span||f.span[a]==1){if(f.ps[a]>m)m=f.ps[a];if(f.ms[a]>r)r=f.ms[a]}else s=true;if(!(f.w.style.display==="none"&&!f.w.ed)&&(!f.span||f.span[a]==1))o=false}}}}if(o)r=m=-1;else if(r>m)m=r;u[k]=m;d[k]=r;if(r>-1){p+=m;n+=r}}if(s)for(k=0;k<h;++k)for(G=0;G<j;++G)if((f=e.getItem(k,G))&&f.span&&f.span[a]>1){b=f.ps[a];for(r=m=s=0;r<f.span[a];++r){o=u[k+r];if(o!=-1){b-=o;++s;if(e.config[k+r][0]>0)m+=e.config[k+r][0]}}if(b>0)if(s>0){if(m>0)s=m;for(r=0;r<f.span[a];++r){o=u[k+
r];if(o!=-1){o=m>0?e.config[k+r][0]:1;if(o>0){F=Math.round(b/o);b-=F;s-=o;u[k+r]+=F}}}}else u[k]=b}j=0;q=true;G=false;for(k=0;k<h;++k)if(d[k]>-1){if(q){j+=e.margins[1];q=false}else{j+=e.margins[0];if(G)j+=4}G=e.config[k][1]!==0}q||(j+=e.margins[2]);p+=j;n+=j;e.measures=[u,d,p,n,j]}if(Y||l[2]!=e.measures[2])S.updateSizeInParent(a);c&&e.minSize==0&&l[3]!=e.measures[3]&&c.parentNode.className!="Wt-domRoot"&&x(c,"min"+e.Size,e.measures[3]+"px")&&S.ancestor&&S.ancestor.setContentsDirty(c);c&&a==0&&c&&
g.hasTag(c,"TD")&&x(c,e.size,e.measures[2]+"px")}function ha(a,b,c){a=v[a];if(Z)c=-c;if(a.config[b][0]>0&&a.config[b+1][0]==0){++b;c=-c}a.fixedSize[b]=a.sizes[b]+c;D.layouts2.scheduleAdjust()}function ia(a,b,c){var e=b.di,h=v[a],j=v[a^1],l,u=g.getElement(I),d;for(d=e-1;d>=0;--d)if(h.sizes[d]>=0){l=-(h.sizes[d]-h.measures[1][d]);break}e=h.sizes[e]-h.measures[1][e];if(Z){var p=l;l=-e;e=-p}new g.SizeHandle(g,h.resizeDir,g.pxself(b,h.size),g.pxself(b,j.size),l,e,h.resizerClass,function(n){ha(a,d,n)},
b,u,c,0,0)}function ja(a,b){var c=v[a],e=v[a^1],h=c.measures,j=0,l=false,u=false,d=false,p=ba?b.parentNode:null;if(c.maxSize===0)if(p){var n=g.css(p,"position");if(n==="absolute")j=g.pxself(p,c.size);if(j===0){if(!c.initialized){if(a===0&&(n==="absolute"||n==="fixed")){p.style.display="none";j=p.clientWidth;p.style.display=""}j=a?p.clientHeight:p.clientWidth;l=true;if(a==0&&j==0&&g.isIElt9){j=p.offsetWidth;l=false}var k;if((g.hasTag(p,"TD")||g.hasTag(p,"TH"))&&!(g.isIE&&!g.isIElt9)){d=0;k=1}else{d=
c.minSize?c.minSize:h[3];k=0}function G(O,X){return Math.abs(O-X)<1}if(g.isIElt9&&G(j,k)||G(j,d+L(p,a)))c.maxSize=999999}if(j===0&&c.maxSize===0){j=a?p.clientHeight:p.clientWidth;l=true}}}else{j=g.pxself(b,c.size);u=true}else if(c.sizeSet){j=g.pxself(p,c.size);u=true}var s=0;if(p&&p.wtGetPS&&a==1)s=p.wtGetPS(p,b,a,0);d=h[2];if(d<c.minSize)d=c.minSize;if(c.maxSize&&!c.sizeSet){j=Math.min(d,c.maxSize)+s;x(p,c.size,j+J(p,a)+"px")&&D.layouts2.remeasure();j=j;d=u=true}c.cSize=j;if(a==1&&p&&p.wtResize){k=
e.cSize;d=c.cSize;p.wtResize(p,Math.round(k),Math.round(d),true)}j-=s;if(!u){u=0;if(typeof c.cPadding==="undefined"){u=l?L(p,a):J(p,a);c.cPadding=u}else u=c.cPadding;j-=u}c.initialized=true;if(!(p&&j<=0)){if(j<h[3]-s)j=h[3]-s;l=[];p=c.config.length;u=e.config.length;for(d=0;d<p;++d)c.stretched[d]=false;if(j>=h[3]-s){s=j-h[4];k=[];var m=[0,0],r=[0,0],o=0;for(d=0;d<p;++d)if(h[1][d]>-1){n=-1;if(typeof c.fixedSize[d]!=="undefined"&&(d+1==p||h[1][d+1]>-1))n=c.fixedSize[d];else if(c.config[d][1]!==0&&c.config[d][1][0]>=
0){n=c.config[d][1][0];if(c.config[d][1][1])n=(j-h[4])*n/100}if(n>=0){k[d]=-1;l[d]=n;s-=l[d]}else{if(c.config[d][0]>0){n=1;k[d]=c.config[d][0];o+=k[d]}else{n=0;k[d]=0}m[n]+=h[1][d];r[n]+=h[0][d];l[d]=h[0][d]}}else{k[d]=-2;l[d]=-1}if(o==0){for(d=0;d<p;++d)if(k[d]==0){k[d]=1;++o}r[1]=r[0];m[1]=m[0];r[0]=0;m[0]=0}if(s>r[0]+m[1]){s-=r[0];if(s>r[1]){if(c.fitSize){s-=r[1];s=s/o;for(d=0;d<p;++d)if(k[d]>0){l[d]+=Math.round(k[d]*s);c.stretched[d]=true}}}else{n=1;if(s<m[n])s=m[n];s=r[n]-m[n]>0?(s-m[n])/(r[n]-
m[n]):0;for(d=0;d<p;++d)if(k[d]>0){m=h[0][d]-h[1][d];l[d]=h[1][d]+Math.round(m*s)}}}else{for(d=0;d<p;++d)if(k[d]>0)l[d]=h[1][d];s-=m[1];n=0;if(s<m[n])s=m[n];s=r[n]-m[n]>0?(s-m[n])/(r[n]-m[n]):0;for(d=0;d<p;++d)if(k[d]==0){m=h[0][d]-h[1][d];l[d]=h[1][d]+Math.round(m*s)}}}else l=h[1];c.sizes=l;h=c.margins[1];s=true;m=false;for(d=0;d<p;++d){if(l[d]>-1){var f=m;if(m){k=I+"-rs"+a+"-"+d;m=g.getElement(k);if(!m){m=document.createElement("div");m.setAttribute("id",k);m.di=d;m.style.position="absolute";m.style[e.left]=
e.margins[1]+"px";m.style[c.size]=c.margins[0]+"px";if(e.cSize)m.style[e.size]=e.cSize-e.margins[2]-e.margins[1]+"px";m.className=c.handleClass;b.insertBefore(m,b.firstChild);m.onmousedown=m.ontouchstart=function(O){ia(a,this,O||window.event)}}h+=2;x(m,c.left,h+"px");h+=2}m=c.config[d][1]!==0;if(s)s=false;else h+=c.margins[0]}for(r=0;r<u;++r)if((o=c.getItem(d,r))&&o.w){k=o.w;n=Math.max(l[d],0);if(o.span){var q,B=m;for(q=1;q<o.span[a];++q){if(d+q>=l.length)break;if(B)n+=4;B=c.config[d+q][1]!==0;if(l[d+
q-1]>-1&&l[d+q]>-1)n+=c.margins[0];n+=l[d+q]}}var F;x(k,"visibility","");B=o.align>>c.alignBits&15;q=o.ps[a];if(n<q)B=0;if(B){switch(B){case 1:F=h;break;case 4:F=h+(n-q)/2;break;case 2:F=h+(n-q);break}q-=o.margin[a];if(o.layout){x(k,c.size,q+"px")&&R(o,1);o.set[a]=true}else if(n>=q&&o.set[a]){x(k,c.size,q+"px")&&R(o,1);o.set[a]=false}o.size[a]=q;o.psize[a]=q}else{B=Math.max(0,n-o.margin[a]);if(!g.isIE&&g.hasTag(k,"TEXTAREA"))B=n;F=o.sc[a];if(!(k.style.display==="none"&&!k.ed)&&(F||n!=q||o.layout)){if(x(k,
c.size,B+"px")){R(o,1);o.set[a]=true}}else if(o.fs[a])a==0&&x(k,c.size,o.fs[a]+"px");else{x(k,c.size,"")&&R(o,1);o.set[a]=false}F=h;o.size[a]=B;o.psize[a]=n}if(M)if(f){x(k,c.left,"4px");n=g.css(k,"position");if(n!=="absolute")k.style.position="relative"}else x(k,c.left,"0px");else x(k,c.left,F+"px");if(a==1){if(k.wtResize)k.wtResize(k,o.set[0]?Math.round(o.size[0]):-1,o.set[1]?Math.round(o.size[1]):-1,true);o.dirty=0}}if(l[d]>-1)h+=l[d]}$(b).children("."+e.handleClass).css(c.size,j-c.margins[2]-c.margins[1]+
"px")}}var g=D.WT;this.ancestor=null;this.descendants=[];var S=this,C=z,N=true,Y=true,ba=false,aa=null,T=null,ca=false,U=[],da=false,Z=$(document.body).hasClass("Wt-rtl"),v=[{initialized:false,config:C.cols,margins:H,maxSize:V,measures:[],sizes:[],stretched:[],fixedSize:[],Left:Z?"Right":"Left",left:Z?"right":"left",Right:Z?"Left":"Right",Size:"Width",size:"width",alignBits:0,getItem:function(a,b){return C.items[b*v[0].config.length+a]},setItem:function(a,b,c){C.items[b*v[0].config.length+a]=c},handleClass:"Wt-vrh2",
resizeDir:"h",resizerClass:"Wt-hsh2",fitSize:P},{initialized:false,config:C.rows,margins:w,maxSize:t,measures:[],sizes:[],stretched:[],fixedSize:[],Left:"Top",left:"top",Right:"Bottom",Size:"Height",size:"height",alignBits:4,getItem:function(a,b){return C.items[a*v[0].config.length+b]},setItem:function(a,b,c){C.items[a*v[0].config.length+b]=c},handleClass:"Wt-hrh2",resizeDir:"v",resizerClass:"Wt-vsh2",fitSize:Q}];jQuery.data(document.getElementById(I),"layout",this);this.updateSizeInParent=function(a){if(aa){var b=
v[a],c=b.measures[2];if(b.maxSize>0)c=Math.min(b.maxSize,c);if(da){b=g.getElement(I);if(!b)return;for(var e=b,h=e.parentNode;;){if(h.wtGetPS)c=h.wtGetPS(h,e,a,c);c+=W(h,a);if(h==T)break;if(a==1&&h==b.parentNode&&!h.lh&&h.offsetHeight>c)c=h.offsetHeight;e=h;h=e.parentNode}}else c+=U[a];aa.setChildSize(T,a,c)}};this.setConfig=function(a){var b=C;C=a;v[0].config=C.cols;v[1].config=C.rows;v[0].stretched=[];v[1].stretched=[];var c;a=0;for(c=b.items.length;a<c;++a){var e=b.items[a];if(e){if(e.set){e.set[0]&&
x(e.w,v[0].size,"");e.set[1]&&x(e.w,v[1].size,"")}if(e.layout){S.setChildSize(e.w,0,e.ps[0]);S.setChildSize(e.w,1,e.ps[1])}}}Y=true;D.layouts2.scheduleAdjust()};this.getId=function(){return I};this.setElDirty=function(a){var b,c;b=0;for(c=C.items.length;b<c;++b){var e=C.items[b];if(e&&e.id==a.id){e.dirty=2;N=true;return}}};this.setItemsDirty=function(a){var b,c,e=v[0].config.length;b=0;for(c=a.length;b<c;++b){var h=C.items[a[b][0]*e+a[b][1]];h.dirty=2;if(h.layout){h.layout=false;h.wasLayout=true;
D.layouts2.setChildLayoutsDirty(S,h.w)}}N=true};this.setDirty=function(){Y=true};this.setAllDirty=function(){i=0;for(il=C.items.length;i<il;++i){var a=C.items[i];if(a)a.dirty=2}N=true};this.setChildSize=function(a,b,c){var e=v[0].config.length,h=v[b],j,l;j=0;for(l=C.items.length;j<l;++j){var u=C.items[j];if(u&&u.id==a.id){a=b===0?j%e:j/e;if(u.align>>h.alignBits&15||!h.stretched[a]){if(!u.ps)u.ps=[];u.ps[b]=c}u.layout=true;R(u,1);break}}};this.measure=function(a){var b=g.getElement(I);if(b)if(!g.isHidden(b)){if(!ca){ca=
true;if(ba=K==null){var c=b;c=c.parentNode;for(U=[0,0];;){U[0]+=W(c,0);U[1]+=W(c,1);if(c.wtGetPS)da=true;var e=jQuery.data(c.parentNode,"layout");if(e){aa=e;T=c;break}c=c;c=c.parentNode;if(c.childNodes.length!=1&&!c.wtGetPS)break}c=b.parentNode;for(e=0;e<2;++e)v[e].sizeSet=g.pxself(c,v[e].size)!=0}else{aa=jQuery.data(document.getElementById(K),"layout");T=b;U[0]=W(T,0);U[1]=W(T,1)}}if(N||Y){c=ba?b.parentNode:null;ea(a,b,c)}if(a==1)N=Y=false}};this.setMaxSize=function(a,b){v[0].maxSize=a;v[1].maxSize=
b};this.apply=function(a){var b=g.getElement(I);if(!b)return false;if(g.isHidden(b))return true;ja(a,b);return true};this.contains=function(a){var b=g.getElement(I);a=g.getElement(a.getId());return b&&a?g.contains(b,a):false};this.WT=g});WT_DECLARE_WT_MEMBER(2,JavaScriptPrototype,"StdLayout2.prototype.initResize",function(){this.resizeInitialized=true});
WT_DECLARE_APP_MEMBER(1,JavaScriptObject,"layouts2",new (function(){var D=[],I=false,K=this,P=false;this.find=function(t){return jQuery.data(document.getElementById(t),"layout")};this.setDirty=function(t){if(t=this.find(t)){t.setDirty();K.scheduleAdjust()}};this.setElementDirty=function(t){var H=t;for(t=t.parentNode;t&&t!=document.body;){var w=jQuery.data(t,"layout");if(w){w.setElDirty(H);K.scheduleAdjust()}H=t;t=t.parentNode}};this.setChildLayoutsDirty=function(t,H){var w,z;w=0;for(z=t.descendants.length;w<
z;++w){var A=t.descendants[w];if(H){var E=t.WT.getElement(A.getId());if(E&&!t.WT.contains(H,E))continue}A.setDirty()}};this.add=function(t){function H(w,z){var A,E;A=0;for(E=w.length;A<E;++A){var y=w[A];if(y.getId()==z.getId()){w[A]=z;z.descendants=y.descendants;return}else if(y.contains(z)){H(y.descendants,z);return}else if(z.contains(y)){z.descendants.push(y);w.splice(A,1);--A;--E}}w.push(z)}H(D,t);K.scheduleAdjust()};var Q=false,M=false;this.scheduleAdjust=function(t){if(t)P=true;if(!Q){Q=true;
setTimeout(function(){K.adjust()},0)}};this.adjust=function(t,H){function w(A,E){var y,L;y=0;for(L=A.length;y<L;++y){var J=A[y];w(J.descendants,E);if(E==1&&P)J.setDirty();else E==0&&M&&J.setAllDirty();J.measure(E)}}function z(A,E){var y,L;y=0;for(L=A.length;y<L;++y){var J=A[y];if(J.apply(E))z(J.descendants,E);else{A.splice(y,1);--y;--L}}}if(t){(t=this.find(t))&&t.setItemsDirty(H);K.scheduleAdjust()}else{Q=false;if(!I){I=true;M=false;w(D,0);z(D,0);w(D,1);z(D,1);if(M){w(D,0);z(D,0);w(D,1);z(D,1)}P=
M=I=false}}};this.updateConfig=function(t,H){(t=this.find(t))&&t.setConfig(H)};this.remeasure=function(){M=true};this.adjustNow=function(){Q&&K.adjust()};var V=null;window.onresize=function(){clearTimeout(V);V=setTimeout(function(){V=null;K.scheduleAdjust(true)},20)};window.onshow=function(){P=true;K.adjust()}}));
