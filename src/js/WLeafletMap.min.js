WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WLeafletMap",(function(e,a,t,n,o,i){a.wtObj&&a.wtObj.map.remove();a.wtObj=this;var r=this;e.WT;this.map=null;var p={},m=i,d=[n,o];this.addTileLayer=function(e,a){var t=JSON.parse(a);L.tileLayer(e,t).addTo(r.map)};this.zoom=function(e){m=e;r.map.setZoom(e)};this.panTo=function(e,a){d=[e,a];r.map.panTo([e,a])};this.addPolyline=function(e,a){var t=JSON.parse(a);L.polyline(e,t).addTo(r.map)};this.addCircle=function(e,a){var t=JSON.parse(a);L.circle(e,t).addTo(r.map)};this.addMarker=function(e,a){a.addTo(r.map);p[e]=a};this.removeMarker=function(e){var a=p[e];if(a){r.map.removeLayer(a);delete p[e]}};this.moveMarker=function(e,a){var t=p[e];t&&t.setLatLng(a)};this.wtResize=function(){r.map.invalidateSize()};a.wtEncodeValue=function(){var e=r.map.getCenter(),a=[e.lat,e.lng],t=r.map.getZoom();return JSON.stringify({position:a,zoom:t})};this.init=function(t,n,o){var i=JSON.parse(t);i.center=n;i.zoom=o;r.map=L.map(a,i);var p=parseInt(function(){for(var e=a.parentNode;e;){if(e.wtPopup)return e.style.zIndex;e=e.parentNode}return 0}(),10);if(p>0){r.map.getPane("tilePane").style.zIndex=p+200;r.map.getPane("overlayPane").style.zIndex=p+400;r.map.getPane("shadowPane").style.zIndex=p+500;r.map.getPane("markerPane").style.zIndex=p+600;r.map.getPane("tooltipPane").style.zIndex=p+650;r.map.getPane("popupPane").style.zIndex=p+700}r.map.on("zoomend",(function(){var t=r.map.getZoom();if(t!=m){e.emit(a,"zoomLevelChanged",t);m=t}}));r.map.on("moveend",(function(){var t=r.map.getCenter();if(t.lat!=d[0]||t.lng!=d[1]){e.emit(a,"panChanged",t.lat,t.lng);d=[t.lat,t.lng]}}))};this.init(t,[n,o],i)}));