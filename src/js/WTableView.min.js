WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTableView",(function(e,t,i,l,o,s,n){t.wtObj=this;var r=this,c=e.WT,a=$(document.body).hasClass("Wt-rtl");function d(e){return a?c.isGecko?-e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft}var h=0,f=0,u=0,p=0,g=0,m=0===l,v=!1,y=!1,T=0,N=0,w=0,b=0;this.onContentsContainerScroll=function(){N=o.scrollLeft=i.scrollLeft;T=s.scrollTop=i.scrollTop;i.clientWidth&&i.clientHeight&&0===g&&(i.scrollTop<u||i.scrollTop>p||i.scrollLeft<h||i.scrollLeft>f)&&e.emit(t,"scrolled",Math.round(d(i)),Math.round(i.scrollTop),Math.round(i.clientWidth),Math.round(i.clientHeight))};i.wtResize=function(i,o,s,n){if(!m){i.scrollTop=l;i.onscroll();m=!0}if(o-w>(f-h)/2||s-b>(p-u)/2){w=o;b=s;var r=i.clientHeight==i.firstChild.offsetHeight?-1:i.clientHeight;e.emit(t,"scrolled",Math.round(d(i)),Math.round(i.scrollTop),Math.round(i.clientWidth),Math.round(r))}};function x(e){for(var t=-1,i=-1,l=!1,o=!1,s=null,r=c.target(e);r;){var a=$(r);if(a.hasClass("Wt-tv-contents"))break;if(a.hasClass("Wt-tv-c")){"true"===r.getAttribute("drop")&&(o=!0);a.hasClass(n)&&(l=!0);s=r;t=1*(r=r.parentNode).className.split(" ")[0].substring(7);i=a.index();break}r=r.parentNode}return{columnId:t,rowIdx:i,selected:l,drop:o,el:s}}function C(){return c.pxself(i.firstChild,"lineHeight")}function W(e){var t,i,l=e.parentNode.childNodes;for(t=0,i=l.length;t<i;++t)if(l[t]==e)return t;return-1}var E,L=null;this.mouseDown=function(i,l){c.capture(null);var o=x(l);if(!l.ctrlKey&&!l.shiftKey){var s={ctrlKey:l.ctrlKey,shiftKey:l.shiftKey,target:l.target,srcElement:l.srcElement,type:l.type,which:l.which,touches:l.touches,changedTouches:l.changedTouches,pageX:l.pageX,pageY:l.pageY,clientX:l.clientX,clientY:l.clientY};L=setTimeout((function(){"true"===t.getAttribute("drag")&&function(e){return $(e.el).hasClass(n)}(o)&&e._p_.dragStart(t,s)}),400)}};this.mouseUp=function(e,t){clearTimeout(L)};this.resizeHandleMDown=function(l,n){var a=l.parentNode,d=-(c.pxself(a,"width")-1),h=1e4;if($(document.body).hasClass("Wt-rtl")){var f=d;d=-h;h=-f}new c.SizeHandle(c,"h",l.offsetWidth,t.offsetHeight,d,h,"Wt-hsh2",(function(l){!function(l,n){var a=$(document.body).hasClass("Wt-rtl");a&&(n=-n);var d=l.className.split(" ")[0],h=1*d.substring(7),f=l.parentNode,u=f.parentNode!==o,p=u?s.firstChild:i.firstChild,g=p.firstChild,m=$(p).find("."+d).get(0),v=l.nextSibling,y=m.nextSibling,T=c.pxself(l,"width")-1+n,N=c.pxself(f,"width")+n+"px";f.style.width=p.style.width=g.style.width=N;if(u){s.style.width=N;s.firstChild.style.width=N;i.style.left=N;o.style.left=N}l.style.width=T+1+"px";m.style.width=T+7+"px";e.layouts2.adjust(t.childNodes[0].id,[[1,1]]);for(;v;v=v.nextSibling)if(y){a?y.style.right=c.pxself(y,"right")+n+"px":y.style.left=c.pxself(y,"left")+n+"px";y=y.nextSibling}e.emit(t,"columnResized",h,parseInt(T));r.autoJavaScript()}(a,l)}),l,t,n,-2,-1)};var S=0;this.touchStart=function(e,t){x(t);if(!t.ctrlKey&&!t.shiftKey)t.ctrlKey,t.shiftKey,t.target,t.srcElement,t.type,t.which,t.touches,t.changedTouches,t.pageX,t.pageY,t.clientX,t.clientY;if(t.touches.length>1){clearTimeout(E);E=setTimeout((function(){k(e,t)}),1e3);S=t.touches.length}else{clearTimeout(E);E=setTimeout((function(){k(e,t)}),50);S=1}};function k(i,l){e.emit(t,{name:"itemTouchSelectEvent",eventObject:i,event:l})}this.touchMove=function(e,t){1==t.touches.length&&E&&clearTimeout(E)};this.touchEnd=function(e,t){E&&1!=S&&clearTimeout(E)};this.scrolled=function(e,t,i,l){h=e;f=t;u=i;p=l};this.resetScroll=function(){o.scrollLeft=N;i.scrollLeft=N;i.scrollTop=T;s.scrollTop=T};this.setScrollToPending=function(){g+=1};this.scrollToPx=function(e,t){T=t;N=e;this.resetScroll()};this.scrollTo=function(e,t,l){g>0&&(g-=1);if(-1!=t){var o=i.scrollTop,s=i.clientHeight;0==l&&(o+s<t?l=1:t<o&&(l=2));switch(l){case 1:i.scrollTop=t;break;case 2:i.scrollTop=t-(s-C());break;case 3:i.scrollTop=t-(s-C())/2}i.onscroll()}};this.setItemDropsEnabled=function(e){v=e};this.setRowDropsEnabled=function(e){y=e};function H(e,t,i){if(i){var l=document.createElement("div");l.className="Wt-drop-site-"+t;e.style.position="relative";e.appendChild(l);e.dropVisual=l}else{e.style.position="";e.dropVisual.remove();e.dropVisual=void 0}}function I(e,t,l){if(-1!=e){if("top"===t&&e>0){e-=1;t="bottom"}for(var s=i.firstChild.firstChild,n=0;n<s.childNodes.length;n++){col=s.childNodes[n];H(col.childNodes[e],t,l)}}else H(o,"bottom",l)}function M(){var e=i.firstChild.firstChild.firstChild;return e?e.childNodes.length:0}var K=null,R=null;t.handleDragDrop=function(i,l,o,s,n){if(K){K.className=K.classNameOrig;K=null}if(R){I(R.row,R.side,!1);R=null}if("end"!=i){var r=x(o);if(!r.selected&&r.drop&&v)if("drop"==i)e.emit(t,{name:"dropEvent",eventObject:l,event:o},r.rowIdx,r.columnId,s,n);else{l.className="Wt-valid-drop";(K=r.el).classNameOrig=K.className;K.className=K.className+" Wt-drop-site"}else if(!r.selected&&y){if(!r.columnId){r.el=null;r.rowIdx=-1}var a=r.rowIdx,d=r.columnId,h="bottom";if(r.el)h=c.widgetCoordinates(r.el,o).y-r.el.clientHeight/2<=0?"top":"bottom";if("drop"==i)e.emit(t,{name:"rowDropEvent",eventObject:l,event:o},a,d,s,n,h);else{l.className="Wt-valid-drop";I((R={row:r.el?a:M()-1,side:h}).row,R.side,!0)}}else l.className=""}};this.onkeydown=function(e){var t=e||window.event;if(9==t.keyCode){c.cancelEvent(t);if(!(u=x(t)).el)return;for(var i,l=u.el.parentNode,o=W(u.el),s=W(l),n=l.parentNode.childNodes.length,r=l.childNodes.length,a=t.shiftKey,d=!1,h=o;;){for(;a?h>=0:h<r;h=a?h-1:h+1){i=h!=o||d?a?n-1:0:a?s-1:s+1;for(;a?i>=0:i<n;i=a?i-1:i+1){if(h==o&&i==s)return;var f=(l=l.parentNode.childNodes[i]).childNodes[h];if((m=$(f).find(":input")).size()>0){setTimeout((function(){m.focus();m.select()}),0);return}}}h=a?r-1:0;d=!0}}else if(t.keyCode>=37&&t.keyCode<=40){var u,p=c.target(t);function g(e){return c.hasTag(e,"INPUT")&&"text"==e.type||c.hasTag(e,"TEXTAREA")}if(c.hasTag(p,"SELECT"))return;if(!(u=x(t)).el)return;l=u.el.parentNode,o=W(u.el),s=W(l),n=l.parentNode.childNodes.length,r=l.childNodes.length;switch(t.keyCode){case 39:if(g(p)){if(c.getSelectionRange(p).start!=p.value.length)return}s++;break;case 38:o--;break;case 37:if(g(p)){if(0!=c.getSelectionRange(p).start)return}s--;break;case 40:o++;break;default:return}c.cancelEvent(t);if(o>-1&&o<r&&s>-1&&s<n){var m,v=(l=l.parentNode.childNodes[s]).childNodes[o];if((m=$(v).find(":input")).size()>0){setTimeout((function(){m.focus()}),0);return}}}};this.autoJavaScript=function(){if(null!=t.parentNode){if(!c.isHidden(t)){if(!c.isIE&&(T!=i.scrollTop||N!=i.scrollLeft)){void 0===N?r&&c.isGecko?o.scrollLeft=i.scrollLeft=N=0:N=i.scrollLeft:o.scrollLeft=i.scrollLeft=N;s.scrollTop=i.scrollTop=T}var l=t.offsetWidth-c.px(t,"borderLeftWidth")-c.px(t,"borderRightWidth"),n=i.offsetWidth-i.clientWidth;if((l-=s.clientWidth)>200&&l!=i.tw){i.tw=l;i.style.width=l+"px";o.style.width=l-n+"px"}var r=$(document.body).hasClass("Wt-rtl");r?o.style.marginLeft=n+"px":o.style.marginRight=n+"px";var a=i.offsetHeight-i.clientHeight,d=s.style;if(d&&d.marginBottom!==a+"px"){d.marginBottom=a+"px";e.layouts2.adjust(t.childNodes[0].id,[[1,0]])}}}else{t=i=o=null;this.autoJavaScript=function(){}}}}));