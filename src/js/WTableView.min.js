WT_DECLARE_WT_MEMBER(1,"ctor.WTableView",function(o,i,e,p){function q(a){var b=-1,c=false,d=false,j=null;for(a=f.target(a);a;){var g=$(a);if(g.hasClass("Wt-tv-contents"))break;else if(g.hasClass("Wt-tv-c")){if(a.getAttribute("drop")==="true")d=true;if(g.hasClass("Wt-selected"))c=true;j=a;a=a.parentNode;b=a.className.split(" ")[0].substring(7)*1;break}a=a.parentNode}return{columnId:b,rowIdx:-1,selected:c,drop:d,el:j}}function t(){return f.pxself(e.firstChild,"lineHeight")}function r(a){var b,c,d=a.parentNode.childNodes;
b=0;for(c=d.length;b<c;++b)if(d[b]==a)return b;return-1}function y(a,b){var c=$(document.body).hasClass("Wt-rtl");if(c)b=-b;var d=a.className.split(" ")[0],j=d.substring(7)*1,g=p.firstChild,h=e.firstChild,k=h.firstChild;d=$(h).find("."+d).get(0);var m=a.nextSibling,l=d.nextSibling,s=f.pxself(a,"width")-1+b;g.style.width=h.style.width=k.style.width=f.pxself(g,"width")+b+"px";a.style.width=s+1+"px";for(d.style.width=s+7+"px";m;m=m.nextSibling)if(l){if(c)l.style.right=f.pxself(l,"right")+b+"px";else l.style.left=
f.pxself(l,"left")+b+"px";l=l.nextSibling}o.emit(i,"columnResized",j,parseInt(s))}jQuery.data(i,"obj",this);var f=o.WT,u=0,v=0,w=0,x=0;e.onscroll=function(){p.scrollLeft=e.scrollLeft;if(e.scrollTop<w||e.scrollTop>x||e.scrollLeft<u||e.scrollLeft>v)o.emit(i,"scrolled",e.scrollLeft,e.scrollTop,e.clientWidth,e.clientHeight)};this.mouseDown=function(a,b){f.capture(null);a=q(b);i.getAttribute("drag")==="true"&&a.selected&&o._p_.dragStart(i,b)};this.resizeHandleMDown=function(a,b){var c=a.parentNode.parentNode,
d=-(f.pxself(c,"width")-1),j=1E4;if($(document.body).hasClass("Wt-rtl")){var g=d;d=-j;j=-g}new f.SizeHandle(f,"h",a.offsetWidth,i.offsetHeight,d,j,"Wt-hsh",function(h){y(c,h)},a,i,b,-2,-1)};this.scrolled=function(a,b,c,d){u=a;v=b;w=c;x=d};this.scrollTo=function(a,b,c){if(b!=-1){a=e.scrollTop;var d=e.clientHeight;if(c==0)if(a+d<b)c=1;else if(b<a)c=2;switch(c){case 1:e.scrollTop=b;break;case 2:e.scrollTop=b-(d-t());break;case 3:e.scrollTop=b-(d-t())/2;break}e.onscroll()}};var n=null;i.handleDragDrop=
function(a,b,c,d,j){if(n){n.className=n.classNameOrig;n=null}if(a!="end"){var g=q(c);if(!g.selected&&g.drop)if(a=="drop")o.emit(i,{name:"dropEvent",eventObject:b,event:c},g.rowIdx,g.columnId,d,j);else{b.className="Wt-valid-drop";n=g.el;n.classNameOrig=n.className;n.className+=" Wt-drop-site"}else b.className=""}};i.onkeydown=function(a){var b=a||window.event;if(b.keyCode==9){f.cancelEvent(b);var c=q(b);if(c.el){a=c.el.parentNode;c=r(c.el);var d=r(a),j=a.parentNode.childNodes.length,g=a.childNodes.length;
b=b.shiftKey;for(var h=false,k=c,m;;){for(;b?k>=0:k<g;k=b?k-1:k+1)for(m=k==c&&!h?b?d-1:d+1:b?j-1:0;b?m>=0:m<j;m=b?m-1:m+1){if(k==c&&m==d)return;a=a.parentNode.childNodes[m];var l=$(a.childNodes[k]).find(":input");if(l.size()>0){setTimeout(function(){l.focus()},0);return}}k=b?g-1:0;h=true}}}else if(b.keyCode>=37&&b.keyCode<=40){h=f.target(b);if(h.nodeName!="select"){c=q(b);if(c.el){a=c.el.parentNode;c=r(c.el);d=r(a);j=a.parentNode.childNodes.length;g=a.childNodes.length;switch(b.keyCode){case 39:if(f.hasTag(h,
"INPUT")&&h.type=="text"){k=f.getSelectionRange(h);if(k.start!=h.value.length)return}d++;break;case 38:c--;break;case 37:if(f.hasTag(h,"INPUT")&&h.type=="text"){k=f.getSelectionRange(h);if(k.start!=0)return}d--;break;case 40:c++;break;default:return}f.cancelEvent(b);if(c>-1&&c<g&&d>-1&&d<j){a=a.parentNode.childNodes[d];l=$(a.childNodes[c]).find(":input");l.size()>0&&setTimeout(function(){l.focus()},0)}}}}};this.autoJavaScript=function(){if(i.parentNode==null){i=e=p=null;this.autoJavaScript=function(){}}else if(!f.isHidden(i)){var a=
i.offsetWidth-f.px(i,"borderLeftWidth")-f.px(i,"borderRightWidth"),b=e.offsetWidth-e.clientWidth;a-=b;if(a>200&&a!=e.tw){e.tw=a;e.style.width=a+b+"px";p.style.width=a+"px";if(!f.isIE)p.style.marginRight=b+"px"}}}});
