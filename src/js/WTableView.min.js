WT_DECLARE_WT_MEMBER(1,"WTableView",function(o,f,m,r){function p(a){var b=-1,c=false,d=false,h=null;for(a=a.target||a.srcElement;a;){var e=$(a);if(e.hasClass("Wt-tv-contents"))break;else if(e.hasClass("Wt-tv-c")){if(a.getAttribute("drop")==="true")d=true;if(e.hasClass("Wt-selected"))c=true;h=a;a=a.parentNode;b=a.className.split(" ")[0].substring(7)*1;break}a=a.parentNode}return{columnId:b,rowIdx:-1,selected:c,drop:d,el:h}}function q(a){var b,c,d=a.parentNode.childNodes;b=0;for(c=d.length;b<c;++b)if(d[b]==
a)return b;return-1}function s(a,b){var c=a.className.split(" ")[0],d=c.substring(7)*1,h=r.firstChild,e=m.firstChild;c=$(e).find("."+c).get(0);var k=a.nextSibling,g=c.nextSibling,j=i.pxself(a,"width")-1+b;h.style.width=e.style.width=i.pxself(h,"width")+b+"px";a.style.width=j+1+"px";for(c.style.width=j+7+"px";k;k=k.nextSibling){k.style.left=i.pxself(k,"left")+b+"px";if(g){g.style.left=i.pxself(g,"left")+b+"px";g=g.nextSibling}}o.emit(f,"columnResized",d,j)}jQuery.data(f,"obj",this);var i=o.WT;this.mouseDown=
function(a,b){i.capture(null);a=p(b);f.getAttribute("drag")==="true"&&a.selected&&o._p_.dragStart(f,b)};this.resizeHandleMDown=function(a,b){var c=a.parentNode.parentNode,d=-(i.pxself(c,"width")-1);new i.SizeHandle(i,"h",a.offsetWidth,f.offsetHeight,d,1E4,"Wt-hsh",function(h){s(c,h)},a,f,b,-2,-1)};var l=null;f.handleDragDrop=function(a,b,c,d,h){if(l){l.className=l.classNameOrig;l=null}if(a!="end"){var e=p(c);if(!e.selected&&e.drop)if(a=="drop")o.emit(f,{name:"dropEvent",eventObject:b,event:c},e.rowIdx,
e.columnId,d,h);else{b.className="Wt-valid-drop";l=e.el;l.classNameOrig=l.className;l.className+=" Wt-drop-site"}else b.className=""}};f.onkeydown=function(a){var b=a||window.event;if(b.keyCode==9){i.cancelEvent(b);var c=p(b);if(c.el){a=c.el.parentNode;c=q(c.el);var d=q(a),h=a.parentNode.childNodes.length,e=a.childNodes.length;b=b.shiftKey;for(var k=false,g=c,j;;){for(;b?g>=0:g<e;g=b?g-1:g+1)for(j=g==c&&!k?b?d-1:d+1:b?h-1:0;b?j>=0:j<h;j=b?j-1:j+1){if(g==c&&j==d)return;a=a.parentNode.childNodes[j];
var n=$(a.childNodes[g]).find(":input");if(n.size()>0){n.focus();return}}g=b?e-1:0;k=true}}}else if(b.keyCode>=37&&b.keyCode<=40){i.cancelEvent(b);c=p(b);if(c.el){a=c.el.parentNode;c=q(c.el);d=q(a);h=a.parentNode.childNodes.length;e=a.childNodes.length;switch(b.keyCode){case 39:d++;break;case 38:c--;break;case 37:d--;break;case 40:c++;break;default:return}if(c>-1&&c<e&&d>-1&&d<h){a=a.parentNode.childNodes[d];n=$(a.childNodes[c]).find(":input");n.size()>0&&n.focus()}}}};this.autoJavaScript=function(){if(f.parentNode==
null){f=m=r=null;this.autoJavaScript=function(){}}else if(!i.isHidden(f)){var a=f.offsetWidth-i.px(f,"borderLeftWidth")-i.px(f,"borderRightWidth"),b=m.offsetWidth-m.clientWidth;a-=b;if(a>200&&a!=m.tw){m.tw=a;m.style.width=a+b+"px";r.style.width=a+"px"}}}});
