WT_DECLARE_WT_MEMBER(2,JavaScriptConstructor,"ChartCommon",(function(t){var n=t.WT,r=this,i=n.gfxUtils,e=i.rect_top,f=i.rect_bottom,o=i.rect_left,u=i.rect_right,a=i.transform_mult;function h(t,n,r,i){var e=0;i&&(e=1);var f=n.length;function o(t){return r?n[t]:n[f-1-t]}function u(t){for(;2===o(t)[2]||3===o(t)[2];)t--;return t}var a=Math.floor(f/2);a=u(a);var h=0,s=f,l=!1;if(o(0)[e]>t)return r?-1:f;if(o(f-1)[e]<t)return r?f:-1;for(;!l;){var c=a+1;c<f&&(2===o(c)[2]||3===o(c)[2])&&(c+=2);if(o(a)[e]>t){s=a;a=u(a=Math.floor((s+h)/2))}else if(o(a)[e]===t)l=!0;else if(c<f&&o(c)[e]>t)l=!0;else if(c<f&&o(c)[e]===t){a=c;l=!0}else{h=a;a=u(a=Math.floor((s+h)/2))}}return r?a:f-1-a}function s(t,n){return n[0][t]<n[n.length-1][t]}this.findClosestPoint=function(t,n,r){var i=0;r&&(i=1);var e=s(i,n),f=h(t,n,e,r);f<0&&(f=0);if(f>=n.length)return[n[n.length-1][0],n[n.length-1][1]];f>=n.length&&(f=n.length-2);if(n[f][i]===t)return[n[f][0],n[f][1]];var o=e?f+1:f-1;e&&2==n[o][2]&&(o+=2);if(!e&&o<0)return[n[f][0],n[f][1]];!e&&o>0&&3==n[o][2]&&(o-=2);return Math.abs(t-n[f][i])<Math.abs(n[o][i]-t)?[n[f][0],n[f][1]]:[n[o][0],n[o][1]]};this.minMaxY=function(t,n){for(var r=n?0:1,i=t[0][r],e=t[0][r],f=1;f<t.length;++f)if(2!==t[f][2]&&3!==t[f][2]&&5!==t[f][2]){t[f][r]>e&&(e=t[f][r]);t[f][r]<i&&(i=t[f][r])}return[i,e]};this.projection=function(t,n){var r=Math.cos(t),i=Math.sin(t),e=r*r,f=i*i,o=r*i,u=-n[0]*r-n[1]*i;return[e,o,o,f,r*u+n[0],i*u+n[1]]};this.distanceSquared=function(t,n){var r=[n[0]-t[0],n[1]-t[1]];return r[0]*r[0]+r[1]*r[1]};this.distanceLessThanRadius=function(t,n,i){return i*i>=r.distanceSquared(t,n)};this.toZoomLevel=function(t){return Math.floor(Math.log(t)/Math.LN2+.5)+1};this.isPointInRect=function(t,n){var r,i;if(void 0!==t.x){r=t.x;i=t.y}else{r=t[0];i=t[1]}return r>=o(n)&&r<=u(n)&&i>=e(n)&&i<=f(n)};this.toDisplayCoord=function(t,n,r,i,e){var f,o;if(r){f=[(t[0]-e[0])/e[2],(t[1]-e[1])/e[3]];o=[i[0]+f[1]*i[2],i[1]+f[0]*i[3]]}else{f=[(t[0]-e[0])/e[2],1-(t[1]-e[1])/e[3]];o=[i[0]+f[0]*i[2],i[1]+f[1]*i[3]]}return a(n,o)};this.findYRange=function(t,n,i,u,a,l,c,m,g){if(0!==t.length){var v,d,M,x,b,y,C=r.toDisplayCoord([i,0],[1,0,0,1,0,0],a,l,c),_=r.toDisplayCoord([u,0],[1,0,0,1,0,0],a,l,c),p=a?1:0,R=a?0:1,D=s(p,t),E=h(C[p],t,D,a),L=h(_[p],t,D,a),O=1/0,T=-1/0,A=E===L&&E===t.length||-1===E&&-1===L;if(!A){D?E<0?E=0:t[++E]&&2===t[E][2]&&(E+=2):E>=t.length-1&&(E=t.length-2);!D&&L<0&&(L=0);for(v=Math.min(E,L);v<=Math.max(E,L)&&v<t.length;++v)if(2!==t[v][2]&&3!==t[v][2]){t[v][R]<O&&(O=t[v][R]);t[v][R]>T&&(T=t[v][R])}if(D&&E>0||!D&&E<t.length-1){D?t[x=E-1]&&3===t[x][2]&&(x-=2):t[x=E+1]&&2===t[x][2]&&(x+=2);d=(C[p]-t[x][p])/(t[E][p]-t[x][p]);(M=t[x][R]+d*(t[E][R]-t[x][R]))<O&&(O=M);M>T&&(T=M)}if(D&&L<t.length-1||!D&&L>0){D?2===t[b=L+1][2]&&(b+=2):3===t[b=L-1][2]&&(b-=2);d=(_[p]-t[L][p])/(t[b][p]-t[L][p]);(M=t[L][R]+d*(t[b][R]-t[L][R]))<O&&(O=M);M>T&&(T=M)}}var P=c[2]/(u-i),S=a?2:3;if(!A){y=l[S]/(T-O);10;(y=l[S]/(l[S]/y+20))>g.y[n]&&(y=g.y[n]);y<m.y[n]&&(y=m.y[n])}return{xZoom:P,yZoom:y,panPoint:a?[C[1]-e(l),A?0:(O+T)/2-l[2]/y/2-o(l)]:[C[0]-o(l),A?0:-((O+T)/2+l[3]/y/2-f(l))]}}};this.matchXAxis=function(t,n,r,i,a){function h(t){return i[t].side}function s(t){return i[t].width}function l(t){return i[t].minOffset}function c(t){return i[t].maxOffset}if(a){if(n<e(r)||n>f(r))return-1}else if(t<o(r)||t>u(r))return-1;for(var m=0;m<i.length;++m)if(a){if(("min"===h(m)||"both"===h(m))&&t>=o(r)-l(m)-s(m)&&t<=o(r)-l(m))return m;if(("max"===h(m)||"both"===h(m))&&t>=u(r)+c(m)&&t<=u(r)+c(m)+s(m))return m}else{if(("min"===h(m)||"both"===h(m))&&n<=f(r)+l(m)+s(m)&&n>=f(r)+l(m))return m;if(("max"===h(m)||"both"===h(m))&&n<=e(r)-c(m)&&n>=e(r)-c(m)-s(m))return m}return-1};this.matchYAxis=function(t,n,r,i,a){function h(t){return i[t].side}function s(t){return i[t].width}function l(t){return i[t].minOffset}function c(t){return i[t].maxOffset}if(a){if(t<o(r)||t>u(r))return-1}else if(n<e(r)||n>f(r))return-1;for(var m=0;m<i.length;++m)if(a){if(("min"===h(m)||"both"===h(m))&&n>=e(r)-l(m)-s(m)&&n<=e(r)-l(m))return m;if(("max"===h(m)||"both"===h(m))&&n>=f(r)+c(m)&&n<=f(r)+c(m)+s(m))return m}else{if(("min"===h(m)||"both"===h(m))&&t>=o(r)-l(m)-s(m)&&t<=o(r)-l(m))return m;if(("max"===h(m)||"both"===h(m))&&t>=u(r)+c(m)&&t<=u(r)+c(m)+s(m))return m}return-1}}));