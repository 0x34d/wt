WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WCartesianChart",function(G,z,w,d){function S(){return d.crosshair||d.followCurve!==-1}function la(a){return a.pointerType===2||a.pointerType===3||a.pointerType==="pen"||a.pointerType==="touch"}function k(a){if(a===h)return d.xTransform;if(a===g)return d.yTransform}function ca(){if(d.isHorizontal){var a=m(d.area),b=p(d.area);return x([0,1,1,0,a,b],x(k(h),x(k(g),[0,1,1,0,-b,-a])))}else{a=m(d.area);b=q(d.area);return x([1,0,0,-1,a,b],x(k(h),x(k(g),[1,0,
0,-1,-a,b])))}}function C(){return x(ca(),d.area)}function T(a,b){if(b===undefined)b=false;a=b?a:x(ma(ca()),a);a=[(a[h]-d.area[0])/d.area[2],1-(a[g]-d.area[1])/d.area[3]];return[d.modelArea[0]+a[h]*d.modelArea[2],d.modelArea[1]+a[g]*d.modelArea[3]]}function P(a,b){if(b===undefined)b=false;a=[(a[h]-d.modelArea[0])/d.modelArea[2],1-(a[g]-d.modelArea[1])/d.modelArea[3]];a=[d.area[0]+a[h]*d.area[2],d.area[1]+a[g]*d.area[3]];return b?a:x(ca(),a)}function za(a,b){var f=h;if(d.isHorizontal)f=g;var e=na(a,
b);if(e<0)e=0;if(e>=b.length)e=b.length-2;if(b[e][f]===a)return[b[e][h],b[e][g]];var i=e+1;if(b[i][2]==U)i+=2;return a-b[e][f]<b[i][f]-a?[b[e][h],b[e][g]]:[b[i][h],b[i][g]]}function na(a,b){function f(s){b[s][2]===oa&&--s;b[s][2]===U&&--s;return s}var e=h;if(d.isHorizontal)e=g;var i=b.length,j=Math.floor(i/2);j=f(j);var t=0,n=i,y=false;if(b[0][e]>a)return-1;if(b[i-1][e]<a)return i;for(;!y;){i=j+1;if(b[i][2]===U)i+=2;if(b[j][e]>a){n=j;j=Math.floor((n+t)/2);j=f(j)}else if(b[j][e]===a)y=true;else if(b[i][e]>
a)y=true;else if(b[i][e]===a){j=i;y=true}else{t=j;j=Math.floor((n+t)/2);j=f(j)}}return j}function da(){var a=(T([m(d.area),0])[0]-d.modelArea[0])/d.modelArea[2],b=(T([o(d.area),0])[0]-d.modelArea[0])/d.modelArea[2],f;for(f=0;f<d.sliders.length;++f){var e=$("#"+d.sliders[f]);if(e)(e=e.data("sobj"))&&e.changeRange(a,b)}}function V(){K&&ea(function(){w.repaint();S()&&pa()})}function pa(){if(K){var a=E.getContext("2d");a.clearRect(0,0,E.width,E.height);a.save();a.beginPath();a.moveTo(m(d.area),p(d.area));
a.lineTo(o(d.area),p(d.area));a.lineTo(o(d.area),q(d.area));a.lineTo(m(d.area),q(d.area));a.closePath();a.clip();var b=x(ma(ca()),r),f=r[h],e=r[g];if(d.followCurve!==-1){b=za(d.isHorizontal?b[g]:b[h],d.series[d.followCurve]);e=x(ca(),b);f=e[h];e=e[g];r[h]=f;r[g]=e}b=d.isHorizontal?[(b[g]-d.area[1])/d.area[3],(b[h]-d.area[0])/d.area[2]]:[(b[h]-d.area[0])/d.area[2],1-(b[g]-d.area[1])/d.area[3]];b=[d.modelArea[0]+b[h]*d.modelArea[2],d.modelArea[1]+b[g]*d.modelArea[3]];a.font="16px sans-serif";a.textAlign=
"right";a.textBaseline="top";var i=b[0].toFixed(2);b=b[1].toFixed(2);if(i=="-0.00")i="0.00";if(b=="-0.00")b="0.00";a.fillText("("+i+","+b+")",o(d.area)-5,p(d.area)+5);a.setLineDash&&a.setLineDash([1,2]);a.beginPath();a.moveTo(Math.floor(f)+0.5,Math.floor(p(d.area))+0.5);a.lineTo(Math.floor(f)+0.5,Math.floor(q(d.area))+0.5);a.moveTo(Math.floor(m(d.area))+0.5,Math.floor(e)+0.5);a.lineTo(Math.floor(o(d.area))+0.5,Math.floor(e)+0.5);a.stroke();a.restore()}}function W(a,b){var f;if(a.x!==undefined){f=
a.x;a=a.y}else{f=a[0];a=a[1]}return f>=m(b)&&f<=o(b)&&a>=p(b)&&a<=q(b)}function Aa(a){return p(a)<=p(d.area)+ga&&q(a)>=q(d.area)-ga&&m(a)<=m(d.area)+ga&&o(a)>=o(d.area)-ga}function H(a){var b=C();if(d.isHorizontal)if(a===X)a=Y;else if(a===Y)a=X;if(a===undefined||a===X)if(k(h)[0]<1){k(h)[0]=1;b=C()}if(a===undefined||a===Y)if(k(g)[3]<1){k(g)[3]=1;b=C()}if(a===undefined||a===X){if(m(b)>m(d.area)){b=m(d.area)-m(b);if(d.isHorizontal)k(g)[5]=k(g)[5]+b;else k(h)[4]=k(h)[4]+b;b=C()}if(o(b)<o(d.area)){b=o(d.area)-
o(b);if(d.isHorizontal)k(g)[5]=k(g)[5]+b;else k(h)[4]=k(h)[4]+b;b=C()}}if(a===undefined||a===Y){if(p(b)>p(d.area)){b=p(d.area)-p(b);if(d.isHorizontal)k(h)[4]=k(h)[4]+b;else k(g)[5]=k(g)[5]-b;b=C()}if(q(b)<q(d.area)){b=q(d.area)-q(b);if(d.isHorizontal)k(h)[4]=k(h)[4]+b;else k(g)[5]=k(g)[5]-b;C()}}}function Ba(){if(E===undefined&&S()){c=document.createElement("canvas");c.setAttribute("width",w.canvas.width);c.setAttribute("height",w.canvas.height);c.style.position="absolute";c.style.display="block";
c.style.left="0";c.style.top="0";c.style.msTouchAction="none";w.canvas.parentNode.appendChild(c);E=c;jQuery.data(z,"oobj",E)}else if(E!==undefined&&!S()){E.parentNode.removeChild(E);jQuery.removeData(z,"oobj");E=undefined}if(r===null)r=P([(m(d.modelArea)+o(d.modelArea))/2,(p(d.modelArea)+q(d.modelArea))/2])}function Ca(a,b){var f=Math.cos(a);a=Math.sin(a);var e=f*a,i=-b[0]*f-b[1]*a;return[f*f,e,e,a*a,f*i+b[0],a*i+b[1]]}function Da(a,b,f){a=[b[h]-a[h],b[g]-a[g]];return f*f>=a[h]*a[h]+a[g]*a[g]}function qa(a,
b){if(Z){var f=Date.now();if(b===undefined)b=f-I;var e={x:0,y:0},i=C(),j=Ea;if(b>2*fa){K=false;var t=Math.floor(b/fa-1),n;for(n=0;n<t;++n){qa(a,fa);if(!Z){K=true;V();return}}b-=t*fa;K=true}if(l.x===Infinity||l.x===-Infinity)l.x=l.x>0?M:-M;if(isFinite(l.x)){l.x/=1+va*b;i[0]+=l.x*b;if(m(i)>m(d.area)){l.x+=-j*(m(i)-m(d.area))*b;l.x*=0.7}else if(o(i)<o(d.area)){l.x+=-j*(o(i)-o(d.area))*b;l.x*=0.7}if(Math.abs(l.x)<ra)if(m(i)>m(d.area))l.x=ra;else if(o(i)<o(d.area))l.x=-ra;if(Math.abs(l.x)>M)l.x=(l.x>0?
1:-1)*M;e.x=l.x*b}if(l.y===Infinity||l.y===-Infinity)l.y=l.y>0?M:-M;if(isFinite(l.y)){l.y/=1+va*b;i[1]+=l.y*b;if(p(i)>p(d.area)){l.y+=-j*(p(i)-p(d.area))*b;l.y*=0.7}else if(q(i)<q(d.area)){l.y+=-j*(q(i)-q(d.area))*b;l.y*=0.7}if(Math.abs(l.y)<0.001)if(p(i)>p(d.area))l.y=0.001;else if(q(i)<q(d.area))l.y=-0.001;if(Math.abs(l.y)>M)l.y=(l.y>0?1:-1)*M;e.y=l.y*b}i=C();N(e,aa);a=C();if(m(i)>m(d.area)&&m(a)<=m(d.area)){l.x=0;N({x:-e.x,y:0},aa);H(X)}if(o(i)<o(d.area)&&o(a)>=o(d.area)){l.x=0;N({x:-e.x,y:0},
aa);H(X)}if(p(i)>p(d.area)&&p(a)<=p(d.area)){l.y=0;N({x:0,y:-e.y},aa);H(Y)}if(q(i)<q(d.area)&&q(a)>=q(d.area)){l.y=0;N({x:0,y:-e.y},aa);H(Y)}if(Math.abs(l.x)<wa&&Math.abs(l.y)<wa&&Aa(a)){H();Z=false;A=null;l.x=0;l.y=0;I=null;u=[]}else{I=f;K&&ea(qa)}}}function xa(a){return Math.floor(Math.log(a)/Math.LN2+0.5)+1}function ha(){var a,b,f=xa(k(h)[0])-1;if(f>=d.pens.x.length)f=d.pens.x.length-1;for(a=0;a<d.pens.x.length;++a)if(f===a)for(b=0;b<d.pens.x[a].length;++b)d.pens.x[a][b].color[3]=d.penAlpha.x[b];
else for(b=0;b<d.pens.x[a].length;++b)d.pens.x[a][b].color[3]=0;f=xa(k(g)[3])-1;if(f>=d.pens.y.length)f=d.pens.y.length-1;for(a=0;a<d.pens.y.length;++a)if(f===a)for(b=0;b<d.pens.y[a].length;++b)d.pens.y[a][b].color[3]=d.penAlpha.y[b];else for(b=0;b<d.pens.y[a].length;++b)d.pens.y[a][b].color[3]=0}function N(a,b){var f=T(r);if(d.isHorizontal)a={x:a.y,y:-a.x};if(b&aa){k(h)[4]=k(h)[4]+a.x;k(g)[5]=k(g)[5]-a.y}else if(b&ya){b=C();if(m(b)>m(d.area)){if(a.x>0)a.x/=1+(m(b)-m(d.area))*ia}else if(o(b)<o(d.area))if(a.x<
0)a.x/=1+(o(d.area)-o(b))*ia;if(p(b)>p(d.area)){if(a.y>0)a.y/=1+(p(b)-p(d.area))*ia}else if(q(b)<q(d.area))if(a.y<0)a.y/=1+(q(d.area)-q(b))*ia;k(h)[4]=k(h)[4]+a.x;k(g)[5]=k(g)[5]-a.y;r[h]+=a.x;r[g]+=a.y}else{k(h)[4]=k(h)[4]+a.x;k(g)[5]=k(g)[5]-a.y;r[h]+=a.x;r[g]+=a.y;H()}a=P(f);r[h]=a[h];r[g]=a[g];V();da()}function sa(a,b,f){var e=T(r),i;i=d.isHorizontal?[a.y-p(d.area),a.x-m(d.area)]:x(ma([1,0,0,-1,m(d.area),q(d.area)]),[a.x,a.y]);a=i[0];i=i[1];var j=Math.pow(1.2,d.isHorizontal?f:b);b=Math.pow(1.2,
d.isHorizontal?b:f);if(k(h)[0]*j>d.maxZoom[h])j=d.maxZoom[h]/k(h)[0];if(j<1||k(h)[0]!==d.maxZoom[h])ja(k(h),x([j,0,0,1,a-j*a,0],k(h)));if(k(g)[3]*b>d.maxZoom[g])b=d.maxZoom[g]/k(g)[3];if(b<1||k(g)[3]!==d.maxZoom[g])ja(k(g),x([1,0,0,b,0,i-b*i],k(g)));H();e=P(e);r[h]=e[h];r[g]=e[g];ha();V();da()}var fa=17,ea=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,fa)}}();w.canvas.style.msTouchAction="none";
var U=2,oa=3,aa=1,ya=2,X=1,Y=2,h=0,g=1,J=false;if(!window.TouchEvent&&(window.MSPointerEvent||window.PointerEvent))(function(){function a(){if(pointers.length>0&&!J)J=true;else if(pointers.length<=0&&J)J=false}function b(i){if(la(i)){i.preventDefault();pointers.push(i);a();ba.touchStart(z,{touches:pointers.slice(0)})}}function f(i){if(J)if(la(i)){i.preventDefault();var j;for(j=0;j<pointers.length;++j)if(pointers[j].pointerId===i.pointerId){pointers.splice(j,1);break}a();ba.touchEnd(z,{touches:pointers.slice(0),
changedTouches:[]})}}function e(i){if(la(i)){i.preventDefault();var j;for(j=0;j<pointers.length;++j)if(pointers[j].pointerId===i.pointerId){pointers[j]=i;break}a();ba.touchMoved(z,{touches:pointers.slice(0)})}}pointers=[];if(window.PointerEvent){z.addEventListener("pointerdown",b);z.addEventListener("pointerup",f);z.addEventListener("pointerout",f);z.addEventListener("pointermove",e)}else{z.addEventListener("MSPointerDown",b);z.addEventListener("MSPointerUp",f);z.addEventListener("MSPointerOut",f);
z.addEventListener("MSPointerMove",e)}})();var va=0.003,Ea=2.0E-4,ia=0.07,ga=3,ra=0.001,M=1.5,wa=0.02;jQuery.data(z,"cobj",this);var ba=this,v=G.WT;ba.config=d;var E=jQuery.data(z,"oobj"),r=null,K=true,A=null,u=[],Q=false,O=false,D=null,ta=null,ua=null,l={x:0,y:0},I=null,ka=null;G=v.gfxUtils;var x=G.transform_mult,ma=G.transform_inverted,ja=G.transform_assign,p=G.rect_top,q=G.rect_bottom,m=G.rect_left,o=G.rect_right,Z=false;this.mouseMove=function(a,b){setTimeout(function(){if(!J){var f=v.widgetCoordinates(w.canvas,
b);if(W(f,d.area))if(S()&&K){r=[f.x,f.y];ea(pa)}}},0)};this.mouseDown=function(a,b){if(!J){a=v.widgetCoordinates(w.canvas,b);if(W(a,d.area))A=a}};this.mouseUp=function(){J||(A=null)};this.mouseDrag=function(a,b){if(!J)if(A!==null){a=v.widgetCoordinates(w.canvas,b);if(W(a,d.area)){v.buttons===1&&d.pan&&N({x:a.x-A.x,y:a.y-A.y});A=a}}};this.mouseWheel=function(a,b){var f=v.widgetCoordinates(w.canvas,b);if(W(f,d.area)){a=v.normalizeWheel(b);if(!b.ctrlKey&&d.pan){f=k(h)[4];var e=k(g)[5];N({x:-a.pixelX,
y:-a.pixelY});if(f!==k(h)[4]||e!==k(g)[5])v.cancelEvent(b)}else if(b.ctrlKey&&d.zoom){v.cancelEvent(b);e=-a.spinY;if(e===0)e=-a.spinX;if(b.shiftKey&&!b.altKey)sa(f,0,e);else b.altKey&&!b.shiftKey?sa(f,e,0):sa(f,e,e)}}};this.touchStart=function(a,b){Q=b.touches.length===1;O=b.touches.length===2;if(Q){Z=false;a=v.widgetCoordinates(w.canvas,b.touches[0]);if(!W(a,d.area))return;ka=S()&&Da(r,[a.x,a.y],30)?1:0;I=Date.now();A=a;v.capture(null);v.capture(w.canvas)}else if(O&&d.zoom){Z=false;u=[v.widgetCoordinates(w.canvas,
b.touches[0]),v.widgetCoordinates(w.canvas,b.touches[1])].map(function(e){return[e.x,e.y]});if(!u.every(function(e){return W(e,d.area)})){O=null;return}v.capture(null);v.capture(w.canvas);D=Math.atan2(u[1][1]-u[0][1],u[1][0]-u[0][0]);ta=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2];a=Math.abs(Math.sin(D));var f=Math.abs(Math.cos(D));D=a<Math.sin(0.125*Math.PI)?0:f<Math.cos(0.375*Math.PI)?Math.PI/2:Math.tan(D)>0?Math.PI/4:-Math.PI/4;ua=Ca(D,ta)}else return;b.preventDefault&&b.preventDefault()};this.touchEnd=
function(a,b){var f=Array.prototype.slice.call(b.touches),e=f.length===0;Q=f.length===1;O=f.length===2;e||function(){var i;for(i=0;i<b.changedTouches.length;++i)(function(){for(var j=b.changedTouches[i].identifier,t=0;t<f.length;++t)if(f[t].identifier===j){f.splice(t,1);return}})()}();e=f.length===0;Q=f.length===1;O=f.length===2;if(e){if(ka===0&&(isFinite(l.x)||isFinite(l.y))&&d.rubberBand){I=Date.now();Z=true;ea(qa)}else{ba.mouseUp(null,null);f=[];ua=ta=D=null;if(I!=null){Date.now();I=null}}ka=null}else if(Q||
O)ba.touchStart(a,b)};this.touchMoved=function(a,b){if(Q||O)if(Q){if(A!==null){a=v.widgetCoordinates(w.canvas,b.touches[0]);var f=Date.now(),e={x:a.x-A.x,y:a.y-A.y},i=f-I;I=f;if(ka===1){r[h]+=e.x;r[g]+=e.y;S()&&K&&ea(pa)}else if(d.pan){if(a.x<d.area[0]||a.x>d.area[0]+d.area[2]){l={x:0,y:0};return}if(a.y<d.area[1]||a.y>d.area[1]+d.area[3]){l={x:0,y:0};return}l.x=e.x/i;l.y=e.y/i;N(e,d.rubberBand?ya:0)}b.preventDefault&&b.preventDefault();A=a}}else if(O&&d.zoom){b.preventDefault&&b.preventDefault();
a=T(r);var j=(u[0][0]+u[1][0])/2,t=(u[0][1]+u[1][1])/2;b=[v.widgetCoordinates(w.canvas,b.touches[0]),v.widgetCoordinates(w.canvas,b.touches[1])].map(function(F){return D===0?[F.x,t]:D===Math.PI/2?[j,F.y]:x(ua,[F.x,F.y])});f=Math.abs(u[1][0]-u[0][0]);e=Math.abs(b[1][0]-b[0][0]);var n=f>0?e/f:1;if(e===f||D===Math.PI/2)n=1;var y=(b[0][0]+b[1][0])/2;f=Math.abs(u[1][1]-u[0][1]);e=Math.abs(b[1][1]-b[0][1]);var s=f?e/f:1;if(e===f||D===0)s=1;var B=(b[0][1]+b[1][1])/2;d.isHorizontal&&function(){var F=n;n=
s;s=F;F=y;y=B;B=F;F=j;j=t;t=F}();if(k(h)[0]*n>d.maxZoom[h])n=d.maxZoom[h]/k(h)[0];if(k(g)[3]*s>d.maxZoom[g])s=d.maxZoom[g]/k(g)[3];if(n!==1&&(n<1||k(h)[0]!==d.maxZoom[h]))ja(k(h),x([n,0,0,1,-n*j+y,0],k(h)));if(s!==1&&(s<1||k(g)[3]!==d.maxZoom[g]))ja(k(g),x([1,0,0,s,0,-s*t+B],k(g)));H();a=P(a);r[h]=a[h];r[g]=a[g];u=b;ha();V();da()}};this.setXRange=function(a,b,f){b=d.modelArea[0]+d.modelArea[2]*b;f=d.modelArea[0]+d.modelArea[2]*f;if(b<m(d.modelArea))b=m(d.modelArea);if(f>o(d.modelArea))f=o(d.modelArea);
var e=d.series[a];if(e.length!==0){a=P([b,0],true);var i=P([f,0],true),j=na(a[h],e);if(j<0)j=0;else{j++;if(e[j][2]===U)j+=2}var t=na(i[h],e),n,y,s=Infinity,B=-Infinity;for(n=j;n<=t&&n<e.length;++n)if(e[n][2]!==U&&e[n][2]!==oa){if(e[n][g]<s)s=e[n][g];if(e[n][g]>B)B=e[n][g]}if(j>0){y=j-1;if(e[y][2]===oa)y-=2;n=(a[h]-e[y][h])/(e[j][h]-e[y][h]);j=e[y][g]+n*(e[j][g]-e[y][g]);if(j<s)s=j;if(j>B)B=j}if(t<e.length-1){j=t+1;if(e[j][2]===U)j+=2;n=(i[h]-e[t][h])/(e[j][h]-e[t][h]);j=e[t][g]+n*(e[j][g]-e[t][g]);
if(j<s)s=j;if(j>B)B=j}b=d.modelArea[2]/(f-b);f=d.area[3]/(B-s);f=d.area[3]/(d.area[3]/f+20);if(f>d.maxZoom[g])f=d.maxZoom[g];a=[a[h]-m(d.area),-((s+B)/2+d.area[3]/f/2-q(d.area))];s=T(r);k(h)[0]=b;k(g)[3]=f;k(h)[4]=-a[h]*b;k(g)[5]=-a[g]*f;a=P(s);r[h]=a[h];r[g]=a[g];H();ha();V();da()}};this.getSeries=function(a){return d.series[a]};this.rangeChangedCallbacks=[];this.updateConfig=function(a){for(var b in a)if(a.hasOwnProperty(b))d[b]=a[b];Ba();ha();V();da()};this.updateConfig({})});
