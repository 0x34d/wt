WT_DECLARE_WT_MEMBER_BIG(1,JavaScriptConstructor,"WCartesianChart",(function(t,e,n,o){e.wtCObj=this;var i=this,r=t.WT;i.config=o;var a=r.gfxUtils,f=a.transform_mult,u=a.transform_inverted,s=a.transform_assign,l=a.transform_equal,c=a.transform_apply,v=a.rect_top,p=a.rect_bottom,x=a.rect_left,y=a.rect_right,d=a.rect_intersection,h=r.chartCommon,m=h.minMaxY,w=h.findClosestPoint,T=h.projection,M=h.distanceLessThanRadius,g=h.toZoomLevel,b=h.isPointInRect,E=h.findYRange,P=function(t,e){return h.matchXAxis(t,e,j(),o.xAxes,I())},C=function(t,e){return h.matchYAxis(t,e,j(),o.yAxes,I())};function O(t){return void 0===t}function A(t,e){var n,i=(n=t,o.xModelAreas[n]),r=function(t){return o.yModelAreas[t]}(e);return I()?[r[0],i[1],r[2],i[3]]:[i[0],r[1],i[2],r[3]]}function D(){return o.followCurve}function S(){return o.crosshair||-1!==D()}function I(){return o.isHorizontal}function L(t){return o.xTransforms[t]}function _(t){return o.yTransforms[t]}function j(){return o.area}function R(){return o.insideArea}function U(t){return O(t)?o.series:o.series[t]}function F(t){return U(t).transform}function Y(t){return I()?f([0,1,1,0,0,0],f(F(t),[0,1,1,0,0,0])):F(t)}function Z(t){return U(t).curve}function k(t){return U(t).xAxis}function X(t){return U(t).yAxis}function W(){return o.seriesSelection}function z(){return o.sliders}function B(){return o.hasToolTips}function N(){return o.coordinateOverlayPadding}function q(){return o.curveManipulation}function K(t){return o.minZoom.x[t]}function H(t){return o.minZoom.y[t]}function G(t){return o.maxZoom.x[t]}function J(t){return o.maxZoom.y[t]}function Q(){return o.pens}function V(){return o.penAlpha}function $(){return o.selectedCurve}function tt(t){t.preventDefault&&t.preventDefault()}function et(t,n){e.addEventListener(t,n)}function nt(t,n){e.removeEventListener(t,n)}function ot(t){return t.length}function it(){return ot(o.xAxes)}function rt(){return ot(o.yAxes)}function at(){return o.crosshairXAxis}function ft(){return o.crosshairYAxis}var ut=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,17)},st=!1,lt=function(t){if(!st){st=!0;ut((function(){t();st=!1}))}};if(window.MSPointerEvent||window.PointerEvent){e.style.touchAction="none";n.canvas.style.msTouchAction="none";n.canvas.style.touchAction="none"}var ct=.07,vt=.001,pt=1.5,xt=e.wtEObj2;xt||((xt={}).contextmenuListener=function(t){tt(t);nt("contextmenu",xt.contextmenuListener)});e.wtEObj2=xt;var yt={};function dt(t){return 2===t.pointerType||3===t.pointerType||"pen"===t.pointerType||"touch"===t.pointerType}var ht=!1;(window.MSPointerEvent||window.PointerEvent)&&function(){var t=[];function n(){ht=ot(t)>0}function o(o){if(dt(o)){tt(o);t.push(o);n();yt.start(e,{touches:t.slice(0)})}}function i(o){if(ht&&dt(o)){tt(o);var i;for(i=0;i<ot(t);++i)if(t[i].pointerId===o.pointerId){t.splice(i,1);break}n();yt.end(e,{touches:t.slice(0),changedTouches:[]})}}function r(o){if(dt(o)){tt(o);var i;for(i=0;i<ot(t);++i)if(t[i].pointerId===o.pointerId){t[i]=o;break}n();yt.moved(e,{touches:t.slice(0)})}}var a=e.wtEObj;if(a)if(window.PointerEvent){nt("pointerdown",a.pointerDown);nt("pointerup",a.pointerUp);nt("pointerout",a.pointerUp);nt("pointermove",a.pointerMove)}else{nt("MSPointerDown",a.pointerDown);nt("MSPointerUp",a.pointerUp);nt("MSPointerOut",a.pointerUp);nt("MSPointerMove",a.pointerMove)}e.wtEObj={pointerDown:o,pointerUp:i,pointerMove:r};if(window.PointerEvent){et("pointerdown",o);et("pointerup",i);et("pointerout",i);et("pointermove",r)}else{et("MSPointerDown",o);et("MSPointerUp",i);et("MSPointerOut",i);et("MSPointerMove",r)}}();var mt=e.wtOObj,wt=null,Tt=!0,Mt=null,gt=-1,bt=-1,Et=[],Pt=!1,Ct=!1,Ot=null,At=null,Dt=null,St={x:0,y:0},It=null,Lt=null,_t=e.wtTObj;if(!_t){_t={overTooltip:!1};e.wtTObj=_t}function jt(){if(_t){if(_t.tooltipTimeout){clearTimeout(_t.tooltipTimeout);_t.tooltipTimeout=null}if(!_t.overTooltip&&_t.tooltipOuterDiv){document.body.removeChild(_t.tooltipOuterDiv);_t.toolTipEl=null;_t.tooltipOuterDiv=null}}}for(var Rt=null,Ut=!1,Ft=null,Yt=[],Zt=0;Zt<it();++Zt){Yt.push([0,0,0,0,0,0]);s(Yt[Zt],L(Zt))}var kt=[];for(Zt=0;Zt<rt();++Zt){kt.push([0,0,0,0,0,0]);s(kt[Zt],_(Zt))}function Xt(){if(function(){for(var t=0;t<it();++t)if(o.notifyTransform.x[t])return!0;for(t=0;t<rt();++t)if(o.notifyTransform.y[t])return!0;return!1}()){if(Ft){window.clearTimeout(Ft);Ft=null}Ft=setTimeout((function(){for(var e=0;e<it();++e)if(o.notifyTransform.x[e]&&!l(Yt[e],L(e))){t.emit(n.widget,"xTransformChanged"+e);s(Yt[e],L(e))}for(e=0;e<rt();++e)if(o.notifyTransform.y[e]&&!l(kt[e],_(e))){t.emit(n.widget,"yTransformChanged"+e);s(kt[e],_(e))}}),250)}}var Wt=function(t,e){s(t,e);Xt()};function zt(t,e){void 0===t&&(t=0);void 0===e&&(e=0);var n,o,i;if(I()){n=x(j());i=v(j());return f([0,1,1,0,n,i],f(L(t),f(_(e),[0,1,1,0,-i,-n])))}n=x(j());o=p(j());return f([1,0,0,-1,n,o],f(L(t),f(_(e),[1,0,0,-1,-n,o])))}n.combinedTransform=zt;function Bt(t,e){return f(zt(t,e),R())}function Nt(t,e,n,o){O(o)&&(o=!1);var i,r;i=o?t:f(u(zt(e,n)),t);r=I()?[(i[1]-j()[1])/j()[3],(i[0]-j()[0])/j()[2]]:[(i[0]-j()[0])/j()[2],1-(i[1]-j()[1])/j()[3]];return[A(e,n)[0]+r[0]*A(e,n)[2],A(e,n)[1]+r[1]*A(e,n)[3]]}function qt(t,e,n,o){O(o)&&(o=!1);return h.toDisplayCoord(t,o?[1,0,0,1,0,0]:zt(e,n),I(),j(),A(e,n))}function Kt(){for(var t=0;t<it();++t){var e,n,o,i=A(t,0);if(I()){e=(Nt([0,v(j())],t,0)[0]-i[0])/i[2];n=(Nt([0,p(j())],t,0)[0]-i[0])/i[2]}else{e=(Nt([x(j()),0],t,0)[0]-i[0])/i[2];n=(Nt([y(j()),0],t,0)[0]-i[0])/i[2]}for(o=0;o<ot(z());++o){var r=document.getElementById(z()[o]);if(r){var a=r.wtSObj;a&&a.xAxis()===t&&a.changeRange(e,n)}}}}function Ht(){jt();B()&&_t.tooltipPosition&&(_t.tooltipTimeout=setTimeout((function(){Qt()}),500));Tt&&lt((function(){n.repaint();S()&&Gt()}))}function Gt(){if(Tt){var t=mt.getContext("2d");t.clearRect(0,0,mt.width,mt.height);t.save();t.beginPath();t.moveTo(x(j()),v(j()));t.lineTo(y(j()),v(j()));t.lineTo(y(j()),p(j()));t.lineTo(x(j()),p(j()));t.closePath();t.clip();var e,n=f(u(zt(at(),ft())),wt),i=wt[0],r=wt[1];if(-1!==D()){n=w(I()?n[1]:n[0],Z(D()),I());var a=f(zt(k(D()),X(D())),f(Y(D()),n));i=a[0];r=a[1];wt[0]=i;wt[1]=r}e=I()?[(n[1]-j()[1])/j()[3],(n[0]-j()[0])/j()[2]]:[(n[0]-j()[0])/j()[2],1-(n[1]-j()[1])/j()[3]];if(-1!==D()){n=[(s=A(k(D()),X(D())))[0]+e[0]*s[2],s[1]+e[1]*s[3]]}else{var s;n=[(s=A(at(),ft()))[0]+e[0]*s[2],s[1]+e[1]*s[3]]}t.fillStyle=t.strokeStyle=o.crosshairColor;t.font="16px sans-serif";t.textAlign="right";t.textBaseline="top";var l=n[0].toFixed(2),c=n[1].toFixed(2);"-0.00"===l&&(l="0.00");"-0.00"===c&&(c="0.00");t.fillText("("+l+","+c+")",y(j())-N()[0],v(j())+N()[1]);t.setLineDash&&t.setLineDash([1,2]);t.beginPath();t.moveTo(Math.floor(i)+.5,Math.floor(v(j()))+.5);t.lineTo(Math.floor(i)+.5,Math.floor(p(j()))+.5);t.moveTo(Math.floor(x(j()))+.5,Math.floor(r)+.5);t.lineTo(Math.floor(y(j()))+.5,Math.floor(r)+.5);t.stroke();t.restore()}}function Jt(t){var e;I()&&(1===t?t=2:2===t&&(t=1));for(var n=0;n<it();++n){var o=Bt(n,0);if(I()){if(O(t)||2===t){if(L(n)[0]<1){L(n)[0]=1;o=Bt(n,0)}if(v(o)>v(R())){e=v(R())-v(o);L(n)[4]=L(n)[4]+e}else if(p(o)<p(R())){e=p(R())-p(o);L(n)[4]=L(n)[4]+e}}}else if(O(t)||1===t){if(L(n)[0]<1){L(n)[0]=1;o=Bt(n,0)}if(x(o)>x(R())){e=x(R())-x(o);L(n)[4]=L(n)[4]+e}else if(y(o)<y(R())){e=y(R())-y(o);L(n)[4]=L(n)[4]+e}}}for(n=0;n<rt();++n){o=Bt(0,n);if(I()){if(O(t)||1===t){if(_(n)[3]<1){_(n)[3]=1;o=Bt(0,n)}if(x(o)>x(R())){e=x(R())-x(o);_(n)[5]=_(n)[5]+e}else if(y(o)<y(R())){e=y(R())-y(o);_(n)[5]=_(n)[5]+e}}}else if(O(t)||2===t){if(_(n)[3]<1){_(n)[3]=1;o=Bt(0,n)}if(v(o)>v(R())){e=v(R())-v(o);_(n)[5]=_(n)[5]-e}else if(p(o)<p(R())){e=p(R())-p(o);_(n)[5]=_(n)[5]-e}}}Xt()}function Qt(){_t.toolTipEl||t.emit(n.widget,"loadTooltip",_t.tooltipPosition[0],_t.tooltipPosition[1])}this.updateTooltip=function(t){jt();if(t){if(!_t.tooltipPosition)return;_t.toolTipEl=document.createElement("div");_t.toolTipEl.className=o.ToolTipInnerStyle;_t.toolTipEl.innerHTML=t;_t.tooltipOuterDiv=document.createElement("div");_t.tooltipOuterDiv.className=o.ToolTipOuterStyle;document.body.appendChild(_t.tooltipOuterDiv);_t.tooltipOuterDiv.appendChild(_t.toolTipEl);var e=r.widgetPageCoordinates(n.canvas),i=_t.tooltipPosition[0]+e.x,a=_t.tooltipPosition[1]+e.y;r.fitToWindow(_t.tooltipOuterDiv,i+10,a+10,i-10,a-10);_t.toolTipEl.addEventListener("mouseenter",(function(){_t.overTooltip=!0}));_t.toolTipEl.addEventListener("mouseleave",(function(){_t.overTooltip=!1}))}};this.mouseMove=function(t,e){setTimeout((function(){setTimeout(jt,200);if(!ht){var t=r.widgetCoordinates(n.canvas,e);if(b(t,j())){if(B()){_t.tooltipPosition=[t.x,t.y];_t.tooltipTimeout=setTimeout((function(){Qt()}),500)}if(null===Mt&&S()&&Tt){wt=[t.x,t.y];lt(Gt)}}}}),0)};this.mouseOut=function(t,e){setTimeout(jt,200)};this.mouseDown=function(t,e){if(!ht){var o=r.widgetCoordinates(n.canvas,e),i=C(o.x,o.y),a=b(o,j()),f=P(o.x,o.y);if(-1!==i||-1!==f||a){Mt=o;gt=f;bt=i}}};this.mouseUp=function(t,e){if(!ht){Mt=null;gt=-1;bt=-1}};this.mouseDrag=function(t,e){if(!ht)if(null!==Mt){var a=r.widgetCoordinates(n.canvas,e);if(1===r.buttons)if(-1===bt&&-1===gt&&q()&&U($())){var u,l=$();u=I()?a.x-Mt.x:a.y-Mt.y;s(F(l),f([1,0,0,1,0,u/_(X($()))[3]],F(l)));Ht()}else o.pan&&re({x:a.x-Mt.x,y:a.y-Mt.y},0,gt,bt);Mt=a}else i.mouseDown(t,e)};this.clicked=function(e,o){if(!ht&&null===Mt&&W()){var i=r.widgetCoordinates(n.canvas,o);t.emit(n.widget,"seriesSelected",i.x,i.y)}};this.mouseWheel=function(t,e){var i=(e.metaKey<<3)+(e.altKey<<2)+(e.ctrlKey<<1)+e.shiftKey,a=o.wheelActions[i];if(!O(a)){var u=r.widgetCoordinates(n.canvas,e),l=P(u.x,u.y),v=C(u.x,u.y),p=b(u,j());if(-1!==l||-1!==v||p){var x=r.normalizeWheel(e);if(p&&0===i&&q()){var y=$(),d=-x.spinY;if(U(y)){var h=Y(y),w=c(h,Z(y)),T=m(w,I()),M=(T[0]+T[1])/2;r.cancelEvent(e);var g=Math.pow(1.2,d);s(F(y),f([1,0,0,g,0,M-g*M],F(y)));Ht();return}}if(4!==a&&5!==a&&6!==a||!o.pan){if(o.zoom){r.cancelEvent(e);0===(d=-x.spinY)&&(d=-x.spinX);1===a?ae(u,0,d,l,v):0===a?ae(u,d,0,l,v):2===a?ae(u,d,d,l,v):3===a&&(0!==x.pixelX?ae(u,d,0,l,v):ae(u,0,d,l,v))}}else{for(var E=[],A=0;A<it();++A)E.push(L(A)[4]);for(var D=[],S=0;S<rt();++S)D.push(_(S)[5]);6===a?re({x:-x.pixelX,y:-x.pixelY},0,l,v):5===a?re({x:0,y:-x.pixelX-x.pixelY},0,l,v):4===a&&re({x:-x.pixelX-x.pixelY,y:0},0,l,v);for(A=0;A<it();++A)E[A]!==L(A)[4]&&r.cancelEvent(e);for(S=0;S<rt();++S)D[S]!==_(S)[5]&&r.cancelEvent(e)}}}};var Vt=function(){W()&&t.emit(n.widget,"seriesSelected",Mt.x,Mt.y)};function $t(){return mt||n.canvas}yt.start=function(t,e,i){Pt=1===ot(e.touches);Ct=2===ot(e.touches);if(Pt){Ut=!1;var a=r.widgetCoordinates(n.canvas,e.touches[0]),f=C(a.x,a.y),u=b(a,j()),s=P(a.x,a.y);if(-1===f&&-1===s&&!u)return;Rt=-1===f&&-1===s&&S()&&M(wt,[a.x,a.y],30)?1:0;Lt=Date.now();Mt=a;bt=f;gt=s;if(1!==Rt){!i&&u&&(It=window.setTimeout(Vt,200));et("contextmenu",xt.contextmenuListener)}r.capture(null);r.capture($t())}else{if(!Ct||!o.zoom&&!q())return;if(It){window.clearTimeout(It);It=null}Ut=!1;s=-1,f=-1;if(!(Et=[r.widgetCoordinates(n.canvas,e.touches[0]),r.widgetCoordinates(n.canvas,e.touches[1])].map((function(t){return[t.x,t.y]}))).every((function(t){return b(t,j())})))if(-1!==(s=P(Et[0][0],Et[0][1]))){if(s!==P(Et[1][0],Et[1][1])){Ct=null;return}}else{if(1===(f=C(Et[0][0],Et[0][1]))){Ct=null;return}if(f!==C(Et[1][0],Et[1][1])){Ct=null;return}}r.capture(null);r.capture($t());Ot=Math.atan2(Et[1][1]-Et[0][1],Et[1][0]-Et[0][0]);At=[(Et[0][0]+Et[1][0])/2,(Et[0][1]+Et[1][1])/2];var l=Math.abs(Math.sin(Ot)),c=Math.abs(Math.cos(Ot));Ot=l<Math.sin(.125*Math.PI)?0:c<Math.cos(.375*Math.PI)?Math.PI/2:Math.tan(Ot)>0?Math.PI/4:-Math.PI/4;Dt=T(Ot,At);gt=s;bt=f}tt(e)};function te(t,e){if(Ut){var n=Date.now();O(e)&&(e=n-Lt);var o,i={x:0,y:0};if(-1!==gt)o=Bt(gt,0);else if(-1===bt){o=Bt(0,0);for(var r=1;r<it();++r)o=d(o,Bt(r,0));for(var a=1;a<rt();++a)o=d(o,Bt(0,a))}else o=Bt(0,bt);var f,u=2e-4;if(e>34){Tt=!1;var s,l=Math.floor(e/17-1);for(s=0;s<l;++s){te(t,17);if(!Ut){Tt=!0;Ht();return}}e-=17*l;Tt=!0}St.x!==1/0&&St.x!==-1/0||(St.x>0?St.x=pt:St.x=-1.5);if(isFinite(St.x)){St.x=St.x/(1+.003*e);o[0]+=St.x*e;if(x(o)>x(R())){St.x=St.x+-u*(x(o)-x(R()))*e;St.x*=.7}else if(y(o)<y(R())){St.x=St.x+-u*(y(o)-y(R()))*e;St.x*=.7}Math.abs(St.x)<vt&&(x(o)>x(R())?St.x=vt:y(o)<y(R())&&(St.x=-.001));Math.abs(St.x)>pt&&(St.x=(St.x>0?1:-1)*pt);i.x=St.x*e}St.y!==1/0&&St.y!==-1/0||(St.y>0?St.y=pt:St.y=-1.5);if(isFinite(St.y)){St.y=St.y/(1+.003*e);o[1]+=St.y*e;if(v(o)>v(R())){St.y=St.y+-u*(v(o)-v(R()))*e;St.y*=.7}else if(p(o)<p(R())){St.y=St.y+-u*(p(o)-p(R()))*e;St.y*=.7}Math.abs(St.y)<.001&&(v(o)>v(R())?St.y=.001:p(o)<p(R())&&(St.y=-.001));Math.abs(St.y)>pt&&(St.y=(St.y>0?1:-1)*pt);i.y=St.y*e}if(-1!==gt)o=Bt(gt,0);else if(-1===bt){o=Bt(0,0);for(r=1;r<it();++r)o=d(o,Bt(r,0));for(a=1;a<rt();++a)o=d(o,Bt(0,a))}else o=Bt(0,bt);re(i,1,gt,bt);if(-1!==gt)f=Bt(gt,0);else if(-1===bt){f=Bt(0,0);for(r=1;r<it();++r)f=d(f,Bt(r,0));for(a=1;a<rt();++a)f=d(f,Bt(0,a))}else f=Bt(0,bt);if(x(o)>x(R())&&x(f)<=x(R())){St.x=0;re({x:-i.x,y:0},1,gt,bt);Jt(1)}if(y(o)<y(R())&&y(f)>=y(R())){St.x=0;re({x:-i.x,y:0},1,gt,bt);Jt(1)}if(v(o)>v(R())&&v(f)<=v(R())){St.y=0;re({x:0,y:-i.y},1,gt,bt);Jt(2)}if(p(o)<p(R())&&p(f)>=p(R())){St.y=0;re({x:0,y:-i.y},1,gt,bt);Jt(2)}if(Math.abs(St.x)<.02&&Math.abs(St.y)<.02&&function(t){return v(t)<=v(R())+3&&p(t)>=p(R())-3&&x(t)<=x(R())+3&&y(t)>=y(R())-3}(f)){Jt();Ut=!1;Mt=null;St.x=0;St.y=0;Lt=null;Et=[]}else{Lt=n;Tt&&ut(te)}}}yt.end=function(t,e){if(It){window.clearTimeout(It);It=null}window.setTimeout((function(){nt("contextmenu",xt.contextmenuListener)}),0);var n=Array.prototype.slice.call(e.touches),r=0===ot(n);r||function(){var t;for(t=0;t<ot(e.changedTouches);++t)!function(){for(var o=e.changedTouches[t].identifier,i=0;i<ot(n);++i)if(n[i].identifier===o){n.splice(i,1);return}}()}();r=0===ot(n);Pt=1===ot(n);Ct=2===ot(n);if(r){ee=null;if(0===Rt&&(isFinite(St.x)||isFinite(St.y))&&o.rubberBand){Lt=Date.now();Ut=!0;ut(te)}else{1===Rt&&i.mouseUp(null,null);n=[];Ot=null;At=null;Dt=null;Lt=null}Rt=null}else(Pt||Ct)&&yt.start(t,e,!0)};var ee=null,ne=null,oe=null;yt.moved=function(t,e){if((Pt||Ct)&&(!Pt||null!=Mt)){tt(e);ne=r.widgetCoordinates(n.canvas,e.touches[0]);ot(e.touches)>1&&(oe=r.widgetCoordinates(n.canvas,e.touches[1]));if(-1===gt&&-1===bt&&Pt&&It&&!M([ne.x,ne.y],[Mt.x,Mt.y],3)){window.clearTimeout(It);It=null}ee||(ee=setTimeout((function(){if(-1===gt&&-1===bt&&Pt&&q()&&U($())){if(U(a=$())){var t,e=ne;t=I()?(e.x-Mt.x)/_(X($()))[3]:(e.y-Mt.y)/_(X($()))[3];F(a)[5]+=t;Mt=e;Ht()}}else if(Pt){e=ne;var n=Date.now(),i={x:e.x-Mt.x,y:e.y-Mt.y},r=n-Lt;Lt=n;if(1===Rt){wt[0]+=i.x;wt[1]+=i.y;S()&&Tt&&ut(Gt)}else if(o.pan){St.x=i.x/r;St.y=i.y/r;re(i,o.rubberBand?2:0,gt,bt)}Mt=e}else if(-1===gt&&-1===bt&&Ct&&q()&&U($())){var a,l=I()?0:1,c=[ne,oe].map((function(t){return I()?[t.x,y]:[m,t.y]})),v=Math.abs(Et[1][l]-Et[0][l]),p=Math.abs(c[1][l]-c[0][l]),x=v>0?p/v:1;p===v&&(x=1);if(U(a=$())){var y=f(u(zt(k(a),X(a))),[0,(Et[0][l]+Et[1][l])/2])[1],d=f(u(zt(k(a),X(a))),[0,(c[0][l]+c[1][l])/2])[1];s(F(a),f([1,0,0,x,0,-x*y+d],F(a)));Mt=e;Ht();Et=c}}else if(Ct&&o.zoom){var h=Nt(wt,at(),ft()),m=(Et[0][0]+Et[1][0])/2,w=(y=(Et[0][1]+Et[1][1])/2,c=[ne,oe].map((function(t){return 0===Ot?[t.x,y]:Ot===Math.PI/2?[m,t.y]:f(Dt,[t.x,t.y])})),Math.abs(Et[1][0]-Et[0][0])),T=Math.abs(c[1][0]-c[0][0]),M=w>0?T/w:1;T!==w&&Ot!==Math.PI/2||(M=1);var g=(c[0][0]+c[1][0])/2;v=Math.abs(Et[1][1]-Et[0][1]),p=Math.abs(c[1][1]-c[0][1]),x=v>0?p/v:1;p!==v&&0!==Ot||(x=1);d=(c[0][1]+c[1][1])/2;I()&&function(){var t=M;M=x;x=t;t=g;g=d;d=t;t=m;m=y;y=t}();for(var b=[],E=0;E<it();++E)b.push(M);for(E=0;E<it();++E){L(E)[0]*b[E]>G(E)&&(b[E]=G(E)/L(E)[0]);L(E)[0]*b[E]<K(E)&&(b[E]=K(E)/L(E)[0])}for(var P=[],C=0;C<rt();++C)P.push(x);for(C=0;C<rt();++C){_(C)[3]*P[C]>J(C)&&(P[C]=J(C)/_(C)[3]);_(C)[3]*P[C]<H(C)&&(P[C]=H(C)/_(C)[3])}if(-1!==gt)1!==b[gt]&&(b[gt]<1||L(gt)[0]!==G(gt))&&Wt(L(gt),f([b[gt],0,0,1,-b[gt]*m+g,0],L(gt)));else if(-1===bt){for(E=0;E<it();++E)1!==b[E]&&(b[E]<1||L(E)[0]!==G(E))&&Wt(L(E),f([b[E],0,0,1,-b[E]*m+g,0],L(E)));for(C=0;C<rt();++C)1!==P[C]&&(P[C]<1||_(C)[3]!==J(C))&&Wt(_(C),f([1,0,0,P[C],0,-P[C]*y+d],_(C)))}else 1!==P[bt]&&(P[bt]<1||_(bt)[3]!==J(bt))&&Wt(_(bt),f([1,0,0,P[bt],0,-P[bt]*y+d],_(bt)));Jt();var O=qt(h,at(),ft());wt[0]=O[0];wt[1]=O[1];Et=c;ie();Ht();Kt()}ee=null}),1))}};function ie(){for(var t,e,n=0;n<ot(Q().x);++n){var o=g(L(n)[0])-1;L(n)[0]==G(n)&&(o=ot(Q().x[n])-1);o>=ot(Q().x[n])&&(o=ot(Q().x[n])-1);for(t=0;t<ot(Q().x[n]);++t)if(o===t)for(e=0;e<ot(Q().x[n][t]);++e)Q().x[n][t][e].color[3]=V().x[n][e];else for(e=0;e<ot(Q().x[n][t]);++e)Q().x[n][t][e].color[3]=0}for(var i=0;i<ot(Q().y);++i){var r=g(_(i)[3])-1;_(i)[3]==J(i)&&(r=ot(Q().y[i])-1);r>=ot(Q().y[i])&&(r=ot(Q().y[i])-1);for(t=0;t<ot(Q().y[i]);++t)if(r===t)for(e=0;e<ot(Q().y[i][t]);++e)Q().y[i][t][e].color[3]=V().y[i][e];else for(e=0;e<ot(Q().y[i][t]);++e)Q().y[i][t][e].color[3]=0}}function re(t,e,n,o){O(e)&&(e=0);O(n)&&(n=-1);O(o)&&(o=-1);var i=Nt(wt,at(),ft());I()&&(t={x:t.y,y:-t.x});if(1&e){if(-1!==n)L(n)[4]=L(n)[4]+t.x;else if(-1===o){for(var r=0;r<it();++r)L(r)[4]=L(r)[4]+t.x;for(var a=0;a<rt();++a)_(a)[5]=_(a)[5]-t.y}else _(o)[5]=_(o)[5]-t.y;Xt()}else if(2&e){var f;if(-1!==n)f=Bt(n,0);else if(-1===o){f=Bt(0,0);for(r=1;r<it();++r)f=d(f,Bt(r,0));for(a=1;a<rt();++a)f=d(f,Bt(0,a))}else f=Bt(0,o);x(f)>x(R())?t.x>0&&(t.x=t.x/(1+(x(f)-x(R()))*ct)):y(f)<y(R())&&t.x<0&&(t.x=t.x/(1+(y(R())-y(f))*ct));v(f)>v(R())?t.y>0&&(t.y=t.y/(1+(v(f)-v(R()))*ct)):p(f)<p(R())&&t.y<0&&(t.y=t.y/(1+(p(R())-p(f))*ct));if(-1!==n)L(n)[4]=L(n)[4]+t.x;else if(-1===o){for(r=0;r<it();++r)L(r)[4]=L(r)[4]+t.x;for(a=0;a<rt();++a)_(a)[5]=_(a)[5]-t.y}else _(o)[5]=_(o)[5]-t.y;-1===o&&(wt[0]=wt[0]+t.x);-1===n&&(wt[1]=wt[1]+t.y);Xt()}else{if(-1!==n)L(n)[4]=L(n)[4]+t.x;else if(-1===o){for(r=0;r<it();++r)L(r)[4]=L(r)[4]+t.x;for(a=0;a<rt();++a)_(a)[5]=_(a)[5]-t.y}else _(o)[5]=_(o)[5]-t.y;-1===o&&(wt[0]=wt[0]+t.x);-1===n&&(wt[1]=wt[1]+t.y);Jt()}var u=qt(i,at(),ft());wt[0]=u[0];wt[1]=u[1];Ht();Kt()}function ae(t,e,n,o,i){O(o)&&(o=-1);O(i)&&(i=-1);var r,a=Nt(wt,at(),ft()),s=(r=I()?[t.y-v(j()),t.x-x(j())]:f(u([1,0,0,-1,x(j()),p(j())]),[t.x,t.y]))[0],l=r[1],c=Math.pow(1.2,I()?n:e),y=Math.pow(1.2,I()?e:n);if(-1!==o){L(o)[0]*c>G(o)&&(c=G(o)/L(o)[0]);(c<1||L(o)[0]!=G(o))&&Wt(L(o),f([c,0,0,1,s-c*s,0],L(o)))}else if(-1===i){for(var d=0;d<it();++d){var h=c;L(d)[0]*c>G(d)&&(h=G(d)/L(d)[0]);(h<1||L(d)[0]!==G(d))&&Wt(L(d),f([h,0,0,1,s-h*s,0],L(d)))}for(var m=0;m<rt();++m){var w=y;_(m)[3]*y>J(m)&&(w=J(m)/_(m)[3]);(w<1||_(m)[3]!==J(m))&&Wt(_(m),f([1,0,0,w,0,l-w*l],_(m)))}}else{_(i)[3]*y>J(i)&&(y=J(i)/_(i)[3]);(y<1||_(i)[3]!=J(i))&&Wt(_(i),f([1,0,0,y,0,l-y*l],_(i)))}Jt();var T=qt(a,at(),ft());wt[0]=T[0];wt[1]=T[1];ie();Ht();Kt()}this.setXRange=function(t,e,n,i){var r=A(k(t),0);e=r[0]+r[2]*e;n=r[0]+r[2]*n;if(x(r)>y(r)){e>x(r)&&(e=x(r));n<y(r)&&(n=y(r))}else{e<x(r)&&(e=x(r));n>y(r)&&(n=y(r))}var a=Z(t),f=E(a,X(t),e,n,I(),j(),A(k(t),X(t)),o.minZoom,o.maxZoom),u=f.xZoom,s=f.yZoom,l=f.panPoint,c=Nt(wt,at(),ft());L(k(t))[0]=u;s&&i&&(_(X(t))[3]=s);L(k(t))[4]=-l[0]*u;s&&i&&(_(X(t))[5]=-l[1]*s);Xt();var v=qt(c,at(),ft());wt[0]=v[0];wt[1]=v[1];Jt();ie();Ht();Kt()};this.getSeries=function(t){return Z(t)};this.rangeChangedCallbacks=[];this.updateConfig=function(t){for(var i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);!function(){if(S()&&(O(mt)||n.canvas.width!==mt.width||n.canvas.height!==mt.height)){if(mt){mt.parentNode.removeChild(mt);delete e.wtOObj;mt=void 0}var t=document.createElement("canvas");t.setAttribute("width",n.canvas.width);t.setAttribute("height",n.canvas.height);t.style.position="absolute";t.style.display="block";t.style.left="0";t.style.top="0";if(window.MSPointerEvent||window.PointerEvent){t.style.msTouchAction="none";t.style.touchAction="none"}n.canvas.parentNode.appendChild(t);mt=t;e.wtOObj=mt}else if(!O(mt)&&!S()){mt.parentNode.removeChild(mt);delete e.wtOObj;mt=void 0}wt=[(x(j())+y(j()))/2,(v(j())+p(j()))/2]}();ie();Ht();Kt()};this.updateConfig({});if(!window.TouchEvent||window.MSPointerEvent||window.PointerEvent){var fe=function(){};i.touchStart=fe;i.touchEnd=fe;i.touchMoved=fe}else{i.touchStart=yt.start;i.touchEnd=yt.end;i.touchMoved=yt.moved}}));