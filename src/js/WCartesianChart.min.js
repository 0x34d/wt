WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WCartesianChart",function(D,s,w,b){function W(){return b.crosshair||b.followCurve!==-1}function pa(a){return a.pointerType===2||a.pointerType===3||a.pointerType==="pen"||a.pointerType==="touch"}function j(a){if(a===h)return b.xTransform;if(a===i)return b.yTransform}function X(){if(b.isHorizontal){var a=o(b.area),d=p(b.area);return A([0,1,1,0,a,d],A(j(h),A(j(i),[0,1,1,0,-d,-a])))}else{a=o(b.area);d=q(b.area);return A([1,0,0,-1,a,d],A(j(h),A(j(i),[1,0,0,
-1,-a,d])))}}function G(){return A(X(),b.area)}function O(a,d){if(d===undefined)d=false;a=d?a:A(qa(X()),a);a=b.isHorizontal?[(a[i]-b.area[1])/b.area[3],(a[h]-b.area[0])/b.area[2]]:[(a[h]-b.area[0])/b.area[2],1-(a[i]-b.area[1])/b.area[3]];return[b.modelArea[0]+a[h]*b.modelArea[2],b.modelArea[1]+a[i]*b.modelArea[3]]}function V(a,d){if(d===undefined)d=false;if(b.isHorizontal){a=[(a[h]-b.modelArea[0])/b.modelArea[2],(a[i]-b.modelArea[1])/b.modelArea[3]];a=[b.area[0]+a[i]*b.area[2],b.area[1]+a[h]*b.area[3]]}else{a=
[(a[h]-b.modelArea[0])/b.modelArea[2],1-(a[i]-b.modelArea[1])/b.modelArea[3]];a=[b.area[0]+a[h]*b.area[2],b.area[1]+a[i]*b.area[3]]}return d?a:A(X(),a)}function Ga(a,d){var e=h;if(b.isHorizontal)e=i;var f=ra(a,d);if(f<0)f=0;if(f>=d.length)f=d.length-2;if(d[f][e]===a)return[d[f][h],d[f][i]];var g=f+1;if(d[g][2]==Y)g+=2;return a-d[f][e]<d[g][e]-a?[d[f][h],d[f][i]]:[d[g][h],d[g][i]]}function ra(a,d){function e(u){d[u][2]===sa&&--u;d[u][2]===Y&&--u;return u}var f=h;if(b.isHorizontal)f=i;var g=d.length,
k=Math.floor(g/2);k=e(k);var m=0,n=g,v=false;if(d[0][f]>a)return-1;if(d[g-1][f]<a)return g;for(;!v;){g=k+1;if(d[g][2]===Y)g+=2;if(d[k][f]>a){n=k;k=Math.floor((n+m)/2);k=e(k)}else if(d[k][f]===a)v=true;else if(d[g][f]>a)v=true;else if(d[g][f]===a){k=g;v=true}else{m=k;k=Math.floor((n+m)/2);k=e(k)}}return k}function fa(){var a,d;if(b.isHorizontal){a=(O([0,p(b.area)])[0]-b.modelArea[0])/b.modelArea[2];d=(O([0,q(b.area)])[0]-b.modelArea[0])/b.modelArea[2]}else{a=(O([o(b.area),0])[0]-b.modelArea[0])/b.modelArea[2];
d=(O([r(b.area),0])[0]-b.modelArea[0])/b.modelArea[2]}var e;for(e=0;e<b.sliders.length;++e){var f=$("#"+b.sliders[e]);if(f)(f=f.data("sobj"))&&f.changeRange(a,d)}}function Z(){P&&Aa(function(){w.repaint();W()&&ta()})}function ta(){if(P){var a=C.getContext("2d");a.clearRect(0,0,C.width,C.height);a.save();a.beginPath();a.moveTo(o(b.area),p(b.area));a.lineTo(r(b.area),p(b.area));a.lineTo(r(b.area),q(b.area));a.lineTo(o(b.area),q(b.area));a.closePath();a.clip();var d=A(qa(X()),t),e=t[h],f=t[i];if(b.followCurve!==
-1){d=Ga(b.isHorizontal?d[i]:d[h],b.series[b.followCurve]);f=A(X(),d);e=f[h];f=f[i];t[h]=e;t[i]=f}d=b.isHorizontal?[(d[i]-b.area[1])/b.area[3],(d[h]-b.area[0])/b.area[2]]:[(d[h]-b.area[0])/b.area[2],1-(d[i]-b.area[1])/b.area[3]];d=[b.modelArea[0]+d[h]*b.modelArea[2],b.modelArea[1]+d[i]*b.modelArea[3]];a.font="16px sans-serif";a.textAlign="right";a.textBaseline="top";var g=d[0].toFixed(2);d=d[1].toFixed(2);if(g=="-0.00")g="0.00";if(d=="-0.00")d="0.00";a.fillText("("+g+","+d+")",r(b.area)-b.coordinateOverlayPadding[0],
p(b.area)+b.coordinateOverlayPadding[1]);a.setLineDash&&a.setLineDash([1,2]);a.beginPath();a.moveTo(Math.floor(e)+0.5,Math.floor(p(b.area))+0.5);a.lineTo(Math.floor(e)+0.5,Math.floor(q(b.area))+0.5);a.moveTo(Math.floor(o(b.area))+0.5,Math.floor(f)+0.5);a.lineTo(Math.floor(r(b.area))+0.5,Math.floor(f)+0.5);a.stroke();a.restore()}}function aa(a,d){var e;if(a.x!==undefined){e=a.x;a=a.y}else{e=a[0];a=a[1]}return e>=o(d)&&e<=r(d)&&a>=p(d)&&a<=q(d)}function Ha(a){return p(a)<=p(b.area)+ia&&q(a)>=q(b.area)-
ia&&o(a)<=o(b.area)+ia&&r(a)>=r(b.area)-ia}function K(a){var d=G();if(b.isHorizontal)if(a===ba)a=ca;else if(a===ca)a=ba;if(a===undefined||a===ba)if(j(h)[0]<1){j(h)[0]=1;d=G()}if(a===undefined||a===ca)if(j(i)[3]<1){j(i)[3]=1;d=G()}if(a===undefined||a===ba){if(o(d)>o(b.area)){d=o(b.area)-o(d);if(b.isHorizontal)j(i)[5]=j(i)[5]+d;else j(h)[4]=j(h)[4]+d;d=G()}if(r(d)<r(b.area)){d=r(b.area)-r(d);if(b.isHorizontal)j(i)[5]=j(i)[5]+d;else j(h)[4]=j(h)[4]+d;d=G()}}if(a===undefined||a===ca){if(p(d)>p(b.area)){d=
p(b.area)-p(d);if(b.isHorizontal)j(h)[4]=j(h)[4]+d;else j(i)[5]=j(i)[5]-d;d=G()}if(q(d)<q(b.area)){d=q(b.area)-q(d);if(b.isHorizontal)j(h)[4]=j(h)[4]+d;else j(i)[5]=j(i)[5]-d;G()}}}function Ia(){if(W&&(C===undefined||w.canvas.width!==C.width||w.canvas.height!==C.height)){if(C){C.parentNode.removeChild(C);jQuery.removeData(s,"oobj");C=undefined}c=document.createElement("canvas");c.setAttribute("width",w.canvas.width);c.setAttribute("height",w.canvas.height);c.style.position="absolute";c.style.display=
"block";c.style.left="0";c.style.top="0";if(window.MSPointerEvent||window.PointerEvent){c.style.msTouchAction="none";c.style.touchAction="none"}w.canvas.parentNode.appendChild(c);C=c;jQuery.data(s,"oobj",C)}else if(C!==undefined&&!W()){C.parentNode.removeChild(C);jQuery.removeData(s,"oobj");C=undefined}if(t===null)t=V([(o(b.modelArea)+r(b.modelArea))/2,(p(b.modelArea)+q(b.modelArea))/2])}function Ja(a,d){var e=Math.cos(a);a=Math.sin(a);var f=e*a,g=-d[0]*e-d[1]*a;return[e*e,f,f,a*a,e*g+d[0],a*g+d[1]]}
function Ka(a,d,e){a=[d[h]-a[h],d[i]-a[i]];return e*e>=a[h]*a[h]+a[i]*a[i]}function ua(a,d){if(da){var e=Date.now();if(d===undefined)d=e-M;var f={x:0,y:0},g=G(),k=La;if(d>2*ga){P=false;var m=Math.floor(d/ga-1),n;for(n=0;n<m;++n){ua(a,ga);if(!da){P=true;Z();return}}d-=m*ga;P=true}if(l.x===Infinity||l.x===-Infinity)l.x=l.x>0?Q:-Q;if(isFinite(l.x)){l.x/=1+Ba*d;g[0]+=l.x*d;if(o(g)>o(b.area)){l.x+=-k*(o(g)-o(b.area))*d;l.x*=0.7}else if(r(g)<r(b.area)){l.x+=-k*(r(g)-r(b.area))*d;l.x*=0.7}if(Math.abs(l.x)<
va)if(o(g)>o(b.area))l.x=va;else if(r(g)<r(b.area))l.x=-va;if(Math.abs(l.x)>Q)l.x=(l.x>0?1:-1)*Q;f.x=l.x*d}if(l.y===Infinity||l.y===-Infinity)l.y=l.y>0?Q:-Q;if(isFinite(l.y)){l.y/=1+Ba*d;g[1]+=l.y*d;if(p(g)>p(b.area)){l.y+=-k*(p(g)-p(b.area))*d;l.y*=0.7}else if(q(g)<q(b.area)){l.y+=-k*(q(g)-q(b.area))*d;l.y*=0.7}if(Math.abs(l.y)<0.001)if(p(g)>p(b.area))l.y=0.001;else if(q(g)<q(b.area))l.y=-0.001;if(Math.abs(l.y)>Q)l.y=(l.y>0?1:-1)*Q;f.y=l.y*d}g=G();I(f,ea);a=G();if(o(g)>o(b.area)&&o(a)<=o(b.area)){l.x=
0;I({x:-f.x,y:0},ea);K(ba)}if(r(g)<r(b.area)&&r(a)>=r(b.area)){l.x=0;I({x:-f.x,y:0},ea);K(ba)}if(p(g)>p(b.area)&&p(a)<=p(b.area)){l.y=0;I({x:0,y:-f.y},ea);K(ca)}if(q(g)<q(b.area)&&q(a)>=q(b.area)){l.y=0;I({x:0,y:-f.y},ea);K(ca)}if(Math.abs(l.x)<Ca&&Math.abs(l.y)<Ca&&Ha(a)){K();da=false;F=null;l.x=0;l.y=0;M=null;x=[]}else{M=e;P&&ja(ua)}}}function Da(a){return Math.floor(Math.log(a)/Math.LN2+0.5)+1}function ka(){var a,d,e=Da(j(h)[0])-1;if(e>=b.pens.x.length)e=b.pens.x.length-1;for(a=0;a<b.pens.x.length;++a)if(e===
a)for(d=0;d<b.pens.x[a].length;++d)b.pens.x[a][d].color[3]=b.penAlpha.x[d];else for(d=0;d<b.pens.x[a].length;++d)b.pens.x[a][d].color[3]=0;e=Da(j(i)[3])-1;if(e>=b.pens.y.length)e=b.pens.y.length-1;for(a=0;a<b.pens.y.length;++a)if(e===a)for(d=0;d<b.pens.y[a].length;++d)b.pens.y[a][d].color[3]=b.penAlpha.y[d];else for(d=0;d<b.pens.y[a].length;++d)b.pens.y[a][d].color[3]=0}function I(a,d){var e=O(t);if(b.isHorizontal)a={x:a.y,y:-a.x};if(d&ea){j(h)[4]=j(h)[4]+a.x;j(i)[5]=j(i)[5]-a.y}else if(d&Ea){d=G();
if(o(d)>o(b.area)){if(a.x>0)a.x/=1+(o(d)-o(b.area))*la}else if(r(d)<r(b.area))if(a.x<0)a.x/=1+(r(b.area)-r(d))*la;if(p(d)>p(b.area)){if(a.y>0)a.y/=1+(p(d)-p(b.area))*la}else if(q(d)<q(b.area))if(a.y<0)a.y/=1+(q(b.area)-q(d))*la;j(h)[4]=j(h)[4]+a.x;j(i)[5]=j(i)[5]-a.y;t[h]+=a.x;t[i]+=a.y}else{j(h)[4]=j(h)[4]+a.x;j(i)[5]=j(i)[5]-a.y;t[h]+=a.x;t[i]+=a.y;K()}a=V(e);t[h]=a[h];t[i]=a[i];Z();fa()}function ha(a,d,e){var f=O(t),g;g=b.isHorizontal?[a.y-p(b.area),a.x-o(b.area)]:A(qa([1,0,0,-1,o(b.area),q(b.area)]),
[a.x,a.y]);a=g[0];g=g[1];var k=Math.pow(1.2,b.isHorizontal?e:d);d=Math.pow(1.2,b.isHorizontal?d:e);if(j(h)[0]*k>b.maxZoom[h])k=b.maxZoom[h]/j(h)[0];if(k<1||j(h)[0]!==b.maxZoom[h])ma(j(h),A([k,0,0,1,a-k*a,0],j(h)));if(j(i)[3]*d>b.maxZoom[i])d=b.maxZoom[i]/j(i)[3];if(d<1||j(i)[3]!==b.maxZoom[i])ma(j(i),A([1,0,0,d,0,g-d*g],j(i)));K();f=V(f);t[h]=f[h];t[i]=f[i];ka();Z();fa()}var ga=17,ja=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
function(a){window.setTimeout(a,ga)}}(),wa=false,Aa=function(a){if(!wa){wa=true;ja(function(){a();wa=false})}};if(window.MSPointerEvent||window.PointerEvent){s.style.touchAction="none";w.canvas.style.msTouchAction="none";w.canvas.style.touchAction="none"}var Y=2,sa=3,ea=1,Ea=2,ba=1,ca=2,h=0,i=1,J={},N=false;if(window.MSPointerEvent||window.PointerEvent)(function(){function a(){if(pointers.length>0&&!N)N=true;else if(pointers.length<=0&&N)N=false}function d(k){if(pa(k)){k.preventDefault();pointers.push(k);
a();J.start(s,{touches:pointers.slice(0)})}}function e(k){if(N)if(pa(k)){k.preventDefault();var m;for(m=0;m<pointers.length;++m)if(pointers[m].pointerId===k.pointerId){pointers.splice(m,1);break}a();J.end(s,{touches:pointers.slice(0),changedTouches:[]})}}function f(k){if(pa(k)){k.preventDefault();var m;for(m=0;m<pointers.length;++m)if(pointers[m].pointerId===k.pointerId){pointers[m]=k;break}a();J.moved(s,{touches:pointers.slice(0)})}}pointers=[];var g=jQuery.data(s,"eobj");if(g)if(window.PointerEvent){s.removeEventListener("pointerdown",
g.pointerDown);s.removeEventListener("pointerup",g.pointerUp);s.removeEventListener("pointerout",g.pointerUp);s.removeEventListener("pointermove",g.pointerMove)}else{s.removeEventListener("MSPointerDown",g.pointerDown);s.removeEventListener("MSPointerUp",g.pointerUp);s.removeEventListener("MSPointerOut",g.pointerUp);s.removeEventListener("MSPointerMove",g.pointerMove)}jQuery.data(s,"eobj",{pointerDown:d,pointerUp:e,pointerMove:f});if(window.PointerEvent){s.addEventListener("pointerdown",d);s.addEventListener("pointerup",
e);s.addEventListener("pointerout",e);s.addEventListener("pointermove",f)}else{s.addEventListener("MSPointerDown",d);s.addEventListener("MSPointerUp",e);s.addEventListener("MSPointerOut",e);s.addEventListener("MSPointerMove",f)}})();var Ba=0.003,La=2.0E-4,la=0.07,ia=3,va=0.001,Q=1.5,Ca=0.02;jQuery.data(s,"cobj",this);var S=this,z=D.WT;S.config=b;var C=jQuery.data(s,"oobj"),t=null,P=true,F=null,x=[],T=false,U=false,H=null,xa=null,ya=null,l={x:0,y:0},M=null,na=null;D=z.gfxUtils;var A=D.transform_mult,
qa=D.transform_inverted,ma=D.transform_assign,p=D.rect_top,q=D.rect_bottom,o=D.rect_left,r=D.rect_right,da=false;w.combinedTransform=X;this.mouseMove=function(a,d){setTimeout(function(){if(!N){var e=z.widgetCoordinates(w.canvas,d);if(aa(e,b.area))if(W()&&P){t=[e.x,e.y];Aa(ta)}}},0)};this.mouseDown=function(a,d){if(!N){a=z.widgetCoordinates(w.canvas,d);if(aa(a,b.area))F=a}};this.mouseUp=function(){N||(F=null)};this.mouseDrag=function(a,d){if(!N)if(F!==null){a=z.widgetCoordinates(w.canvas,d);if(aa(a,
b.area)){z.buttons===1&&b.pan&&I({x:a.x-F.x,y:a.y-F.y});F=a}}};this.mouseWheel=function(a,d){a=b.wheelActions[(d.metaKey<<3)+(d.altKey<<2)+(d.ctrlKey<<1)+d.shiftKey];if(a!==undefined){var e=z.widgetCoordinates(w.canvas,d);if(aa(e,b.area)){var f=z.normalizeWheel(d);if((a===4||a===5||a===6)&&b.pan){e=j(h)[4];var g=j(i)[5];if(a===6)I({x:-f.pixelX,y:-f.pixelY});else if(a===5)I({x:0,y:-f.pixelX-f.pixelY});else a===4&&I({x:-f.pixelX-f.pixelY,y:0});if(e!==j(h)[4]||g!==j(i)[5])z.cancelEvent(d)}else if(b.zoom){z.cancelEvent(d);
d=-f.spinY;if(d===0)d=-f.spinX;if(a===1)ha(e,0,d);else if(a===0)ha(e,d,0);else if(a===2)ha(e,d,d);else if(a===3)f.pixelX!==0?ha(e,d,0):ha(e,0,d)}}}};J.start=function(a,d){T=d.touches.length===1;U=d.touches.length===2;if(T){da=false;a=z.widgetCoordinates(w.canvas,d.touches[0]);if(!aa(a,b.area))return;na=W()&&Ka(t,[a.x,a.y],30)?1:0;M=Date.now();F=a;z.capture(null);z.capture(w.canvas)}else if(U&&b.zoom){da=false;x=[z.widgetCoordinates(w.canvas,d.touches[0]),z.widgetCoordinates(w.canvas,d.touches[1])].map(function(f){return[f.x,
f.y]});if(!x.every(function(f){return aa(f,b.area)})){U=null;return}z.capture(null);z.capture(w.canvas);H=Math.atan2(x[1][1]-x[0][1],x[1][0]-x[0][0]);xa=[(x[0][0]+x[1][0])/2,(x[0][1]+x[1][1])/2];a=Math.abs(Math.sin(H));var e=Math.abs(Math.cos(H));H=a<Math.sin(0.125*Math.PI)?0:e<Math.cos(0.375*Math.PI)?Math.PI/2:Math.tan(H)>0?Math.PI/4:-Math.PI/4;ya=Ja(H,xa)}else return;d.preventDefault&&d.preventDefault()};J.end=function(a,d){var e=Array.prototype.slice.call(d.touches),f=e.length===0;T=e.length===
1;U=e.length===2;f||function(){var g;for(g=0;g<d.changedTouches.length;++g)(function(){for(var k=d.changedTouches[g].identifier,m=0;m<e.length;++m)if(e[m].identifier===k){e.splice(m,1);return}})()}();f=e.length===0;T=e.length===1;U=e.length===2;if(f){oa=null;if(na===0&&(isFinite(l.x)||isFinite(l.y))&&b.rubberBand){M=Date.now();da=true;ja(ua)}else{S.mouseUp(null,null);e=[];ya=xa=H=null;if(M!=null){Date.now();M=null}}na=null}else if(T||U)J.start(a,d)};var oa=null,za=null,Fa=null;J.moved=function(a,
d){if(T||U)if(!(T&&F==null)){d.preventDefault&&d.preventDefault();za=z.widgetCoordinates(w.canvas,d.touches[0]);if(d.touches.length>1)Fa=z.widgetCoordinates(w.canvas,d.touches[1]);oa||(oa=setTimeout(function(){if(T){var e=za,f=Date.now(),g={x:e.x-F.x,y:e.y-F.y},k=f-M;M=f;if(na===1){t[h]+=g.x;t[i]+=g.y;W()&&P&&ja(ta)}else if(b.pan){l.x=g.x/k;l.y=g.y/k;I(g,b.rubberBand?Ea:0)}F=e}else if(U&&b.zoom){f=O(t);var m=(x[0][0]+x[1][0])/2,n=(x[0][1]+x[1][1])/2;e=[za,Fa].map(function(y){return H===0?[y.x,n]:
H===Math.PI/2?[m,y.y]:A(ya,[y.x,y.y])});g=Math.abs(x[1][0]-x[0][0]);k=Math.abs(e[1][0]-e[0][0]);var v=g>0?k/g:1;if(k===g||H===Math.PI/2)v=1;var u=(e[0][0]+e[1][0])/2;g=Math.abs(x[1][1]-x[0][1]);k=Math.abs(e[1][1]-e[0][1]);var B=g?k/g:1;if(k===g||H===0)B=1;var E=(e[0][1]+e[1][1])/2;b.isHorizontal&&function(){var y=v;v=B;B=y;y=u;u=E;E=y;y=m;m=n;n=y}();if(j(h)[0]*v>b.maxZoom[h])v=b.maxZoom[h]/j(h)[0];if(j(i)[3]*B>b.maxZoom[i])B=b.maxZoom[i]/j(i)[3];if(v!==1&&(v<1||j(h)[0]!==b.maxZoom[h]))ma(j(h),A([v,
0,0,1,-v*m+u,0],j(h)));if(B!==1&&(B<1||j(i)[3]!==b.maxZoom[i]))ma(j(i),A([1,0,0,B,0,-B*n+E],j(i)));K();f=V(f);t[h]=f[h];t[i]=f[i];x=e;ka();Z();fa()}oa=null},1))}};this.setXRange=function(a,d,e){d=b.modelArea[0]+b.modelArea[2]*d;e=b.modelArea[0]+b.modelArea[2]*e;if(d<o(b.modelArea))d=o(b.modelArea);if(e>r(b.modelArea))e=r(b.modelArea);var f=b.series[a];if(f.length!==0){a=V([d,0],true);var g=V([e,0],true),k=b.isHorizontal?i:h,m=b.isHorizontal?h:i,n=ra(a[k],f);if(n<0)n=0;else{n++;if(f[n][2]===Y)n+=2}var v=
ra(g[k],f),u,B,E=Infinity,y=-Infinity;for(u=n;u<=v&&u<f.length;++u)if(f[u][2]!==Y&&f[u][2]!==sa){if(f[u][m]<E)E=f[u][m];if(f[u][m]>y)y=f[u][m]}if(n>0){B=n-1;if(f[B][2]===sa)B-=2;u=(a[k]-f[B][k])/(f[n][k]-f[B][k]);n=f[B][m]+u*(f[n][m]-f[B][m]);if(n<E)E=n;if(n>y)y=n}if(v<f.length-1){n=v+1;if(f[n][2]===Y)n+=2;u=(g[k]-f[v][k])/(f[n][k]-f[v][k]);n=f[v][m]+u*(f[n][m]-f[v][m]);if(n<E)E=n;if(n>y)y=n}d=b.modelArea[2]/(e-d);f=b.isHorizontal?2:3;e=b.area[f]/(y-E);e=b.area[f]/(b.area[f]/e+20);if(e>b.maxZoom[m])e=
b.maxZoom[m];a=b.isHorizontal?[a[i]-p(b.area),(E+y)/2-b.area[2]/e/2-o(b.area)]:[a[h]-o(b.area),-((E+y)/2+b.area[3]/e/2-q(b.area))];m=O(t);j(h)[0]=d;j(i)[3]=e;j(h)[4]=-a[h]*d;j(i)[5]=-a[i]*e;a=V(m);t[h]=a[h];t[i]=a[i];K();ka();Z();fa()}};this.getSeries=function(a){return b.series[a]};this.rangeChangedCallbacks=[];this.updateConfig=function(a){for(var d in a)if(a.hasOwnProperty(d))b[d]=a[d];Ia();ka();Z();fa()};this.updateConfig({});if(window.TouchEvent&&!window.MSPointerEvent&&!window.PointerEvent){S.touchStart=
J.start;S.touchEnd=J.end;S.touchMoved=J.moved}else{D=function(){};S.touchStart=D;S.touchEnd=D;S.touchMoved=D}});
