WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WPopupMenu",(function(n,t,e){t.wtObj=this;var i=n.WT,o=null,u=null,c=null;if(i.isIOS){$(t).bind("touchstart",T);$(t).bind("touchend",M)}function d(){a(t,null);t.style.display="none";setTimeout((function(){n.emit(t.id,"cancel")}),0)}function l(n,t){$(n).toggleClass("active",t)}function s(n){if(n.subMenu)return n.subMenu;var t=n.lastChild;if(t&&i.hasTag(t,"UL")){n.subMenu=t;t.parentItem=n;$(t).mousemove(r);m(t);return t}return null}function a(n,t){function e(n,t){if(n==t)return!0;if(t){var i=t.parentNode.parentItem;return!!i&&e(n,i)}return!1}!function n(i){var o,u;for(o=0,u=i.childNodes.length;o<u;++o){var c=i.childNodes[o];if(e(c,t)){if(c!==t){(d=s(c))&&n(d)}}else{l(c,!1);var d;if(d=s(c)){d.style.display="none";n(d)}}}}(n)}function r(n){for(var e=i.target(n);e&&!i.hasTag(e,"LI")&&!i.hasTag(e,"UL");)e=e.parentNode;if(i.hasTag(e,"LI")){if(e===u)return;u=e;l(e,!0);var o=s(e);o&&function(n){n.style.display="block";if(n.parentNode==n.parentItem){n.parentNode.removeChild(n);t.parentNode.appendChild(n)}var e=i.px(n,"paddingTop")+i.px(n,"borderTopWidth");i.positionAtWidget(n.id,n.parentItem.id,i.Horizontal,-e);a(n,null);if(i.isIOS){$(n).unbind("touchstart",T).bind("touchstart",T);$(n).unbind("touchend",M).bind("touchend",M)}}(o);a(t,e)}}function f(){!1;clearTimeout(o);e>=0&&(o=setTimeout(d,e))}function p(){!0;clearTimeout(o)}function m(n){$(n).mouseleave(f).mouseenter(p)}function h(){return null!=document.getElementById(t.id)}function b(n){!0;h()&&1!=i.button(n)&&d()}function v(n){if(h()){!1;d()}}function y(n){h()&&27==n.keyCode&&d()}this.setHidden=function(n){n||!1;if(o){clearTimeout(o);o=null}!1;u=null;if(n){t.style.position="";t.style.display="";t.style.left="";t.style.top="";$(document).unbind("mousedown",b);!function(){if(i.isIOS){$(document).unbind("touchstart",g);$(document).unbind("touchend",I)}else $(document).unbind("click",v)}();$(document).unbind("keydown",y)}else{setTimeout((function(){$(document).bind("mousedown",b);!function(){if(i.isIOS){$(document).bind("touchstart",g);$(document).bind("touchend",I)}else $(document).bind("click",v)}();$(document).bind("keydown",y)}),0);t.style.display="block"}a(t,null)};this.popupAt=function(n){m(n)};function g(n){var t=n.originalEvent.touches;c=t.length>1?null:{x:t[0].screenX,y:t[0].screenY}}function T(n){n.stopPropagation()}function I(n){if(c){var t=n.originalEvent.changedTouches[0];Math.abs(c.x-t.screenX)<20&&Math.abs(c.y-t.screenY)<20&&v();c=null}}function M(n){n.stopPropagation()}setTimeout((function(){m(t)}),0);$(t).mousemove(r)}));