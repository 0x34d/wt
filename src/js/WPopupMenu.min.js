WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WPopupMenu",function(q,c,k){function l(){q.emit(c.id,"cancel")}function r(a,b){$(a).toggleClass("active",b)}function m(a){if(a.subMenu)return a.subMenu;else{var b=a.lastChild;if(b&&f.hasTag(b,"UL")){a.subMenu=b;b.parentItem=a;$(b).mousemove(s);n(b);return b}}}function A(a){a.style.display="block";if(a.parentNode==a.parentItem){a.parentNode.removeChild(a);c.parentNode.appendChild(a)}f.positionAtWidget(a.id,a.parentItem.id,f.Horizontal,-f.px(a,"paddingTop"));
o(a,null)}function o(a,b){function t(i,d){if(i==d)return true;else if(d)return(d=d.parentNode.parentItem)?t(i,d):false;else return false}function u(i){var d,v;d=0;for(v=i.childNodes.length;d<v;++d){var e=i.childNodes[d];if(t(e,b)){if(e!==b)(e=m(e))&&u(e)}else{r(e,false);if(e=m(e))e.style.display="none"}}}u(a)}function s(a){for(a=f.target(a);a&&!f.hasTag(a,"LI")&&!f.hasTag(a,"UL");)a=a.parentNode;if(f.hasTag(a,"LI"))if(a!==p){p=a;r(a,true);var b=m(a);b&&A(b);o(c,a)}}function w(){--g;if(g==0){clearTimeout(h);
if(k>=0)h=setTimeout(l,k)}}function x(){++g;clearTimeout(h)}function n(a){$(a).mouseleave(w).mouseenter(x)}function y(){g||l()}function z(a){a.keyCode==27&&l()}jQuery.data(c,"obj",this);var B=this,f=q.WT,h=null,j=null,g=0,p=null;this.setHidden=function(a){if(h){clearTimeout(h);h=null}g=0;p=null;if(k>0&&!a){g=1;j||w()}if(a){c.style.position="";c.style.display="";c.style.left="";c.style.top="";$(document).unbind("click",y);$(document).unbind("keydown",z)}else{setTimeout(function(){$(document).bind("click",
y);$(document).bind("keydown",z)},0);c.style.display="block"}o(c,null)};this.popupAt=function(a){if(j!==a){j=a;n(j);x()}B.setHidden(false)};setTimeout(function(){n(c)},0);$(c).mousemove(s)});
