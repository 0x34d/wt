WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WPopupMenu",(function(e,t,n){t.wtObj=this;var o=e.WT,i=null,u=null,r=null;if(o.isIOS){t.addEventListener("touchstart",g);t.addEventListener("touchend",I)}function s(){c(t,null);t.style.display="none";setTimeout((function(){e.emit(t.id,"cancel")}),0)}function d(e,t){e.classList.toggle("active",t)}function a(e){if(e.subMenu)return e.subMenu;var t=e.lastChild;if(t&&o.hasTag(t,"UL")){e.subMenu=t;t.parentItem=e;t.addEventListener("mousemove",l);m(t);return t}return null}function c(e,t){function n(e,t){if(e==t)return!0;if(t){var o=t.parentNode.parentItem;return!!o&&n(e,o)}return!1}!function e(o){var i,u;for(i=0,u=o.childNodes.length;i<u;++i){var r=o.childNodes[i];if(n(r,t)){if(r!==t){(s=a(r))&&e(s)}}else{d(r,!1);var s;if(s=a(r)){s.style.display="none";e(s)}}}}(e)}function l(e){for(var n=o.target(e);n&&!o.hasTag(n,"LI")&&!o.hasTag(n,"UL");)n=n.parentNode;if(o.hasTag(n,"LI")){if(n===u)return;u=n;d(n,!0);var i=a(n);i&&function(e){e.style.display="block";if(e.parentNode==e.parentItem){e.parentNode.removeChild(e);t.parentNode.appendChild(e)}var n=o.px(e,"paddingTop")+o.px(e,"borderTopWidth");o.positionAtWidget(e.id,e.parentItem.id,o.Horizontal,-n);c(e,null);if(o.isIOS){e.removeEventListener("touchstart",g);e.addEventListener("touchstart",g);e.removeEventListener("touchend",I);e.addEventListener("touchend",I)}}(i);c(t,n)}}function f(){!1;clearTimeout(i);n>=0&&(i=setTimeout(s,n))}function v(){!0;clearTimeout(i)}function m(e){e.addEventListener("mouseleave",f);e.addEventListener("mouseenter",v)}function p(){return null!=document.getElementById(t.id)}function h(e){!0;p()&&1!=o.button(e)&&s()}function E(e){if(p()){!1;s()}}function L(e){p()&&27==e.keyCode&&s()}this.setHidden=function(e){e||!1;if(i){clearTimeout(i);i=null}!1;u=null;if(e){t.style.position="";t.style.display="";t.style.left="";t.style.top="";document.removeEventListener("mousedown",h);!function(){if(o.isIOS){document.removeEventListener("touchstart",y);document.removeEventListener("touchend",T)}else document.removeEventListener("click",E)}();document.removeEventListener("keydown",L)}else{setTimeout((function(){document.addEventListener("mousedown",h);!function(){if(o.isIOS){document.addEventListener("touchstart",y);document.addEventListener("touchend",T)}else document.addEventListener("click",E)}();document.addEventListener("keydown",L)}),0);t.style.display="block"}c(t,null)};this.popupAt=function(e){m(e)};function y(e){var t=e.originalEvent.touches;r=t.length>1?null:{x:t[0].screenX,y:t[0].screenY}}function g(e){e.stopPropagation()}function T(e){if(r){var t=e.originalEvent.changedTouches[0];Math.abs(r.x-t.screenX)<20&&Math.abs(r.y-t.screenY)<20&&E();r=null}}function I(e){e.stopPropagation()}setTimeout((function(){m(t)}),0);t.addEventListener("mousemove",l)}));