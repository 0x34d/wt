WT_DECLARE_WT_MEMBER(1,"WSuggestionPopup",function(o,e,v,w,l){function p(){return e.style.display!="none"}function k(){e.style.display="none"}function x(a){f.positionAtWidget(e.id,a.id,f.Vertical)}function y(a){a=a.target||a.srcElement;if(a.className!="content"){if(!f.hasTag(a,"DIV"))a=a.parentNode;q(a)}}function q(a){var b=a.firstChild;a=f.getElement(m);var g=b.innerHTML;b=b.getAttribute("sug");a.focus();v(a,g,b);k()}jQuery.data(e,"obj",this);var n=this,f=o.WT,i=null,m=null,r=false,s=null,t=null;
this.showPopup=function(){e.style.display="";i=null};this.editKeyDown=function(a,b){m=a.id;var g=i?f.getElement(i):null;if(p()&&g)if(b.keyCode==13||b.keyCode==9){q(g);f.cancelEvent(b);setTimeout(function(){a.focus()},0);return false}else if(b.keyCode==40||b.keyCode==38||b.keyCode==34||b.keyCode==33){if(b.type.toUpperCase()=="KEYDOWN"){r=true;f.cancelEvent(b,f.CancelDefaultAction)}if(b.type.toUpperCase()=="KEYPRESS"&&r==true){f.cancelEvent(b);return false}var c=g,h=g,j=b.keyCode==40||b.keyCode==34;
b=b.keyCode==34||b.keyCode==33?e.clientHeight/g.offsetHeight:1;var d;for(d=0;c&&d<b;++d){for(c=j?c.nextSibling:c.previousSibling;c&&c.nodeName.toUpperCase()=="DIV"&&c.style.display=="none";c=j?c.nextSibling:c.previousSibling)h=c;h=c||h}if(h&&h.nodeName.toUpperCase()=="DIV"){g.className=null;h.className="sel";i=h.id}return false}return b.keyCode!=13&&b.keyCode!=9};this.filtered=function(a){s=a;n.refilter()};this.refilter=function(){var a=i?f.getElement(i):null,b=f.getElement(m),g=w(b);if(l){var c=
g(null);if(c.length<l){k();return}else{c=c.substring(0,l);if(c!=s){k();if(c!=t){t=c;o.emit(e,"filter",c)}return}}}c=null;for(var h=e.lastChild.childNodes,j=0;j<h.length;j++){var d=h[j];if(d.nodeName.toUpperCase()=="DIV"){if(d.orig==null)d.orig=d.firstChild.innerHTML;else d.firstChild.innerHTML=d.orig;var u=g(d.firstChild.innerHTML);d.firstChild.innerHTML=u.suggestion;if(u.match){d.style.display="";if(c==null)c=d}else d.style.display="none";d.className=null}}if(c==null)k();else{if(!p()){x(b);n.showPopup();
a=null}if(!a||a.style.display=="none"){i=c.id;a=c;a.scrollIntoView()}a.className="sel";if(a.offsetTop+a.offsetHeight>e.scrollTop+e.clientHeight)a.scrollIntoView(false);else a.offsetTop<e.scrollTop&&a.scrollIntoView(true)}};this.editKeyUp=function(a,b){if(!((b.keyCode==13||b.keyCode==9)&&e.style.display=="none"))if(b.keyCode==27||b.keyCode==37||b.keyCode==39){e.style.display="none";b.keyCode==27&&a.blur()}else n.refilter()};e.lastChild.onclick=y;this.delayHide=function(){setTimeout(function(){e&&k()},
300)}});
