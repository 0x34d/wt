WT_DECLARE_WT_MEMBER(1,"WSuggestionPopup",function(t,f,x,C,r,y){function p(a){return $(a).hasClass("Wt-suggest-onedit")||$(a).hasClass("Wt-suggest-dropdown")}function c(){return f.style.display!="none"}function d(){f.style.display="none"}function i(a){e.positionAtWidget(f.id,a.id,e.Vertical)}function m(a){a=a||window.event;a=a.target||a.srcElement;if(a.className!="content"){for(;a&&!e.hasTag(a,"DIV");)a=a.parentNode;a&&o(a)}}function o(a){var b=a.firstChild,k=e.getElement(h),l=b.innerHTML;b=b.getAttribute("sug");
k.focus();t.emit(f,"select",a.id,k.id);x(k,l,b);d();h=null}function z(a,b){for(a=b?a.nextSibling:a.previousSibling;a;a=b?a.nextSibling:a.previousSibling)if(e.hasTag(a,"DIV"))if(a.style.display!="none")return a;return null}function u(a){var b=a.parentNode;if(a.offsetTop+a.offsetHeight>b.scrollTop+b.clientHeight)b.scrollTop=a.offsetTop+a.offsetHeight-b.clientHeight;else if(a.offsetTop<b.scrollTop)b.scrollTop=a.offsetTop}$(".Wt-domRoot").add(f);jQuery.data(f,"obj",this);var A=this,e=t.WT,n=null,h=null,
F=false,G=null,H=null,B=null,D=null,s=false;this.defaultValue=y;this.showPopup=function(){f.style.display="";D=n=null};this.editMouseMove=function(a,b){if(p(a))a.style.cursor=e.widgetCoordinates(a,b).x>a.offsetWidth-16?"default":""};this.editClick=function(a,b){if(p(a))if(e.widgetCoordinates(a,b).x>a.offsetWidth-16)if(h!=a.id||!c()){d();h=a.id;s=true;A.refilter()}else{h=null;d()}};this.editKeyDown=function(a,b){if(!p(a))return true;if(h!=a.id)if($(a).hasClass("Wt-suggest-onedit")){h=a.id;s=false}else if($(a).hasClass("Wt-suggest-dropdown")&&
b.keyCode==40){h=a.id;s=true}else{h=null;return true}var k=n?e.getElement(n):null;if(c()&&k)if(b.keyCode==13||b.keyCode==9){o(k);e.cancelEvent(b);setTimeout(function(){a.focus()},0);return false}else if(b.keyCode==40||b.keyCode==38||b.keyCode==34||b.keyCode==33){if(b.type.toUpperCase()=="KEYDOWN"){F=true;e.cancelEvent(b,e.CancelDefaultAction)}if(b.type.toUpperCase()=="KEYPRESS"&&F==true){e.cancelEvent(b);return false}var l=k,q=b.keyCode==40||b.keyCode==34;b=b.keyCode==34||b.keyCode==33?f.clientHeight/
k.offsetHeight:1;var j;for(j=0;l&&j<b;++j){var v=z(l,q);if(!v)break;l=v}if(l&&e.hasTag(l,"DIV")){k.className="";l.className="sel";n=l.id}return false}return b.keyCode!=13&&b.keyCode!=9};this.filtered=function(a){G=a;A.refilter()};this.refilter=function(){var a=n?e.getElement(n):null,b=e.getElement(h),k=C(b),l=f.lastChild.childNodes,q=k(null);D=b.value;if(r)if(q.length<r&&!s){d();return}else{var j=q.substring(0,r);if(j!=G){if(j!=H){H=j;t.emit(f,"filter",j)}if(!s){d();return}}}var v=j=null;q=s&&q.length==
0;var w,I;w=0;for(I=l.length;w<I;++w){var g=l[w];if(e.hasTag(g,"DIV")){if(g.orig==null)g.orig=g.firstChild.innerHTML;var E=k(g.orig),J=q||E.match;if(E.suggestion!=g.firstChild.innerHTML)g.firstChild.innerHTML=E.suggestion;if(J){if(g.style.display!="")g.style.display="";if(j==null)j=g;if(w==this.defaultValue)v=g}else if(g.style.display!="none")g.style.display="none";if(g.className!="")g.className=""}}if(j==null)d();else{if(!c()){i(b);A.showPopup();a=null}if(!a||a.style.display=="none"){a=v||j;a.parentNode.scrollTop=
0;n=a.id}a.className="sel";u(a)}};this.editKeyUp=function(a,b){if(h!=null)if(p(a))if(!((b.keyCode==13||b.keyCode==9)&&f.style.display=="none"))if(b.keyCode==27||b.keyCode==37||b.keyCode==39){f.style.display="none";if(b.keyCode==27){h=null;$(a).hasClass("Wt-suggest-dropdown")?d():a.blur()}}else if(a.value!=D)A.refilter();else(a=n?e.getElement(n):null)&&u(a)};f.lastChild.onclick=m;f.lastChild.onscroll=function(){if(B){clearTimeout(B);var a=e.getElement(h);a&&a.focus()}};this.delayHide=function(a){B=
setTimeout(function(){B=null;if(f&&(a==null||h==a.id))d()},300)}});
WT_DECLARE_WT_MEMBER(2,"WSuggestionPopupStdMatcher",function(t,f,x,C,r,y){function p(c){var d=c.value;c=c.selectionStart?c.selectionStart:d.length;for(var i=x?d.lastIndexOf(x,c-1)+1:0;i<c&&C.indexOf(d.charAt(i))!=-1;)++i;return{start:i,end:c}}this.match=function(c){var d=p(c),i=c.value.substring(d.start,d.end),m="^";if(r.length!=0)m="(^|(?:["+r+"]))";m+="("+i.replace(new RegExp("([\\^\\\\\\][\\-.$*+?()|{}])","g"),"\\$1")+")";m=new RegExp(m,"gi");return function(o){if(!o)return i;var z=false;if(i.length){var u=
o.replace(m,"$1"+t+"$2"+f);if(u!=o){z=true;o=u}}return{match:z,suggestion:o}}};this.replace=function(c,d,i){d=p(c);var m=c.value.substring(0,d.start)+i+y;if(d.end<c.value.length)m+=c.value.substring(d.end,c.value.length);c.value=m;if(c.selectionStart){c.selectionStart=d.start+i.length+y.length;c.selectionEnd=c.selectionStart}}});
