WT_DECLARE_WT_MEMBER(1,"WTreeView",function(m,d,i,p,q){function n(c){var a=-1,b=null,e=false,f=false,j=null;for(c=c.target||c.srcElement;c;){if(c.className.indexOf("c1 rh")==0){if(a==-1)a=0}else if(c.className.indexOf("Wt-tv-c")==0){if(c.className.indexOf("Wt-tv-c")==0)a=c.className.split(" ")[0].substring(7)*1;else if(a==-1)a=0;if(c.getAttribute("drop")==="true")f=true;j=c}else if(c.className=="Wt-tv-node"){b=c.id;break}if(c.className==="Wt-selected")e=true;c=c.parentNode;if(g.hasTag(c,"BODY"))break}return{columnId:a,
nodeId:b,selected:e,drop:f,el:j}}jQuery.data(d,"obj",this);var o=i.firstChild,k=p.firstChild,g=m.WT;this.click=function(c,a){var b=n(a);b.columnId!=-1&&m.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"clicked","","")};this.dblClick=function(c,a){var b=n(a);b.columnId!=-1&&m.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"dblclicked","","")};this.mouseDown=function(c,a){g.capture(null);var b=n(a);if(b.columnId!=-1){m.emit(d,{name:"itemEvent",eventObject:c,
event:a},b.nodeId,b.columnId,"mousedown","","");d.getAttribute("drag")==="true"&&b.selected&&m._p_.dragStart(d,a)}};this.mouseUp=function(c,a){var b=n(a);b.columnId!=-1&&m.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"mouseup","","")};this.resizeHandleMDown=function(c,a){a=g.pageCoordinates(a);c.setAttribute("dsx",a.x)};this.resizeHandleMMoved=function(c,a){var b=c.getAttribute("dsx"),e=k.lastChild.className.split(" ")[0];g.getCssRule("#"+d.id+" ."+e);if(b!=null&&b!=""){e=g.pageCoordinates(a);
var f=c.parentNode.parentNode;b=Math.max(e.x-b,-f.offsetWidth);if(f=f.className.split(" ")[0]){f=g.getCssRule("#"+d.id+" ."+f);var j=g.pxself(f,"width");f.style.width=Math.max(0,j+b)+"px"}this.adjustColumns();c.setAttribute("dsx",e.x);g.cancelEvent(a)}};this.resizeHandleMUp=function(c,a){c.removeAttribute("dsx");g.cancelEvent(a)};this.adjustColumns=function(){var c=o.firstChild,a=k.firstChild,b=0,e=0;e=k.lastChild.className.split(" ")[0];e=g.getCssRule("#"+d.id+" ."+e);if(q)a=a.firstChild;if(!g.isHidden(d)){for(var f=
0,j=a.childNodes.length;f<j;++f)if(a.childNodes[f].className){var h=a.childNodes[f].className.split(" ")[0];h=g.getCssRule("#"+d.id+" ."+h);b+=g.pxself(h,"width")+7}if(!e.style.width)e.style.width=k.offsetWidth-a.offsetWidth-8+"px";e=b+g.pxself(e,"width")+(g.isIE6?10:8);if(q){h=g.getCssRule("#"+d.id+" .Wt-tv-rowc");h.style.width=b+"px";$(d).find(" .Wt-tv-rowc").css("width",b+"px").css("width","");d.changed=true;this.autoJavaScript()}else{k.style.width=c.style.width=e+"px";a.style.width=b+"px"}}};
var l=null;d.handleDragDrop=function(c,a,b,e,f){if(l){l.className=l.classNameOrig;l=null}if(c!="end"){b=n(b);if(!b.selected&&b.drop&&b.columnId!=-1)if(c=="drop")m.emit(d.id,"itemEvent",b.nodeId,b.columnId,"drop",e,f);else{a.className="Wt-valid-drop";l=b.el;l.classNameOrig=l.className;l.className+=" Wt-drop-site"}else a.className=""}};this.autoJavaScript=function(){if(d.parentNode==null){d=i=p=o=k=null;this.autoJavaScript=function(){}}else if(!g.isHidden(d)){var c=$(d),a=c.innerWidth(),b=i.scrollHeight>
i.offsetHeight,e,f=null;if(c.hasClass("column1")){e=c.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];e=g.getCssRule("#"+d.id+" ."+e);f=g.pxself(e,"width")}if((!g.isIE||a>100)&&(a!=i.tw||b!=i.vscroll||f!=i.c0w||d.changed)){i.tw=a;i.vscroll=b;i.c0w=f;e=c.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];e=g.getCssRule("#"+d.id+" ."+e);var j=o.firstChild,h=g.getCssRule("#"+d.id+" .cwidth"),r=h.style.width==k.style.width,s=k.firstChild;h.style.width=a-(b?19:0)+"px";i.style.width=
a+"px";k.style.width=j.offsetWidth+"px";if(f!=null){f=a-f-(g.isIE6?10:8)-(b?19:0);if(f>0){h=Math.min(f,g.pxself(g.getCssRule("#"+d.id+" .Wt-tv-rowc"),"width"));a-=f-h;g.getCssRule("#"+d.id+" .Wt-tv-row").style.width=h+"px";c.find(" .Wt-tv-row").css("width",h+"px").css("width","");a-=b?19:0;k.style.width=a+"px";j.style.width=a+"px"}}else if(r){k.style.width=h.style.width;j.style.width=h.style.width}e.style.width=j.offsetWidth-s.offsetWidth-8+"px";d.changed=false}}};this.adjustColumns()});
