WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTreeView",(function(t,e,i,s,n,l){e.wtObj=this;var o,d=i.firstChild,a=s.firstChild,c=this,r=t.WT,h=!1,u=!1,f=!1;function m(t){for(var i=-1,s=null,n=!1,o=!1,d=null,a=r.target(t);a&&a!=e;){if(r.hasTag(a,"LI")){-1==i&&(i=0);s=a.id;break}if(a.className&&0==a.className.indexOf("Wt-tv-c")){0==a.className.indexOf("Wt-tv-c")?i=1*a.className.split(" ")[0].substring(7):-1==i&&(i=0);"true"===a.getAttribute("drop")&&(o=!0);d=a}$(a).hasClass(l)&&(n=!0);a=a.parentNode}return{columnId:i,nodeId:s,selected:n,drop:o,el:d}}this.click=function(i,s){var n=m(s);-1!=n.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"clicked","","")};this.dblClick=function(i,s){var n=m(s);-1!=n.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"dblclicked","","")};this.mouseDown=function(i,s){r.capture(null);var n=m(s);if(-1!=n.columnId){t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"mousedown","","");"true"===e.getAttribute("drag")&&n.selected&&t._p_.dragStart(e,s)}};this.mouseUp=function(i,s){var n=m(s);-1!=n.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"mouseup","","")};function v(i,s,n){var l=m(s);-1!=l.columnId&&t.emit(e,{name:"itemTouchEvent",eventObject:i,event:s},l.nodeId+":"+l.columnId,n)}this.touchStart=function(t,e){if(e.touches.length>1){clearTimeout(o);o=setTimeout((function(){v(t,e,"touchselect")}),1e3)}else{clearTimeout(o);o=setTimeout((function(){v(t,e,"touchselect")}),50)}};this.touchMove=function(t,e){1==e.touches.length&&o&&clearTimeout(o)};this.touchEnd=function(t,e){o&&clearTimeout(o)};this.rootClick=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","clicked","","")};this.rootDblClick=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","dblclicked","","")};this.rootMouseDown=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","mousedown","","")};this.rootMouseUp=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","mouseup","","")};this.resizeHandleMDown=function(i,s){var n=i.parentNode.className.split(" ")[0];if(n){var l=r.getCssRule("#"+e.id+" ."+n),o=r.pxself(l,"width"),d=-o,a=1e4,h=$(document.body).hasClass("Wt-rtl");if(h){var u=d;d=-a;a=-u}new r.SizeHandle(r,"h",i.offsetWidth,e.offsetHeight,d,a,"Wt-hsh2",(function(i){var s=o+(h?-i:i),d=1*n.substring(7);l.style.width=s+"px";c.adjustColumns();t.emit(e,"columnResized",d,parseInt(s))}),i,e,s,-2,-1)}};var p=!1;function w(){if(p&&h&&!r.isHidden(e)){p=!1;var i,s=d.firstChild,l=a.firstChild,o=0,u=a.lastChild.className.split(" ")[0],f=r.getCssRule("#"+e.id+" ."+u);n&&(l=l.firstChild);for(var m=0,v=l.childNodes.length;m<v;++m)if(l.childNodes[m].className){var w=l.childNodes[m].className.split(" ")[0];if("none"==(C=r.getCssRule("#"+e.id+" ."+w)).style.display)continue;o+=r.pxself(C,"width")+7}if(!n){if(r.isIE&&$(document.body).hasClass("Wt-rtl")){var g=r.getCssRule("#"+e.id+" .Wt-tv-row");g&&(g.style.width=o+"px")}if(f.style.width)$(e).find(".Wt-headerdiv ."+u).css("width",f.style.width);else{var W=e.scrollWidth-l.offsetWidth-9-15;W>0&&(f.style.width=W+"px")}}if("auto"!=f.style.width){i=o+r.pxself(f,"width")+(r.isIE6?10:7);if(n){var C;(C=r.getCssRule("#"+e.id+" .Wt-tv-rowc")).style.width=o+"px";c.wtResize();t.layouts2&&t.layouts2.adjust();r.isIE&&setTimeout((function(){$(e).find(".Wt-tv-rowc").css("width",o+"px").css("width","")}),0);e.changed=!0}else{a.style.width=s.style.width=i+"px";l.style.width=o+"px"}}}}this.adjustColumns=function(){if(!p){p=!0;setTimeout(w,0)}};this.setItemDropsEnabled=function(t){u=t};this.setRowDropsEnabled=function(t){f=t};var g,W=null,C=null;e.handleDragDrop=function(n,l,o,d,a){if(W){W.className=W.classNameOrig;W=null}if(C){!function(t){t.style.position="";t.dropVisual.remove();t.dropVisual=void 0}(C);C=null}if("end"!=n){var c=m(o);if(!c.selected&&c.drop&&u&&-1!=c.columnId)if("drop"==n)t.emit(e,{name:"itemEvent",eventObject:l,event:o},c.nodeId+":"+c.columnId,"drop",d,a);else{l.className="Wt-valid-drop";(W=c.el).classNameOrig=W.className;W.className=W.className+" Wt-drop-site"}else if(!c.selected&&f){var h,v="bottom";if(c.nodeId){h=$("#"+c.nodeId)[0];v=r.widgetCoordinates(h,o).y-h.clientHeight/2<=0?"top":"bottom"}else{var p=i.getElementsByClassName("Wt-tv-root");h=1==p.length?p[0].lastChild:s}if("drop"==n)t.emit(e,{name:"rowDropEvent",eventObject:l,event:o},c.nodeId+":"+c.columnId,d,a,v);else{l.className="Wt-valid-drop";!function(t,e){if("top"===e){var i=t.previousSibling;if(i){t=i;e="bottom"}}var s=document.createElement("div");s.className="Wt-drop-site-"+e;t.style.position="relative";t.appendChild(s);t.dropVisual=s;C=t}(h,v)}}else l.className=""}};this.wtResize=function(){h=!0;w();var t,l,o=$(e),u=null,f=r.pxself(e,"width");if(0==f)f=e.clientWidth;else if(r.boxSizing(e)){f-=r.px(e,"borderLeftWidth");f-=r.px(e,"borderRightWidth")}var m=i.offsetWidth-i.clientWidth;m>50&&(m=0);i.clientWidth>0&&(f-=m);if(o.hasClass("column1")){t=o.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];l=r.getCssRule("#"+e.id+" ."+t);u=r.pxself(l,"width")}if((!r.isIE||f>100)&&(f!=i.tw||u!=i.c0w||e.changed)){var v=!e.changed;i.tw=f;i.c0w=u;t=o.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];l=r.getCssRule("#"+e.id+" ."+t);var p=d.firstChild,g=r.getCssRule("#"+e.id+" .cwidth"),W=g.style.width==p.offsetWidth+1+"px",C=a.firstChild;g.style.width=f+"px";i.style.width=f+m+"px";if(!$(document.body).hasClass("Wt-rtl")){s.style.marginRight=m+"px";$("#"+e.id+" .Wt-scroll").css("marginRight",m+"px")}if(null!=u){var b=f-u-(r.isIE6?10:7);if(b>0){var y=Math.min(b,r.pxself(r.getCssRule("#"+e.id+" .Wt-tv-rowc"),"width"));f-=b-y;a.style.width=f+"px";p.style.width=f+"px";r.getCssRule("#"+e.id+" .Wt-tv-row").style.width=y+"px";r.isIE&&setTimeout((function(){o.find(" .Wt-tv-row").css("width",y+"px").css("width","")}),0)}}else if(W){a.style.width=g.style.width;p.style.width=g.style.width}else a.style.width=p.offsetWidth+"px";!n&&p.offsetWidth-C.offsetWidth>=7&&(l.style.width=p.offsetWidth-C.offsetWidth-7+"px");e.changed=!1;v&&c.adjustColumns()}};this.scrollTo=function(t,e,s,n){if(-1!=e){e*=s;var l=i.scrollTop,o=i.clientHeight;0==n&&(l+o<e?n=1:e<l&&(n=2));switch(n){case 1:i.scrollTop=e;break;case 2:i.scrollTop=e-(o-s);break;case 3:i.scrollTop=e-(o-s)/2}window.fakeEvent={object:i};i.onscroll(window.fakeEvent);window.fakeEvent=null}};this.setRowHeight=function(t){g=t};var b=function(){if(0!=g){var t=i.scrollTop;d.children[0].children[0].style.backgroundPosition="0px "+Math.floor(t/(2*g))*(2*g)+"px"}};i.addEventListener?i.addEventListener("scroll",b):i.attachEvent&&i.attachEvent("onscroll",b);c.adjustColumns()}));