WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTreeView",function(l,c,i,t,r){function p(d){var a=-1,b=null,e=false,h=false,g=null;for(d=f.target(d);d;){if(d.className.indexOf("c1 rh")==0){if(a==-1)a=0}else if(d.className.indexOf("Wt-tv-c")==0){if(d.className.indexOf("Wt-tv-c")==0)a=d.className.split(" ")[0].substring(7)*1;else if(a==-1)a=0;if(d.getAttribute("drop")==="true")h=true;g=d}else if(d.className=="Wt-tv-node"){b=d.id;break}if(d.className==="Wt-selected")e=true;d=d.parentNode;if(f.hasTag(d,
"BODY"))break}return{columnId:a,nodeId:b,selected:e,drop:h,el:g}}function x(){if(s)if(!(f.isHidden(c)||c.offsetWidth<20)){s=false;var d=u.firstChild,a=m.firstChild,b=0,e=0,h=m.lastChild.className.split(" ")[0];e=f.getCssRule("#"+c.id+" ."+h);if(r)a=a.firstChild;for(var g=0,k=a.childNodes.length;g<k;++g)if(a.childNodes[g].className){var j=a.childNodes[g].className.split(" ")[0];j=f.getCssRule("#"+c.id+" ."+j);if(j.style.display!="none")b+=f.pxself(j,"width")+7}if(!r){if(f.isIE&&$(document.body).hasClass("Wt-rtl"))if(g=
f.getCssRule("#"+c.id+" .Wt-tv-row"))g.style.width=b+"px";if(e.style.width)$(c).find(".Wt-headerdiv ."+h).css("width",e.style.width);else{h=c.clientWidth-a.offsetWidth-8;if(h>0)e.style.width=h+"px"}}e=b+f.pxself(e,"width")+(f.isIE6?10:7);if(r){j=f.getCssRule("#"+c.id+" .Wt-tv-rowc");j.style.width=b+"px";f.isIE&&setTimeout(function(){$(c).find(".Wt-tv-rowc").css("width",b+"px").css("width","")},0);c.changed=true}else{m.style.width=d.style.width=e+"px";a.style.width=b+"px"}}}jQuery.data(c,"obj",this);
var u=i.firstChild,m=t.firstChild,v=this,f=l.WT;this.click=function(d,a){var b=p(a);b.columnId!=-1&&l.emit(c,{name:"itemEvent",eventObject:d,event:a},b.nodeId,b.columnId,"clicked","","")};this.dblClick=function(d,a){var b=p(a);b.columnId!=-1&&l.emit(c,{name:"itemEvent",eventObject:d,event:a},b.nodeId,b.columnId,"dblclicked","","")};this.mouseDown=function(d,a){f.capture(null);var b=p(a);if(b.columnId!=-1){l.emit(c,{name:"itemEvent",eventObject:d,event:a},b.nodeId,b.columnId,"mousedown","","");c.getAttribute("drag")===
"true"&&b.selected&&l._p_.dragStart(c,a)}};this.mouseUp=function(d,a){var b=p(a);b.columnId!=-1&&l.emit(c,{name:"itemEvent",eventObject:d,event:a},b.nodeId,b.columnId,"mouseup","","")};this.resizeHandleMDown=function(d,a){var b=d.parentNode.className.split(" ")[0];if(b){var e=f.getCssRule("#"+c.id+" ."+b),h=f.pxself(e,"width"),g=-h,k=1E4,j=$(document.body).hasClass("Wt-rtl");if(j){var w=g;g=-k;k=-w}new f.SizeHandle(f,"h",d.offsetWidth,c.offsetHeight,g,k,"Wt-hsh",function(n){n=h+(j?-n:n);var q=b.substring(7)*
1;e.style.width=n+"px";v.adjustColumns();l.emit(c,"columnResized",q,parseInt(n))},d,c,a,-2,-1)}};var s=false;this.adjustColumns=function(){if(!s){s=true;setTimeout(x,0)}};var o=null;c.handleDragDrop=function(d,a,b,e,h){if(o){o.className=o.classNameOrig;o=null}if(d!="end"){var g=p(b);if(!g.selected&&g.drop&&g.columnId!=-1)if(d=="drop")l.emit(c,{name:"itemEvent",eventObject:a,event:b},g.nodeId,g.columnId,"drop",e,h);else{a.className="Wt-valid-drop";o=g.el;o.classNameOrig=o.className;o.className+=" Wt-drop-site"}else a.className=
""}};this.autoJavaScript=function(){if(c.parentNode==null){c=i=t=u=m=null;this.autoJavaScript=function(){}}else if(!(f.isHidden(c)||c.offsetWidth<20)){x();var d=$(c),a,b=null,e=f.pxself(c,"width");if(e==0)e=c.clientWidth;else if(f.boxSizing(c)){e-=f.px(c,"borderLeftWidth");e-=f.px(c,"borderRightWidth")}var h=i.offsetWidth-i.clientWidth;if(i.clientWidth>0)e-=h;if(d.hasClass("column1")){a=d.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];a=f.getCssRule("#"+c.id+" ."+a);b=f.pxself(a,"width")}if((!f.isIE||
e>100)&&(e!=i.tw||b!=i.c0w||c.changed)){var g=!c.changed;i.tw=e;i.c0w=b;a=d.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];a=f.getCssRule("#"+c.id+" ."+a);var k=u.firstChild,j=f.getCssRule("#"+c.id+" .cwidth"),w=j.style.width==k.offsetWidth+1+"px",n=m.firstChild;j.style.width=e+"px";i.style.width=e+h+"px";if(!f.isIE)t.style.marginRight=h+"px";if(b!=null){b=e-b-(f.isIE6?10:7);if(b>0){var q=Math.min(b,f.pxself(f.getCssRule("#"+c.id+" .Wt-tv-rowc"),"width"));e-=b-q;m.style.width=e+"px";
k.style.width=e+"px";f.getCssRule("#"+c.id+" .Wt-tv-row").style.width=q+"px";f.isIE&&setTimeout(function(){d.find(" .Wt-tv-row").css("width",q+"px").css("width","")},0)}}else if(w){m.style.width=j.style.width;k.style.width=j.style.width}else m.style.width=k.offsetWidth+"px";if(!r&&k.offsetWidth-n.offsetWidth>=7)a.style.width=k.offsetWidth-n.offsetWidth-7+"px";c.changed=false;g&&v.adjustColumns()}}};this.scrollTo=function(d,a,b,e){if(a!=-1){a*=b;d=i.scrollTop;var h=i.clientHeight;if(e==0)if(d+h<a)e=
1;else if(a<d)e=2;switch(e){case 1:i.scrollTop=a;break;case 2:i.scrollTop=a-(h-b);break;case 3:i.scrollTop=a-(h-b)/2;break}window.fakeEvent={object:i};i.onscroll(window.fakeEvent);window.fakeEvent=null}};v.adjustColumns()});
