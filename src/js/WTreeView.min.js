WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTreeView",function(k,d,i,v,r){function p(b){var a=-1,c=null,f=false,g=false,h=null;for(b=e.target(b);b&&b!=d;){if(e.hasTag(b,"LI")){if(a==-1)a=0;c=b.id;break}else if(b.className.indexOf("Wt-tv-c")==0){if(b.className.indexOf("Wt-tv-c")==0)a=b.className.split(" ")[0].substring(7)*1;else if(a==-1)a=0;if(b.getAttribute("drop")==="true")g=true;h=b}if($(b).hasClass("Wt-selected"))f=true;b=b.parentNode}return{columnId:a,nodeId:c,selected:f,drop:g,el:h}}function w(){if(s&&
x)if(!e.isHidden(d)){s=false;var b=y.firstChild,a=o.firstChild,c=0,f=0,g=o.lastChild.className.split(" ")[0];f=e.getCssRule("#"+d.id+" ."+g);if(r)a=a.firstChild;for(var h=0,l=a.childNodes.length;h<l;++h)if(a.childNodes[h].className){var j=a.childNodes[h].className.split(" ")[0];j=e.getCssRule("#"+d.id+" ."+j);if(j.style.display!="none")c+=e.pxself(j,"width")+7}if(!r){if(e.isIE&&$(document.body).hasClass("Wt-rtl"))if(h=e.getCssRule("#"+d.id+" .Wt-tv-row"))h.style.width=c+"px";if(f.style.width)$(d).find(".Wt-headerdiv ."+
g).css("width",f.style.width);else{g=d.scrollWidth-a.offsetWidth-9-15;if(g>0)f.style.width=g+"px"}}f=c+e.pxself(f,"width")+(e.isIE6?10:7);if(r){j=e.getCssRule("#"+d.id+" .Wt-tv-rowc");j.style.width=c+"px";k.layouts2.adjust();e.isIE&&setTimeout(function(){$(d).find(".Wt-tv-rowc").css("width",c+"px").css("width","")},0);d.changed=true}else{o.style.width=b.style.width=f+"px";a.style.width=c+"px"}}}jQuery.data(d,"obj",this);var y=i.firstChild,o=v.firstChild,t=this,e=k.WT,x=false;this.click=function(b,
a){var c=p(a);c.columnId!=-1&&k.emit(d,{name:"itemEvent",eventObject:b,event:a},c.nodeId+":"+c.columnId,"clicked","","");e.cancelEvent(a)};this.dblClick=function(b,a){var c=p(a);if(c.columnId!=-1){k.emit(d,{name:"itemEvent",eventObject:b,event:a},c.nodeId+":"+c.columnId,"dblclicked","","");e.cancelEvent(a)}};this.mouseDown=function(b,a){e.capture(null);var c=p(a);if(c.columnId!=-1){k.emit(d,{name:"itemEvent",eventObject:b,event:a},c.nodeId+":"+c.columnId,"mousedown","","");d.getAttribute("drag")===
"true"&&c.selected&&k._p_.dragStart(d,a);e.cancelEvent(a)}};this.mouseUp=function(b,a){var c=p(a);if(c.columnId!=-1){k.emit(d,{name:"itemEvent",eventObject:b,event:a},c.nodeId+":"+c.columnId,"mouseup","","");e.cancelEvent(a)}};this.rootClick=function(b,a){k.emit(d,{name:"itemEvent",eventObject:b,event:a},"","clicked","","")};this.rootDblclick=function(b,a){k.emit(d,{name:"itemEvent",eventObject:b,event:a},"","dblclicked","","")};this.rootMouseDown=function(b,a){k.emit(d,{name:"itemEvent",eventObject:b,
event:a},"","mousedown","","")};this.rootMouseUp=function(b,a){k.emit(d,{name:"itemEvent",eventObject:b,event:a},"","mouseup","","")};this.resizeHandleMDown=function(b,a){var c=b.parentNode.className.split(" ")[0];if(c){var f=e.getCssRule("#"+d.id+" ."+c),g=e.pxself(f,"width"),h=-g,l=1E4,j=$(document.body).hasClass("Wt-rtl");if(j){var u=h;h=-l;l=-u}new e.SizeHandle(e,"h",b.offsetWidth,d.offsetHeight,h,l,"Wt-hsh",function(m){m=g+(j?-m:m);var q=c.substring(7)*1;f.style.width=m+"px";t.adjustColumns();
k.emit(d,"columnResized",q,parseInt(m))},b,d,a,-2,-1)}};var s=false;this.adjustColumns=function(){if(!s){s=true;setTimeout(w,0)}};var n=null;d.handleDragDrop=function(b,a,c,f,g){if(n){n.className=n.classNameOrig;n=null}if(b!="end"){var h=p(c);if(!h.selected&&h.drop&&h.columnId!=-1)if(b=="drop")k.emit(d,{name:"itemEvent",eventObject:a,event:c},h.nodeId+":"+h.columnId,"drop",f,g);else{a.className="Wt-valid-drop";n=h.el;n.classNameOrig=n.className;n.className+=" Wt-drop-site"}else a.className=""}};this.wtResize=
function(){x=true;w();var b=$(d),a,c=null,f=e.pxself(d,"width");if(f==0)f=d.clientWidth;else if(e.boxSizing(d)){f-=e.px(d,"borderLeftWidth");f-=e.px(d,"borderRightWidth")}var g=i.offsetWidth-i.clientWidth;if(g>50)g=0;if(i.clientWidth>0)f-=g;if(b.hasClass("column1")){a=b.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];a=e.getCssRule("#"+d.id+" ."+a);c=e.pxself(a,"width")}if((!e.isIE||f>100)&&(f!=i.tw||c!=i.c0w||d.changed)){var h=!d.changed;i.tw=f;i.c0w=c;a=b.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];
a=e.getCssRule("#"+d.id+" ."+a);var l=y.firstChild,j=e.getCssRule("#"+d.id+" .cwidth"),u=j.style.width==l.offsetWidth+1+"px",m=o.firstChild;j.style.width=f+"px";i.style.width=f+g+"px";if(!$(document.body).hasClass("Wt-rtl")||!e.isIElt9){v.style.marginRight=g+"px";$("#"+d.id+" .Wt-scroll").css("marginRight",g+"px")}if(c!=null){c=f-c-(e.isIE6?10:7);if(c>0){var q=Math.min(c,e.pxself(e.getCssRule("#"+d.id+" .Wt-tv-rowc"),"width"));f-=c-q;o.style.width=f+"px";l.style.width=f+"px";e.getCssRule("#"+d.id+
" .Wt-tv-row").style.width=q+"px";e.isIE&&setTimeout(function(){b.find(" .Wt-tv-row").css("width",q+"px").css("width","")},0)}}else if(u){o.style.width=j.style.width;l.style.width=j.style.width}else o.style.width=l.offsetWidth+"px";if(!r&&l.offsetWidth-m.offsetWidth>=7)a.style.width=l.offsetWidth-m.offsetWidth-7+"px";d.changed=false;h&&t.adjustColumns()}};this.scrollTo=function(b,a,c,f){if(a!=-1){a*=c;b=i.scrollTop;var g=i.clientHeight;if(f==0)if(b+g<a)f=1;else if(a<b)f=2;switch(f){case 1:i.scrollTop=
a;break;case 2:i.scrollTop=a-(g-c);break;case 3:i.scrollTop=a-(g-c)/2;break}window.fakeEvent={object:i};i.onscroll(window.fakeEvent);window.fakeEvent=null}};t.adjustColumns()});
