WT_DECLARE_WT_MEMBER(1,"WTreeView",function(l,d,j,s,p){function o(b){var a=-1,c=null,f=false,g=false,h=null;for(b=b.target||b.srcElement;b;){if(b.className.indexOf("c1 rh")==0){if(a==-1)a=0}else if(b.className.indexOf("Wt-tv-c")==0){if(b.className.indexOf("Wt-tv-c")==0)a=b.className.split(" ")[0].substring(7)*1;else if(a==-1)a=0;if(b.getAttribute("drop")==="true")g=true;h=b}else if(b.className=="Wt-tv-node"){c=b.id;break}if(b.className==="Wt-selected")f=true;b=b.parentNode;if(e.hasTag(b,"BODY"))break}return{columnId:a,
nodeId:c,selected:f,drop:g,el:h}}jQuery.data(d,"obj",this);var q=j.firstChild,k=s.firstChild,r=this,e=l.WT;this.click=function(b,a){var c=o(a);c.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:b,event:a},c.nodeId,c.columnId,"clicked","","")};this.dblClick=function(b,a){var c=o(a);c.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:b,event:a},c.nodeId,c.columnId,"dblclicked","","")};this.mouseDown=function(b,a){e.capture(null);var c=o(a);if(c.columnId!=-1){l.emit(d,{name:"itemEvent",eventObject:b,
event:a},c.nodeId,c.columnId,"mousedown","","");d.getAttribute("drag")==="true"&&c.selected&&l._p_.dragStart(d,a)}};this.mouseUp=function(b,a){var c=o(a);c.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:b,event:a},c.nodeId,c.columnId,"mouseup","","")};this.resizeHandleMDown=function(b,a){var c=b.parentNode.parentNode.className.split(" ")[0];if(c){var f=e.getCssRule("#"+d.id+" ."+c),g=e.pxself(f,"width");new e.SizeHandle(e,"h",b.offsetWidth,d.offsetHeight,-g,1E4,"Wt-hsh",function(h){h=g+h;var m=
c.substring(7)*1;f.style.width=h+"px";r.adjustColumns();l.emit(d,"columnResized",m,h)},b,d,a,-2,-1)}};this.adjustColumns=function(){var b=q.firstChild,a=k.firstChild,c=0,f=0;f=k.lastChild.className.split(" ")[0];var g=e.getCssRule("#"+d.id+" ."+f);if(p)a=a.firstChild;if(!e.isHidden(d)){for(var h=0,m=a.childNodes.length;h<m;++h)if(a.childNodes[h].className){var i=a.childNodes[h].className.split(" ")[0];i=e.getCssRule("#"+d.id+" ."+i);c+=e.pxself(i,"width")+7}if(!p)if(g.style.width)$(d).find(".Wt-headerdiv ."+
f).css("width",g.style.width);else g.style.width=k.offsetWidth-a.offsetWidth-8+"px";f=c+e.pxself(g,"width")+(e.isIE6?10:8);if(p){i=e.getCssRule("#"+d.id+" .Wt-tv-rowc");i.style.width=c+"px";$(d).find(".Wt-tv-rowc").css("width",c+"px").css("width","");d.changed=true;this.autoJavaScript()}else{k.style.width=b.style.width=f+"px";a.style.width=c+"px"}}};var n=null;d.handleDragDrop=function(b,a,c,f,g){if(n){n.className=n.classNameOrig;n=null}if(b!="end"){var h=o(c);if(!h.selected&&h.drop&&h.columnId!=
-1)if(b=="drop")l.emit(d,{name:"itemEvent",eventObject:a,event:c},h.nodeId,h.columnId,"drop",f,g);else{a.className="Wt-valid-drop";n=h.el;n.classNameOrig=n.className;n.className+=" Wt-drop-site"}else a.className=""}};this.autoJavaScript=function(){if(d.parentNode==null){d=j=s=q=k=null;this.autoJavaScript=function(){}}else if(!e.isHidden(d)){var b=$(d),a=b.innerWidth(),c=j.scrollHeight>j.offsetHeight,f,g=null;if(b.hasClass("column1")){f=b.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];
f=e.getCssRule("#"+d.id+" ."+f);g=e.pxself(f,"width")}if((!e.isIE||a>100)&&(a!=j.tw||c!=j.vscroll||g!=j.c0w||d.changed)){var h=!d.changed;j.tw=a;j.vscroll=c;j.c0w=g;f=b.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];f=e.getCssRule("#"+d.id+" ."+f);var m=q.firstChild,i=e.getCssRule("#"+d.id+" .cwidth"),t=i.style.width==k.style.width,u=k.firstChild;i.style.width=a-(c?19:0)+"px";j.style.width=a+"px";k.style.width=m.offsetWidth+"px";if(g!=null){g=a-g-(e.isIE6?10:8)-(c?19:0);if(g>0){i=
Math.min(g,e.pxself(e.getCssRule("#"+d.id+" .Wt-tv-rowc"),"width"));a-=g-i;e.getCssRule("#"+d.id+" .Wt-tv-row").style.width=i+"px";b.find(" .Wt-tv-row").css("width",i+"px").css("width","");a-=c?19:0;k.style.width=a+"px";m.style.width=a+"px"}}else if(t){k.style.width=i.style.width;m.style.width=i.style.width}if(!p)f.style.width=m.offsetWidth-u.offsetWidth-8+"px";d.changed=false;h&&e.isIE&&r.adjustColumns()}}};r.adjustColumns()});
