WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTreeView",(function(t,e,i,s,l,n){e.wtObj=this;var o,d=i.firstChild,c=s.firstChild,a=this,r=t.WT,u=!1,h=!1,f=!1;function m(t){for(var i=-1,s=null,l=!1,o=!1,d=null,c=r.target(t);c&&c!=e;){if(r.hasTag(c,"LI")){-1==i&&(i=0);s=c.id;break}if(c.className&&0==c.className.indexOf("Wt-tv-c")){0==c.className.indexOf("Wt-tv-c")?i=1*c.className.split(" ")[0].substring(7):-1==i&&(i=0);"true"===c.getAttribute("drop")&&(o=!0);d=c}c.classList.contains(n)&&(l=!0);c=c.parentNode}return{columnId:i,nodeId:s,selected:l,drop:o,el:d}}this.click=function(i,s){var l=m(s);-1!=l.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},l.nodeId+":"+l.columnId,"clicked","","")};this.dblClick=function(i,s){var l=m(s);-1!=l.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},l.nodeId+":"+l.columnId,"dblclicked","","")};this.mouseDown=function(i,s){r.capture(null);var l=m(s);if(-1!=l.columnId){t.emit(e,{name:"itemEvent",eventObject:i,event:s},l.nodeId+":"+l.columnId,"mousedown","","");"true"===e.getAttribute("drag")&&l.selected&&t._p_.dragStart(e,s)}};this.mouseUp=function(i,s){var l=m(s);-1!=l.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},l.nodeId+":"+l.columnId,"mouseup","","")};function v(i,s,l){var n=m(s);-1!=n.columnId&&t.emit(e,{name:"itemTouchEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,l)}this.touchStart=function(t,e){if(e.touches.length>1){clearTimeout(o);o=setTimeout((function(){v(t,e,"touchselect")}),1e3)}else{clearTimeout(o);o=setTimeout((function(){v(t,e,"touchselect")}),50)}};this.touchMove=function(t,e){1==e.touches.length&&o&&clearTimeout(o)};this.touchEnd=function(t,e){o&&clearTimeout(o)};this.rootClick=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","clicked","","")};this.rootDblClick=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","dblclicked","","")};this.rootMouseDown=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","mousedown","","")};this.rootMouseUp=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","mouseup","","")};this.resizeHandleMDown=function(i,s){var l=i.parentNode.className.split(" ")[0];if(l){var n=r.getCssRule("#"+e.id+" ."+l),o=r.pxself(n,"width"),d=-o,c=1e4,u=document.body.classList.contains("Wt-rtl");if(u){var h=d;d=-c;c=-h}new r.SizeHandle(r,"h",i.offsetWidth,e.offsetHeight,d,c,"Wt-hsh2",(function(i){var s=o+(u?-i:i),d=1*l.substring(7);n.style.width=s+"px";a.adjustColumns();t.emit(e,"columnResized",d,parseInt(s))}),i,e,s,-2,-1)}};var p=!1;function w(){if(p&&u&&!r.isHidden(e)){p=!1;var i,s=d.firstChild,n=c.firstChild,o=0,h=c.lastChild.className.split(" ")[0],f=r.getCssRule("#"+e.id+" ."+h);l&&(n=n.firstChild);for(var m=0,v=n.childNodes.length;m<v;++m)if(n.childNodes[m].className){var w=n.childNodes[m].className.split(" ")[0];if("none"==(W=r.getCssRule("#"+e.id+" ."+w)).style.display)continue;o+=r.pxself(W,"width")+7}if(!l){if(r.isIE&&document.body.classList.contains("Wt-rtl")){var g=r.getCssRule("#"+e.id+" .Wt-tv-row");g&&(g.style.width=o+"px")}if(f.style.width)e.querySelectorAll(`.Wt-headerdiv .${h}`).forEach((function(t){t.style.width=f.style.width}));else{var y=e.scrollWidth-n.offsetWidth-9-15;y>0&&(f.style.width=y+"px")}}if("auto"!=f.style.width){i=o+r.pxself(f,"width")+(r.isIE6?10:7);if(l){var W;(W=r.getCssRule("#"+e.id+" .Wt-tv-rowc")).style.width=o+"px";a.wtResize();t.layouts2&&t.layouts2.adjust();e.changed=!0}else{c.style.width=s.style.width=i+"px";n.style.width=o+"px"}}}}this.adjustColumns=function(){if(!p){p=!0;setTimeout(w,0)}};this.setItemDropsEnabled=function(t){h=t};this.setRowDropsEnabled=function(t){f=t};var g,y=null,W=null;e.handleDragDrop=function(l,n,o,d,c){if(y){y.className=y.classNameOrig;y=null}if(W){!function(t){t.style.position="";t.dropVisual.remove();t.dropVisual=void 0}(W);W=null}if("end"!=l){var a=m(o);if(!a.selected&&a.drop&&h&&-1!=a.columnId)if("drop"==l)t.emit(e,{name:"itemEvent",eventObject:n,event:o},a.nodeId+":"+a.columnId,"drop",d,c);else{n.className="Wt-valid-drop";(y=a.el).classNameOrig=y.className;y.className=y.className+" Wt-drop-site"}else if(!a.selected&&f){var u,v="bottom";if(a.nodeId){u=r.$(a.nodeId);v=r.widgetCoordinates(u,o).y-u.clientHeight/2<=0?"top":"bottom"}else{var p=i.getElementsByClassName("Wt-tv-root");u=1==p.length?p[0].lastChild:s}if("drop"==l)t.emit(e,{name:"rowDropEvent",eventObject:n,event:o},a.nodeId+":"+a.columnId,d,c,v);else{n.className="Wt-valid-drop";!function(t,e){if("top"===e){var i=t.previousSibling;if(i){t=i;e="bottom"}}var s=document.createElement("div");s.className="Wt-drop-site-"+e;t.style.position="relative";t.appendChild(s);t.dropVisual=s;W=t}(u,v)}}else n.className=""}};this.wtResize=function(){u=!0;w();let t,n,o=null;var h=r.pxself(e,"width");if(0==h)h=e.clientWidth;else if(r.boxSizing(e)){h-=r.px(e,"borderLeftWidth");h-=r.px(e,"borderRightWidth")}var f=i.offsetWidth-i.clientWidth;f>50&&(f=0);i.clientWidth>0&&(h-=f);if(e.classList.contains("column1")){t=e.querySelector(".Wt-headerdiv").lastChild.className.split(" ")[0];n=r.getCssRule("#"+e.id+" ."+t);o=r.pxself(n,"width")}if((!r.isIE||h>100)&&(h!=i.tw||o!=i.c0w||e.changed)){var m=!e.changed;i.tw=h;i.c0w=o;t=e.querySelector(".Wt-headerdiv").lastChild.className.split(" ")[0];n=r.getCssRule("#"+e.id+" ."+t);var v=d.firstChild,p=r.getCssRule("#"+e.id+" .cwidth"),g=p.style.width==v.offsetWidth+1+"px",y=c.firstChild;p.style.width=h+"px";i.style.width=h+f+"px";if(!document.body.classList.contains("Wt-rtl")){s.style.marginRight=f+"px";document.querySelectorAll(`#${e.id} .Wt-scroll`).forEach((function(t){t.style.marginRight=f+"px"}))}if(null!=o){var W=h-o-(r.isIE6?10:7);if(W>0){var b=Math.min(W,r.pxself(r.getCssRule("#"+e.id+" .Wt-tv-rowc"),"width"));h-=W-b;c.style.width=h+"px";v.style.width=h+"px";r.getCssRule("#"+e.id+" .Wt-tv-row").style.width=b+"px"}}else if(g){c.style.width=p.style.width;v.style.width=p.style.width}else c.style.width=v.offsetWidth+"px";!l&&v.offsetWidth-y.offsetWidth>=7&&(n.style.width=v.offsetWidth-y.offsetWidth-7+"px");e.changed=!1;m&&a.adjustColumns()}};this.scrollTo=function(t,e,s,l){if(-1!=e){e*=s;var n=i.scrollTop,o=i.clientHeight;0==l&&(n+o<e?l=1:e<n&&(l=2));switch(l){case 1:i.scrollTop=e;break;case 2:i.scrollTop=e-(o-s);break;case 3:i.scrollTop=e-(o-s)/2}window.fakeEvent={object:i};i.onscroll(window.fakeEvent);window.fakeEvent=null}};this.setRowHeight=function(t){g=t};var b=function(){if(0!=g){var t=i.scrollTop;d.children[0].children[0].style.backgroundPosition="0px "+Math.floor(t/(2*g))*(2*g)+"px"}};i.addEventListener?i.addEventListener("scroll",b):i.attachEvent&&i.attachEvent("onscroll",b);a.adjustColumns()}));