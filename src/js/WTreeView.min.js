WT_DECLARE_WT_MEMBER(1,"WTreeView",function(m,d,i,q,p){function o(c){var a=-1,b=null,e=false,g=false,h=null;for(c=f.target(c);c;){if(c.className.indexOf("c1 rh")==0){if(a==-1)a=0}else if(c.className.indexOf("Wt-tv-c")==0){if(c.className.indexOf("Wt-tv-c")==0)a=c.className.split(" ")[0].substring(7)*1;else if(a==-1)a=0;if(c.getAttribute("drop")==="true")g=true;h=c}else if(c.className=="Wt-tv-node"){b=c.id;break}if(c.className==="Wt-selected")e=true;c=c.parentNode;if(f.hasTag(c,"BODY"))break}return{columnId:a,
nodeId:b,selected:e,drop:g,el:h}}jQuery.data(d,"obj",this);var r=i.firstChild,k=q.firstChild,s=this,f=m.WT;this.click=function(c,a){var b=o(a);b.columnId!=-1&&m.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"clicked","","")};this.dblClick=function(c,a){var b=o(a);b.columnId!=-1&&m.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"dblclicked","","")};this.mouseDown=function(c,a){f.capture(null);var b=o(a);if(b.columnId!=-1){m.emit(d,{name:"itemEvent",eventObject:c,
event:a},b.nodeId,b.columnId,"mousedown","","");d.getAttribute("drag")==="true"&&b.selected&&m._p_.dragStart(d,a)}};this.mouseUp=function(c,a){var b=o(a);b.columnId!=-1&&m.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"mouseup","","")};this.resizeHandleMDown=function(c,a){var b=c.parentNode.parentNode.className.split(" ")[0];if(b){var e=f.getCssRule("#"+d.id+" ."+b),g=f.pxself(e,"width");new f.SizeHandle(f,"h",c.offsetWidth,d.firstChild.offsetHeight,-g,1E4,"Wt-hsh",function(h){var l=
$(document.body).hasClass("Wt-rtl");h=g+(l?-h:h);l=b.substring(7)*1;e.style.width=h+"px";s.adjustColumns();m.emit(d,"columnResized",l,parseInt(h))},c,d,a,-2,-1)}};this.adjustColumns=function(){var c=r.firstChild,a=k.firstChild,b=0,e=0;e=k.lastChild.className.split(" ")[0];var g=f.getCssRule("#"+d.id+" ."+e);if(p)a=a.firstChild;if(!f.isHidden(d)){for(var h=0,l=a.childNodes.length;h<l;++h)if(a.childNodes[h].className){var j=a.childNodes[h].className.split(" ")[0];j=f.getCssRule("#"+d.id+" ."+j);if(j.style.display!=
"none")b+=f.pxself(j,"width")+7}if(!p)if(g.style.width)$(d).find(".Wt-headerdiv ."+e).css("width",g.style.width);else g.style.width=k.offsetWidth-a.offsetWidth-8+"px";e=b+f.pxself(g,"width")+(f.isIE6?10:8);if(p){j=f.getCssRule("#"+d.id+" .Wt-tv-rowc");j.style.width=b+"px";$(d).find(".Wt-tv-rowc").css("width",b+"px").css("width","");d.changed=true;this.autoJavaScript()}else{k.style.width=c.style.width=e+"px";a.style.width=b+"px"}}};var n=null;d.handleDragDrop=function(c,a,b,e,g){if(n){n.className=
n.classNameOrig;n=null}if(c!="end"){var h=o(b);if(!h.selected&&h.drop&&h.columnId!=-1)if(c=="drop")m.emit(d,{name:"itemEvent",eventObject:a,event:b},h.nodeId,h.columnId,"drop",e,g);else{a.className="Wt-valid-drop";n=h.el;n.classNameOrig=n.className;n.className+=" Wt-drop-site"}else a.className=""}};this.autoJavaScript=function(){if(d.parentNode==null){d=i=q=r=k=null;this.autoJavaScript=function(){}}else if(!f.isHidden(d)){var c=$(d),a=c.innerWidth(),b,e=null,g=i.offsetWidth-i.clientWidth;a-=g;if(c.hasClass("column1")){b=
c.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];b=f.getCssRule("#"+d.id+" ."+b);e=f.pxself(b,"width")}if((!f.isIE||a>100)&&(a!=i.tw||e!=i.c0w||d.changed)){var h=!d.changed;i.tw=a;i.c0w=e;b=c.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];b=f.getCssRule("#"+d.id+" ."+b);var l=r.firstChild,j=f.getCssRule("#"+d.id+" .cwidth"),t=j.style.width==k.style.width,u=k.firstChild;j.style.width=a+"px";i.style.width=a+g+"px";k.style.width=l.offsetWidth+"px";if(!f.isIE)q.style.marginRight=
g+"px";if(e!=null){e=a-e-(f.isIE6?10:8);if(e>0){g=Math.min(e,f.pxself(f.getCssRule("#"+d.id+" .Wt-tv-rowc"),"width"));a-=e-g;f.getCssRule("#"+d.id+" .Wt-tv-row").style.width=g+"px";c.find(" .Wt-tv-row").css("width",g+"px").css("width","");k.style.width=a+"px";l.style.width=a+"px"}}else if(t){k.style.width=j.style.width;l.style.width=j.style.width}if(!p)b.style.width=l.offsetWidth-u.offsetWidth-8+"px";d.changed=false;h&&s.adjustColumns()}}};this.scrollTo=function(c,a,b,e){if(a!=-1){a*=b;c=i.scrollTop;
var g=i.clientHeight;if(e==0)if(c+g<a)e=1;else if(a<c)e=2;switch(e){case 1:i.scrollTop=a;break;case 2:i.scrollTop=a-(g-b);break;case 3:i.scrollTop=a-(g-b)/2;break}i.onscroll({object:i})}};s.adjustColumns()});
