WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTextEdit",(function(e,t){t.wtObj=this;var i,o,n,r=0,d=this,s=e.WT;tinymce.dom.Event.domLoaded||(tinymce.dom.Event.domLoaded=!0);tinyMCE.init({mode:"none"});this.render=function(i,o,r){n=o;t.ed=new tinymce.Editor(t.id,i,tinymce.EditorManager);t.ed.render();r&&(tinymce.EditorManager.majorVersion<4?t.ed.onChange.add((function(){e.emit(t,"change")})):t.ed.on("change",(function(){e.emit(t,"change")})));setTimeout((function(){e.emit(t,"render")}),0)};this.init=function(){var e,r,a=s.getElement(t.id+"_ifr");if(tinymce.EditorManager.majorVersion<4){var p=a.parentNode.parentNode.parentNode.parentNode;r=p;e=p.parentNode}else{e=a.parentNode.parentNode.parentNode}if(r){r.style.cssText="width:100%;"+n;t.style.height=r.offsetHeight+"px"}e.wtResize=t.wtResize;s.isGecko?setTimeout((function(){d.wtResize(t,i,o,!0)}),100):d.wtResize(t,i,o,!0);a.contentDocument.body.addEventListener("paste",(function(e){var i,o,n=e.clipboardData||e.originalEvent.clipboardData;function r(e){return 0==e.indexOf("image/")}if(n&&n.types)for(i=0,o=n.types.length;i<o;++i){n.types[i];if(r(n.types[i])||r(n.items[i].type)){var d=n.items[i].getAsFile(),a=new FileReader;a.onload=function(e){t.ed.insertContent('<img src="'+this.result+'"></img>')};a.readAsDataURL(d);s.cancelEvent(e)}}}))};this.wtResize=function(n,a,p,l){if(!(p<0)){var h=s.getElement(n.id+"_ifr");if(h){var f,g,c=0;s.px(n,"marginLeft")+s.px(n,"marginRight");c=s.px(n,"marginTop")+s.px(n,"marginBottom");if(!s.boxSizing(n)){s.px(n,"borderLeftWidth")+s.px(n,"borderRightWidth")+s.px(n,"paddingLeft")+s.px(n,"paddingRight");c+=s.px(n,"borderTopWidth")+s.px(n,"borderBottomWidth")+s.px(n,"paddingTop")+s.px(n,"paddingBottom")}n.style.height=p-c+"px";var y="absolute"!==t.style.position;if(tinymce.EditorManager.majorVersion<4){var m=h.parentNode.parentNode,u=m.parentNode.parentNode;g=u;f=u.parentNode;y||void 0===a||(f.style.width=a-2+"px");for(x=0,v=u.rows.length;x<v;x++)u.rows[x]!=m&&(p-=u.rows[x].offsetHeight)}else{var x,v,E=h.parentNode,N=E.parentNode;f=N.parentNode;y||void 0===a||(f.style.width=a-2+"px");for(x=0,v=N.childNodes.length;x<v;x++)N.childNodes[x]!=E&&(p-=N.childNodes[x].offsetHeight+1);p-=1}if(p<0){if(r<10){var w=100*Math.pow(2,r);setTimeout((function(){d.wtResize(t,i,o,!0)}),w)}r+=1;return}p+="px";if(y){f.style.position="static";f.style.display="block"}else{f.style.position=n.style.position;f.style.left=n.style.left;f.style.top=n.style.top;!y&&g&&(g.style.width=a+"px");if(g){g.style.height=p+"px";f.style.height=n.style.height}}if(h.style.height!=p){r=0;h.style.height=p;e.layouts2&&e.layouts2.setElementDirty(t)}}else{i=a;o=p}}};o=t.offsetHeight;i=t.offsetWidth}));