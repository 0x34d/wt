WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTextEdit",(function(e,t){t.wtObj=this;var i,o,n,d=0,r=this,s=e.WT;tinymce.dom.Event.domLoaded||(tinymce.dom.Event.domLoaded=!0);tinyMCE.init({mode:"none"});this.render=function(i,o,d){n=o;t.ed=new tinymce.Editor(t.id,i,tinymce.EditorManager);t.ed.render();d&&(tinymce.EditorManager.majorVersion<4?t.ed.onChange.add((function(){e.emit(t,"change")})):t.ed.on("change",(function(){e.emit(t,"change")})));setTimeout((function(){e.emit(t,"render")}),0)};this.init=function(){var e,d,a,p=s.getElement(t.id+"_ifr");if(tinymce.EditorManager.majorVersion<4){var l=p.parentNode.parentNode.parentNode.parentNode;d=l;e=l.parentNode}else{e=p.parentNode.parentNode.parentNode}if(d){d.style.cssText="width:100%;"+n;t.style.height=d.offsetHeight+"px"}e.wtResize=t.wtResize;s.isGecko?setTimeout((function(){r.wtResize(t,i,o,!0)}),100):r.wtResize(t,i,o,!0);a=s.isIE?document.frames[p.id].document:p.contentDocument;$(a.body).bind("paste",(function(e){var i,o,n=e.clipboardData||e.originalEvent.clipboardData;function d(e){return 0==e.indexOf("image/")}if(n&&n.types)for(i=0,o=n.types.length;i<o;++i){n.types[i];if(d(n.types[i])||d(n.items[i].type)){var r=n.items[i].getAsFile(),a=new FileReader;a.onload=function(e){t.ed.insertContent('<img src="'+this.result+'"></img>')};a.readAsDataURL(r);s.cancelEvent(e)}}}))};this.wtResize=function(n,a,p,l){if(!(p<0)){var f=s.getElement(n.id+"_ifr");if(f){var h,g,c=0;s.px(n,"marginLeft")+s.px(n,"marginRight");c=s.px(n,"marginTop")+s.px(n,"marginBottom");if(!s.boxSizing(n)){s.px(n,"borderLeftWidth")+s.px(n,"borderRightWidth")+s.px(n,"paddingLeft")+s.px(n,"paddingRight");c+=s.px(n,"borderTopWidth")+s.px(n,"borderBottomWidth")+s.px(n,"paddingTop")+s.px(n,"paddingBottom")}n.style.height=p-c+"px";var m="absolute"!==t.style.position;if(tinymce.EditorManager.majorVersion<4){var y=f.parentNode.parentNode,u=y.parentNode.parentNode;g=u;h=u.parentNode;m||void 0===a||(h.style.width=a-2+"px");for(x=0,E=u.rows.length;x<E;x++)u.rows[x]!=y&&(p-=u.rows[x].offsetHeight)}else{var x,E,N=f.parentNode,v=N.parentNode;h=v.parentNode;m||void 0===a||(h.style.width=a-2+"px");for(x=0,E=v.childNodes.length;x<E;x++)v.childNodes[x]!=N&&(p-=v.childNodes[x].offsetHeight+1);p-=1}if(p<0){if(d<10){var w=100*Math.pow(2,d);setTimeout((function(){r.wtResize(t,i,o,!0)}),w)}d+=1;return}p+="px";if(m){h.style.position="static";h.style.display="block"}else{h.style.position=n.style.position;h.style.left=n.style.left;h.style.top=n.style.top;!m&&g&&(g.style.width=a+"px");if(g){g.style.height=p+"px";h.style.height=n.style.height}}if(f.style.height!=p){d=0;f.style.height=p;e.layouts2&&e.layouts2.setElementDirty(t)}}else{i=a;o=p}}};o=t.offsetHeight;i=t.offsetWidth}));