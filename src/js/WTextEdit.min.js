WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTextEdit",function(p,e){jQuery.data(e,"obj",this);var o,n,q=this,b=p.WT,r;if(!tinymce.dom.Event.domLoaded)tinymce.dom.Event.domLoaded=true;tinyMCE.init({mode:"none"});this.render=function(a,f,c){r=f;e.ed=new tinymce.Editor(e.id,a,tinymce.EditorManager);e.ed.render();c&&e.ed.onChange.add(function(){p.emit(e,"change")})};this.init=function(){var a=b.getElement(e.id+"_ifr"),f,c;if(tinymce.EditorManager.majorVersion<4){c=f=a.parentNode.parentNode.parentNode.parentNode;
f=f.parentNode}else f=a.parentNode.parentNode.parentNode;if(c){c.style.cssText="width:100%;"+r;e.style.height=c.offsetHeight+"px"}f.wtResize=e.wtResize;b.isGecko?setTimeout(function(){q.wtResize(e,o,n)},100):q.wtResize(e,o,n);$((b.isIE?document.frames[a.id].document:a.contentDocument).body).bind("paste",function(k){function d(m){return m.indexOf("image/")==0}var h=k.clipboardData||k.originalEvent.clipboardData,j,l;if(h&&h.types){j=0;for(l=h.types.length;j<l;++j)if(d(h.types[j])||d(h.items[j].type)){var i=
h.items[j].getAsFile(),g=new FileReader;g.onload=function(){e.ed.insertContent('<img src="'+this.result+'"></img>')};g.readAsDataURL(i);b.cancelEvent(k)}}})};this.wtResize=function(a,f,c){if(!(c<0)){var k=b.getElement(a.id+"_ifr");if(k){var d=0;b.px(a,"marginLeft");b.px(a,"marginRight");d=b.px(a,"marginTop")+b.px(a,"marginBottom");if(!b.boxSizing(a)){b.px(a,"borderLeftWidth");b.px(a,"borderRightWidth");b.px(a,"paddingLeft");b.px(a,"paddingRight");d+=b.px(a,"borderTopWidth")+b.px(a,"borderBottomWidth")+
b.px(a,"paddingTop")+b.px(a,"paddingBottom")}a.style.height=c-d+"px";var h,j=e.style.position!=="absolute";if(tinymce.EditorManager.majorVersion<4){var l=k.parentNode.parentNode,i=l.parentNode.parentNode,g,m;h=i;d=i.parentNode;if(!j&&typeof f!=="undefined")d.style.width=f-2+"px";g=0;for(m=i.rows.length;g<m;g++)if(i.rows[g]!=l)c-=i.rows[g].offsetHeight}else{l=k.parentNode;i=l.parentNode;d=i.parentNode;if(!j&&typeof f!=="undefined")d.style.width=f-2+"px";g=0;for(m=i.children.length;g<m;g++)if(i.children[g]!=
l)c-=i.children[g].offsetHeight+1;c-=1}if(!(c<0)){c+="px";if(j){d.style.position="static";d.style.display="block"}else{d.style.position=a.style.position;d.style.left=a.style.left;d.style.top=a.style.top;if(!j&&h)h.style.width=f+"px";if(h){h.style.height=c+"px";d.style.height=a.style.height}}if(k.style.height!=c)k.style.height=c}}else{o=f;n=c}}};n=e.offsetHeight});
